{"version":3,"sources":["components/users/UserForm.js"],"names":["Option","_Select","roles","id","name","status","genders","codepush_environment_options","true_false","UserForm","_ref","source","useParams","navigate","useNavigate","_jsx","_Layout","Content","style","height","overflow","padding","children","_Row","background","borderRadius","_jsxs","SimpleForm","onSubmit","textAcceptButton","FileUploader","flex","path","concat","onFinish","url","file","handleUploadFinish","field","_id","service","getService","galleryService","payloads","meta_file_name","meta_size","String","size","meta_media_type","type","description","create","then","_ref2","patch","response","catch","err","_message","error","message","_Input","placeholder","label","validations","required","Password","map","d","_DatePicker","xtype","format","locale","input","TextArea","autoSize"],"mappings":"8YAkBA,MAAM,OAAEA,GAAQC,IAEVC,EAAQ,CACZ,CACEC,GAAI,OACJC,KAAM,WAER,CACED,GAAI,QACJC,KAAM,kBAIJC,EAAS,CACb,CACEF,GAAI,SACJC,KAAM,UAER,CACED,GAAI,WACJC,KAAM,eAER,CACED,GAAI,qBACJC,KAAM,8BAER,CACED,GAAI,sBACJC,KAAM,iCAGJE,EAAU,CACd,CACEH,GAAI,OACJC,KAAM,aAER,CACED,GAAI,SACJC,KAAM,aAIGG,EAA+B,CAC1C,CAAEJ,GAAI,aAAcC,KAAM,cAC1B,CAAED,GAAI,UAAWC,KAAM,YAGZI,EAAa,CACxB,CAAEL,GAAI,QAASC,KAAM,SACrB,CAAED,GAAI,OAAQC,KAAM,SAwNPK,UAnNEC,IAAiB,IAAhB,OAAEC,GAAQD,EAE1B,MAAM,GAAEP,GAAOS,cACTC,EAAWC,cA8BjB,OACEC,cAAAC,IAAQC,QAAO,CAACC,MAAO,CAAEC,OAAQ,OAAQC,SAAU,OAAQC,QAAS,QAASC,SAC3EP,cAAAQ,IAAA,CAAKL,MAAO,CAAEG,QAAS,OAAQG,WAAY,QAASC,aAAc,UAAWH,SAC3EI,eAACC,IAAU,CACTxB,GAAIA,EACJQ,OAAQA,GAAU,QAClBiB,SAAUA,KACRf,EAAS,gCAEXgB,iBAAkB1B,EAAK,aAAe,QAAQmB,SAAA,CAE7CnB,GACCY,cAACe,IAAY,CACXC,KAAM,EACNC,KAAI,SAAAC,OAAW9B,EAAE,YACjBC,KAAK,iBACLO,OAAO,iBACPuB,SAAUA,CAACC,EAAKC,IA5CDC,EAACC,EAAOH,EAAKC,EAAMG,KAC5C,MAAMC,EAAUC,YAAW,SACrBC,EAAiBD,YAAW,WAClC,IAAIE,EAAW,CACbC,eAAgBR,EAAKhC,KACrByC,UAAWC,OAAOV,EAAKW,MACvB3C,KAAMgC,EAAKhC,KACX4C,gBAAiBZ,EAAKa,KACtBjB,KAAMG,EACNe,YAAa,IAEfR,EACGS,OAAOR,GACPS,KAAKC,IAAa,IAAZ,GAAElD,GAAIkD,EACC,WAARd,GACFC,EACGc,MAAMf,EAAK,CACV,CAACD,GAAQnC,IAEViD,KAAMG,OACNC,MAAOC,GAAQC,IAAQC,MAAMF,EAAIG,YAEvCJ,MAAOC,GAAQC,IAAQC,MAAMF,EAAIG,WAuBxBvB,CAAmB,oBAAqBF,EAAKC,EAAMjC,KAIzDY,cAAA8C,IAAA,CACEd,KAAK,QACLhB,KAAM,GACN+B,YAAY,SACZC,MAAM,SACN3D,KAAK,aACL4D,YAAa,CAAC,CAAEC,UAAU,EAAML,QAAS,6BAE3C7C,cAAA8C,IAAA,CACEd,KAAK,QACLhB,KAAM,GACN+B,YAAY,WACZC,MAAM,WACN3D,KAAK,YACL4D,YAAa,CAAC,CAAEC,UAAU,EAAML,QAAS,+BAE3C7C,cAAA8C,IAAA,CACEd,KAAK,QACLhB,KAAM,GACN+B,YAAY,QACZC,MAAM,SACNd,KAAK,QACL7C,KAAK,QACL4D,YAAa,CAAC,CAAEC,UAAU,EAAML,QAAS,4BAG3C7C,cAAA8C,IAAOK,SAAQ,CACbnB,KAAK,QACLhB,KAAM,GACNkB,KAAK,WAELa,YAAY,mDACZC,MAAM,gBACN3D,KAAK,WACL4D,YAAa,EACV7D,GAAM,CAAE8D,UAAU,EAAML,QAAS,oCAGtC7C,cAAAd,IAAA,CACE8C,KAAK,QACL3C,KAAK,SACL2D,MAAM,SACND,YAAY,cAAaxC,SAExBhB,EACE6D,IAAKC,GACJrD,cAACf,EAAM,CAAAsB,SAAc8C,EAAEhE,MAAVgE,EAAEjE,QAGnBA,GACAY,cAAAsD,IAAA,CACEC,MAAM,OACNvB,KAAK,QACLgB,MAAM,sBACN3D,KAAK,WACLmE,OAAO,aACPC,OAAQA,MAGZzD,cAAA8C,IAAA,CACES,MAAM,QACNG,OAAK,EACL1B,KAAK,QACLhB,KAAM,GACN+B,YAAY,SACZC,MAAM,wBACN3D,KAAK,qBAEL4D,YAAa,CACX,CAAEC,UAAU,EAAML,QAAS,4CAG/B7C,cAAA8C,IAAA,CACES,MAAM,QACNG,OAAK,EACL1B,KAAK,QACLhB,KAAM,GACN+B,YAAY,UACZC,MAAM,UACNd,KAAK,MACL7C,KAAK,QAEL4D,YAAa,CACX,CAAEC,UAAU,EAAML,QAAS,0CAE7B,IACF7C,cAAAd,IAAA,CACE8C,KAAK,QACLgB,MAAM,+BACN3D,KAAK,OACL0D,YAAY,+BACZE,YAAa,CAAC,CAAEC,UAAU,EAAML,QAAS,2BAA4BtC,SAGnEpB,EAAMiE,IAAKC,GACTrD,cAACf,EAAM,CAAAsB,SAAa8C,EAAEhE,MAATgE,EAAEjE,OAIrBY,cAAAd,IAAA,CACE8C,KAAK,QACL3C,KAAK,SACL2D,MAAM,SACND,YAAY,cACZE,YAAa,CAAC,CAAEC,UAAU,EAAML,QAAS,2BAA4BtC,SAEpEjB,EACE8D,IAAKC,GACJrD,cAACf,EAAM,CAAAsB,SAAa8C,EAAEhE,MAATgE,EAAEjE,OAGrBY,cAAAd,IAAA,CACE8C,KAAK,QACL3C,KAAK,kBACL2D,MAAM,kBACND,YAAY,cAAaxC,SAExBd,EACE2D,IAAKC,GACJrD,cAACf,EAAM,CAAAsB,SAAa8C,EAAEhE,MAATgE,EAAEjE,OAGrBY,cAAAd,IAAA,CACE8C,KAAK,QACL3C,KAAK,YACL2D,MAAM,YACND,YAAY,cAAaxC,SAExBd,EACE2D,IAAKC,GACJrD,cAACf,EAAM,CAAAsB,SAAa8C,EAAEhE,MAATgE,EAAEjE,OAGrBY,cAAAd,IAAA,CACE8C,KAAK,QACL3C,KAAK,sBACL2D,MAAM,wBACND,YAAY,cAAaxC,SAExBf,EACE4D,IAAKC,GACJrD,cAACf,EAAM,CAAAsB,SAAa8C,EAAEhE,MAATgE,EAAEjE,OAGrBY,cAAA8C,IAAOa,SAAQ,CACb3C,KAAM,EACN3B,KAAK,kBACL2D,MAAM,kBACNhB,KAAK,QACL4B,UAAQ,W","file":"static/js/57.4a5f48a2.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { SelectField, SimpleForm, DateField, FileUploader } from \"../com/form/\";\nimport locale from \"antd/es/date-picker/locale/es_ES\";\nimport {\n  Icon,\n  Input,\n  Select,\n  message,\n  DatePicker,\n  Layout,\n  Row\n} from \"antd\";\nimport { ImageField } from \"../com\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport qs from \"qs\";\n\nimport { getService } from '../../services';\n\nconst { Option } = Select;\n\nconst roles = [\n  {\n    id: \"user\",\n    name: \"Usuario\",\n  },\n  {\n    id: \"admin\",\n    name: \"Administrador\",\n  },\n];\n\nconst status = [\n  {\n    id: \"active\",\n    name: \"Activo\",\n  },\n  {\n    id: \"disabled\",\n    name: \"Desactivado\",\n  },\n  {\n    id: \"pending validation\",\n    name: \"Pendiente de validación\",\n  },\n  {\n    id: \"pending_information\",\n    name: \"Pendiente por información\",\n  },\n];\nconst genders = [\n  {\n    id: \"male\",\n    name: \"Masculino\",\n  },\n  {\n    id: \"female\",\n    name: \"Femenino\",\n  },\n];\n\nexport const codepush_environment_options = [\n  { id: \"production\", name: \"production\" },\n  { id: \"staging\", name: \"staging\" },\n];\n\nexport const true_false = [\n  { id: \"false\", name: \"False\" },\n  { id: \"true\", name: \"True\" },\n];\n\nconst exclude_admin_roles = [\"admin\"];\n\nconst UserForm = ({ source }) => {\n\n  const { id } = useParams(); \n  const navigate = useNavigate();\n   \n\n  const handleUploadFinish = (field, url, file, _id) => {\n    const service = getService(\"users\");\n    const galleryService = getService(\"gallery\");\n    let payloads = {\n      meta_file_name: file.name,\n      meta_size: String(file.size),\n      name: file.name,\n      meta_media_type: file.type,\n      path: url,\n      description: \"\",\n    };\n    galleryService\n      .create(payloads)\n      .then(({ id }) => {\n        if (_id !== \"create\")\n          service\n            .patch(_id, {\n              [field]: id,\n            })\n            .then((response) => { })\n            .catch((err) => message.error(err.message));\n      })\n      .catch((err) => message.error(err.message));\n  };\n\n \n\n  return (\n    <Layout.Content style={{ height: '100%', overflow: 'auto', padding: '2rem' }}>\n      <Row style={{ padding: '2rem', background: 'white', borderRadius: '0.5rem' }}>\n        <SimpleForm\n          id={id}\n          source={source || \"users\"}\n          onSubmit={() => {\n            navigate(`/dashboard/management/users`);\n          }}\n          textAcceptButton={id ? \"ACTUALIZAR\" : \"CREAR\"}\n        >\n          {id && (\n            <FileUploader\n              flex={1}\n              path={`users/${id}/avatar/`}\n              name='avatar_gallery'\n              source='avatar_gallery'\n              onFinish={(url, file) =>\n                handleUploadFinish(\"avatar_gallery_id\", url, file, id)\n              }\n            />\n          )}\n          <Input\n            size=\"large\"\n            flex={0.5}\n            placeholder=\"Nombre\"\n            label=\"Nombre\"\n            name=\"first_name\"\n            validations={[{ required: true, message: \"El nombre es requerido\" }]}\n          />\n          <Input\n            size=\"large\"\n            flex={0.5}\n            placeholder=\"Apellido\"\n            label=\"Apellido\"\n            name=\"last_name\"\n            validations={[{ required: true, message: \"El apellido es requerido\" }]}\n          />\n          <Input\n            size=\"large\"\n            flex={0.5}\n            placeholder=\"Email\"\n            label=\"Correo\"\n            type=\"email\"\n            name=\"email\"\n            validations={[{ required: true, message: \"El email es requerido\" }]}\n          // prefix={<Icon size=\"large\" type=\"mail\" />}\n          />\n          <Input.Password\n            size=\"large\"\n            flex={0.5}\n            type=\"password\"\n            // prefix={<Icon size=\"large\" type=\"lock\" />}\n            placeholder=\"●●●●●●●●\"\n            label=\"Contraseña\"\n            name=\"password\"\n            validations={[\n              !id && { required: true, message: \"La contraseña es requerida\" },\n            ]}\n          />\n          <Select\n            size=\"large\"\n            name=\"gender\"\n            label=\"Genero\"\n            placeholder=\"Seleccionar\"\n          >\n            {genders\n              .map((d) => (\n                <Option key={d.id} >{d.name}</Option>\n              ))}\n          </Select>\n          {!id &&\n            <DatePicker\n              xtype=\"date\"\n              size=\"large\"\n              label=\"Fecha de nacimiento\"\n              name=\"birthday\"\n              format=\"MM/DD/YYYY\"\n              locale={locale}\n            />\n          }\n          <Input\n            xtype=\"phone\"\n            input\n            size=\"large\"\n            flex={0.1}\n            placeholder=\"Ej: 57\"\n            label=\"Código del País\"\n            name=\"phone_country_code\"\n            // prefix={<Icon size=\"large\" type=\"phone\" />}\n            validations={[\n              { required: true, message: \"El código del país es requerido\" },\n            ]}\n          />\n          <Input\n            xtype=\"phone\"\n            input\n            size=\"large\"\n            flex={0.2}\n            placeholder=\"Celular\"\n            label=\"Celular\"\n            type=\"tel\"\n            name=\"phone\"\n            // prefix={<Icon size=\"large\" type=\"phone\" />}\n            validations={[\n              { required: true, message: \"El teléfono celular es requerido\" },\n            ]}\n          />(\n          <Select\n            size=\"large\"\n            label=\"Elige un rol para el usuario\"\n            name=\"role\"\n            placeholder=\"Elige un rol para el usuario\"\n            validations={[{ required: true, message: \"El estado es requerido\" }]}\n          >\n            {\n              roles.map((d) => (\n                <Option key={d.id}>{d.name}</Option>\n              ))\n            }\n          </Select>\n          <Select\n            size=\"large\"\n            name=\"status\"\n            label=\"Estado\"\n            placeholder=\"Seleccionar\"\n            validations={[{ required: true, message: \"El estado es requerido\" }]}\n          >\n            {status\n              .map((d) => (\n                <Option key={d.id}>{d.name}</Option>\n              ))}\n          </Select>\n          <Select\n            size=\"large\"\n            name=\"account_manager\"\n            label=\"Account manager\"\n            placeholder=\"Seleccionar\"\n          >\n            {true_false\n              .map((d) => (\n                <Option key={d.id}>{d.name}</Option>\n              ))}\n          </Select>\n          <Select\n            size=\"large\"\n            name=\"test_user\"\n            label=\"Test User\"\n            placeholder=\"Seleccionar\"\n          >\n            {true_false\n              .map((d) => (\n                <Option key={d.id}>{d.name}</Option>\n              ))}\n          </Select>\n          <Select\n            size=\"large\"\n            name=\"codepush_enviorment\"\n            label=\"Code Push Environment\"\n            placeholder=\"Seleccionar\"\n          >\n            {codepush_environment_options\n              .map((d) => (\n                <Option key={d.id}>{d.name}</Option>\n              ))}\n          </Select>\n          <Input.TextArea\n            flex={1}\n            name='disabled_reason'\n            label=\"Disabled Reason\"\n            size=\"large\"\n            autoSize\n          />\n        </SimpleForm>\n      </Row>\n    </Layout.Content>\n  );\n};\nexport default UserForm;\n"],"sourceRoot":""}