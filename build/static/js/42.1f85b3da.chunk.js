(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[42],{1119:function(e,a,t){"use strict";t.r(a);t(362);var i=t(363),n=(t(377),t(379)),r=t(0),s=t(364),c=(t(366),t(367)),o=(t(357),t(358)),d=(t(371),t(374)),l=(t(219),t(361)),m=t(2),b=(t(218),t(69)),u=(t(351),t(352)),h=(t(143),t(142)),p=(t(372),t(373)),j=(t(408),t(412)),x=t(42),v=t.n(x),O=t(144),_=t.n(O),g=t(380),f=t(356),y=t(54),w=t(353),C=t(401),S=t(359),k=t(370),q=t(360),I=t(398),z=t(68),F=(t(394),t(393)),E=(t(375),t(376)),D=(t(354),t(355)),T=(t(427),t(432)),Y=t(513);const A=e=>{let{campaign_id:a,page:t,source:i,filters:n}=e;const s=Object(z.b)(i),[c,o]=Object(r.useState)({}),[d,l]=Object(r.useState)(!1),b=()=>{l(!0),s.find({query:Object(m.a)(Object(m.a)({},n),{},{$limit:9,$skip:9*(t-1)})}).then(e=>{let{data:a,total:t}=e;o({data:a,total:t}),l(!1)}).catch(()=>{o([]),l(!1)})};return Object(r.useEffect)(()=>{a&&b()},[a,t]),[c,b,d]};var M=t(14);const P=[{id:"establishment_profile",name:"Perfil restaurante"},{id:"checkout",name:"Checkout"},{id:"home",name:"Home"}];var $=e=>{let{modalVisible:a,onCancel:t,selectedCampaign:i}=e;const n=Object(z.b)("establishments-branchs"),s=Object(z.b)("establishments-branchs-campaigns"),[c,d]=Object(r.useState)([]),[l,m]=Object(r.useState)(),[h,p]=Object(r.useState)(),[j,O]=Object(r.useState)(1),[_,g,y]=A({campaign_id:null===i||void 0===i?void 0:i.id,page:j,source:"establishments-branchs-campaigns",filters:{meta_campaign_id:null===i||void 0===i?void 0:i.id,$select:["meta_establishment_name","meta_establishment_branch_address","show_screen"],$sort:{meta_establishment_name:1}}}),C=Object(x.debounce)(e=>{""!==e?n.find({query:{q:e,$client:{fullName:!0}}}).then(e=>{v.a.isEmpty(e)||d(v.a.sortBy(e,[e=>{let{full_name:a}=e;return a}]))}).catch(e=>b.b.error(e)):d([])},500,{maxWait:800});return Object(M.jsxs)(f.c,{title:"Establecimientos en la campa\xf1a ".concat(null===i||void 0===i?void 0:i.name),onCancel:t,visible:a,children:[Object(M.jsxs)(u.a,{gutter:8,children:[Object(M.jsx)(D.a,{flex:"auto",children:Object(M.jsxs)(T.b,{direction:"vertical",style:{width:"100%"},children:[Object(M.jsx)(o.a,{showSearch:!0,placeholder:"A\xf1adir sucursal",allowClear:!0,onSearch:C,value:l,onClear:()=>m(),onSelect:e=>{m(e)},optionFilterProp:"children",style:{width:"100%"},filterOption:(e,a)=>a.children.toLowerCase().includes(e.toLowerCase()),children:v.a.map(c,(e,a)=>{let{establishment_branch_id:t,full_name:i}=e;return Object(M.jsx)(o.a.Option,{value:t,children:i},a)})}),Object(M.jsx)(o.a,{showSearch:!0,placeholder:"Ubicaci\xf3n",allowClear:!0,value:h,onClear:()=>p(),onSelect:e=>{p(e)},optionFilterProp:"children",style:{width:"100%"},filterOption:(e,a)=>a.children.toLowerCase().includes(e.toLowerCase()),children:v.a.map(P,(e,a)=>{let{id:t,name:i}=e;return Object(M.jsx)(o.a.Option,{value:t,children:i},a)})})]})}),Object(M.jsx)(D.a,{flex:"none",children:Object(M.jsx)(S.a,{type:"primary",onClick:()=>{(e=>{let{establishment_branch_id:a,campaign_id:t,show_screen:i}=e;s.create({meta_campaign_id:t,meta_establishment_branch_id:a,show_screen:i}).then(()=>{b.b.success("Establecimiento a\xf1adido correctamente!"),m(),p(),g()}).catch(e=>{b.b.error(null===e||void 0===e?void 0:e.message)})})({establishment_branch_id:l,campaign_id:i.id,show_screen:h})},children:"A\xf1adir"})})]}),Object(M.jsx)(E.a,{style:{background:"transparent",borderTop:0,marginTop:0}}),Object(M.jsx)(F.a,{loading:y,dataSource:(null===_||void 0===_?void 0:_.data)||[],columns:[{title:"Establecimiento",dataIndex:"meta_establishment_name",key:"meta_establishment_name",render:(e,a)=>{let{meta_establishment_branch_address:t}=a;return e+" - "+t}},{title:"Show Screen",dataIndex:"show_screen",key:"Ubicaci\xf3n pantalla",render:(e,a)=>{var t;return Object(M.jsx)(Y.a,{options:P,record:a,value:(null===(t=v.a.find(P,a=>{let{id:t}=a;return t===e}))||void 0===t?void 0:t.name)||"Ninguna",onChange:async e=>await(async e=>{let{id:a,show_screen:t}=e;await s.patch(a,{show_screen:t}).then(()=>{b.b.success("Cambios guardados exitosamente!"),g()}).catch(e=>b.b.error("Error al actualizar! "+(null===e||void 0===e?void 0:e.message)))})({id:a.id,show_screen:e})})}},{title:"Acciones",dataIndex:"id",key:"id",width:100,render:e=>Object(M.jsx)(S.a,{type:"link",onClick:()=>(e=>{let{id:a}=e;s.remove(a).then(()=>{b.b.success("Establecimiento eliminado correctamente!"),m(),g()}).catch(e=>{b.b.error(null===e||void 0===e?void 0:e.message)})})({id:e}),icon:Object(M.jsx)(w.h,{}),confirmText:"Desea eliminar?"})}],pagination:{current:j,showSizeChanger:!1,pageSize:9,onChange:e=>{O(e)},total:(null===_||void 0===_?void 0:_.total)||0,showTotal:e=>"Total ".concat(e," record").concat(e>1?"s":"")}})]})};const B=[{id:"establishment_profile",name:"Perfil restaurante"},{id:"checkout",name:"Checkout"},{id:"home",name:"Home"}];var V=e=>{let{modalVisible:a,onCancel:t,selectedCampaign:i}=e;const n=Object(z.b)("establishments"),s=Object(z.b)("menu-items-campaigns"),c=Object(z.b)("establishment-menu-items"),[d,l]=Object(r.useState)([]),[m,h]=Object(r.useState)([]),[p,j]=Object(r.useState)(),[O,_]=Object(r.useState)(),[g,y]=Object(r.useState)(),[C,k]=Object(r.useState)(1),[q,I,P]=A({campaign_id:null===i||void 0===i?void 0:i.id,page:C,source:"menu-items-campaigns",filters:{meta_campaign_id:null===i||void 0===i?void 0:i.id,$select:["meta_establishment_name","meta_campaign_name","show_screen","meta_menu_item_name"]}}),$=Object(x.debounce)(async e=>{""!==e?await n.find({query:{q:e,$client:{skipJoins:!0},$limit:25,$select:["id","name"]}}).then(e=>{let{data:a}=e;v.a.isEmpty(a)||l(a)}).catch(e=>b.b.error(e)):l([])},800,{maxWait:900}),V=Object(x.debounce)(async e=>{""===e&&p?h([]):await c.find({query:{q:e,$client:{filterByQ:!0},establishment_id:p,$limit:50}}).then(e=>{v.a.isEmpty(e)||h(e)}).catch(e=>b.b.error(e))},800,{maxWait:900});return Object(M.jsxs)(f.c,{title:"Platillos en la campa\xf1a ".concat(null===i||void 0===i?void 0:i.name),onCancel:t,visible:a,children:[Object(M.jsxs)(u.a,{gutter:8,children:[Object(M.jsx)(D.a,{flex:"auto",children:Object(M.jsxs)(T.b,{direction:"vertical",style:{width:"100%"},children:[Object(M.jsx)(o.a,{showSearch:!0,placeholder:"Buscar establecimiento",allowClear:!0,onSearch:$,value:p,onClear:()=>j(),onSelect:e=>{j(e)},optionFilterProp:"children",style:{width:"100%"},filterOption:(e,a)=>a.children.toLowerCase().includes(e.toLowerCase()),children:v.a.map(d,(e,a)=>{let{id:t,name:i}=e;return Object(M.jsx)(o.a.Option,{value:t,children:i},a)})}),Object(M.jsx)(o.a,{disabled:!p,showSearch:!0,placeholder:"A\xf1adir plato",allowClear:!0,onSearch:V,value:O,onClear:()=>_(),onSelect:e=>{_(e)},optionFilterProp:"children",style:{width:"100%"},filterOption:(e,a)=>a.children.toLowerCase().includes(e.toLowerCase()),children:v.a.map(m,(e,a)=>{let{id:t,name:i}=e;return Object(M.jsx)(o.a.Option,{value:t,children:i},a)})})]})}),Object(M.jsx)(D.a,{flex:"none",children:Object(M.jsx)(S.a,{type:"primary",onClick:()=>{(e=>{let{meta_menu_item_id:a,campaign_id:t,show_screen:i}=e;s.create({meta_campaign_id:t,meta_menu_item_id:a,show_screen:i}).then(()=>{b.b.success("Establecimiento a\xf1adido correctamente!"),j(),y(),_(),I()}).catch(e=>{b.b.error(null===e||void 0===e?void 0:e.message)})})({meta_menu_item_id:O,campaign_id:i.id,show_screen:g})},children:"A\xf1adir"})})]}),Object(M.jsx)(E.a,{style:{background:"transparent",borderTop:0,marginTop:0}}),Object(M.jsx)(F.a,{loading:P,dataSource:(null===q||void 0===q?void 0:q.data)||[],columns:[{title:"Establecimiento - Plato",dataIndex:"meta_establishment_name",key:"meta_establishment_name",render:(e,a)=>{let{meta_menu_item_name:t}=a;return e+" - "+t}},{title:"Show Screen",dataIndex:"show_screen",key:"Ubicaci\xf3n pantalla",render:(e,a)=>{var t;return Object(M.jsx)(Y.a,{options:B,record:a,value:(null===(t=v.a.find(B,a=>{let{id:t}=a;return t===e}))||void 0===t?void 0:t.name)||"Ninguna",onChange:async e=>await(async e=>{let{id:a,show_screen:t}=e;await s.patch(a,{show_screen:t}).then(()=>{b.b.success("Cambios guardados exitosamente!"),I()}).catch(e=>b.b.error("Error al actualizar! "+(null===e||void 0===e?void 0:e.message)))})({id:a.id,show_screen:e})})}},{title:"Acciones",dataIndex:"id",key:"id",width:100,render:e=>Object(M.jsx)(S.a,{type:"link",onClick:()=>(e=>{let{id:a}=e;s.remove(a).then(()=>{b.b.success("Plato eliminado correctamente!"),j(),_(),I()}).catch(e=>{b.b.error(null===e||void 0===e?void 0:e.message)})})({id:e}),icon:Object(M.jsx)(w.h,{}),confirmText:"Desea eliminar?"})}],pagination:{current:C,showSizeChanger:!1,pageSize:9,onChange:e=>{k(e)},total:(null===q||void 0===q?void 0:q.total)||0,showTotal:e=>"Total ".concat(e," record").concat(e>1?"s":"")}})]})};const N=[{id:"active",name:"Active"},{id:"inactive",name:"Inactive"}],W=e=>{let{onRemove:a,onEdit:t,onWatch:i,onWatchMenuItems:n}=e;return[{title:"Id",dataIndex:"id",sorter:!0},{title:"Foto",dataIndex:"path",render:e=>e&&Object(M.jsx)(j.a,{size:"large",alt:"Campaign-Image",src:"".concat(y.f,"/").concat(window.imageShark({url:e,width:90,height:35})),preview:{src:"".concat(y.j).concat(e)}})},{title:"Nombre",dataIndex:"name",sorter:!0},{dataIndex:"date_start",sorter:!0,title:"Fecha Inicio",render:e=>_()(e).format("YYYY-MM-DD h:mm:ss a")},{dataIndex:"date_end",sorter:!0,title:"Fecha Fin",render:e=>_()(e).format("YYYY-MM-DD h:mm:ss a")},{title:"Descripci\xf3n",dataIndex:"description"},{title:"Estado",dataIndex:"status",sorter:!0,render:e=>"active"===e?Object(M.jsx)(p.a,{color:"green",children:"Active"}):Object(M.jsx)(p.a,{color:"red",children:"Inactive"})},{title:"Acciones",dataIndex:"id",render:(e,r)=>Object(M.jsxs)(u.a,{children:[Object(M.jsx)(h.a,{type:"text",onClick:()=>i({id:e,name:r.name}),icon:Object(M.jsx)(C.h,{})}),Object(M.jsx)(h.a,{type:"text",onClick:()=>n({id:e,name:r.name}),icon:Object(M.jsx)(C.g,{})}),Object(M.jsx)(h.a,{type:"text",onClick:()=>t(r),icon:Object(M.jsx)(w.l,{})}),Object(M.jsx)(S.a,{type:"link",onClick:()=>a({id:e}),icon:Object(M.jsx)(w.h,{}),confirmText:"Desea eliminar?"})]})}]};var L=()=>{const e=Object(z.b)("campaigns"),[a,t]=Object(r.useState)(!1),[i,n]=Object(r.useState)(!1),[s,u]=Object(r.useState)(!1),[h,p]=Object(r.useState)(!1),[j,x]=Object(r.useState)(),O=(a,t,i,n)=>{e.patch(n,{[a]:String(t)}).then(e=>{x(Object(m.a)({},e)),p(!h)}).catch(e=>b.b.error(e.message))};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(f.b,{custom:!0,source:"campaigns",filterDefaultValues:{$sort:{id:-1}},searchField:"name",searchText:"Campa\xf1as...",search:!0,permitFetch:!0,actions:{},updateSource:h,columns:W({onRemove:async a=>{let{id:t}=a;await e.remove(t).then(()=>{b.b.success("Campa\xf1a eliminada!"),p(!h)}).catch(e=>b.b.error("No se pudo eliminar la campa\xf1a! "+(null===e||void 0===e?void 0:e.message)))},onEdit:e=>{x(Object(m.a)(Object(m.a)({},e),{},{date_start:_()(e.date_start),date_end:_()(e.date_end)})),t(!0)},onWatch:e=>{x(e),n(!0)},onWatchMenuItems:e=>{x(e),u(!0)}}),extra:Object(M.jsx)("div",{children:Object(M.jsx)(k.a,{type:"primary",icon:Object(M.jsx)(w.u,{}),onClick:()=>t(!0),children:"Agregar"})})}),a&&Object(M.jsx)(c.a,{title:"".concat(j?"Editar":"Crear"," Banner"),placement:"right",visible:a,onClose:()=>{t(!1),x()},children:Object(M.jsxs)(q.d,{textAcceptButton:"Guardar",initialValues:j,onSubmit:async(a,i,n)=>{if(a)return b.b.error(a);i.date_start=i.date_start?_()(i.date_start).utc().format():void 0,i.date_end=i.date_end?_()(i.date_end).utc().format():void 0,delete i.path,delete i.second_path,delete i.path_in_app,j&&j.id?await e.patch(j.id,i).then(()=>{b.b.success("Campa\xf1a actualizada!"),t(!1),x(),p(!h)}).catch(e=>b.b.error(e.message)):await e.create(i).then(()=>{b.b.success("Campa\xf1a creada!"),t(!1),p(!h)}).catch(e=>b.b.error(e.message))},children:[(null===j||void 0===j?void 0:j.id)&&(null===j||void 0===j?void 0:j.path)&&Object(M.jsx)(I.a,{refresh:(e,a)=>{x(Object(m.a)({},a)),p(!h)},size:"large",record:j,defaultImage:null===j||void 0===j?void 0:j.path,source:"path",withCropper:!0,setterVisibleCropper:()=>{},reference:"campaigns",_id:j.id,path:"campaigns_path/".concat(+(null===j||void 0===j?void 0:j.id))}),(null===j||void 0===j?void 0:j.id)&&Object(M.jsx)(q.b,{flex:1,preview:!1,title:"Imagen Principal",path:"campaigns_path/".concat(j.id,"/"),name:"path",source:"path",style:{borderRadius:"0.5rem"},onFinish:(e,a)=>O("path",e,0,j.id)}),(null===j||void 0===j?void 0:j.id)&&(null===j||void 0===j?void 0:j.second_path)&&Object(M.jsx)(I.a,{refresh:(e,a)=>{x(Object(m.a)({},a)),p(!h)},size:"large",record:j,defaultImage:null===j||void 0===j?void 0:j.second_path,source:"second_path",withCropper:!0,setterVisibleCropper:()=>{},reference:"campaigns",_id:j.id,path:"campaigns_second_path/".concat(+(null===j||void 0===j?void 0:j.id))}),(null===j||void 0===j?void 0:j.id)&&Object(M.jsx)(q.b,{flex:1,preview:!1,title:"Imagen Secundaria",path:"campaigns_second_path/".concat(j.id,"/"),name:"second_path",source:"second_path",style:{borderRadius:"0.5rem"},onFinish:(e,a)=>O("second_path",e,0,j.id)}),(null===j||void 0===j?void 0:j.id)&&(null===j||void 0===j?void 0:j.path_in_app)&&Object(M.jsx)(I.a,{refresh:(e,a)=>{x(Object(m.a)({},a)),p(!h)},size:"large",record:j,defaultImage:null===j||void 0===j?void 0:j.path_in_app,source:"path_in_app",withCropper:!0,setterVisibleCropper:()=>{},reference:"campaigns",_id:j.id,path:"campaigns_path_in_app/".concat(+(null===j||void 0===j?void 0:j.id))}),(null===j||void 0===j?void 0:j.id)&&Object(M.jsx)(q.b,{flex:1,preview:!1,title:"Imagen modal",path:"campaigns_path_in_app/".concat(j.id,"/"),name:"path_in_app",source:"path_in_app",style:{borderRadius:"0.5rem"},onFinish:(e,a)=>O("path_in_app",e,0,j.id)}),Object(M.jsx)(l.a,{flex:1,name:"name",label:"Nombre",size:"large",validations:[{required:!0,message:"Nombre es requerido"}]}),Object(M.jsx)(d.a,{flex:1,size:"large",name:"date_start",label:"Fecha Inicio",locale:g.a,format:"YYYY-MM-DD h:mm:ss",showTime:!0,secondStep:60,validations:[{required:!0,message:"Fecha Inicio es requerida"}]}),Object(M.jsx)(d.a,{flex:1,size:"large",name:"date_end",label:"Fecha Fin",locale:g.a,format:"YYYY-MM-DD h:mm:ss",showTime:!0,secondStep:60,validations:[{required:!0,message:"Fecha Fin es requerida"}]}),Object(M.jsx)(o.a,{flex:1,name:"status",label:"Estado",size:"large",validations:[{required:!0,message:"Estado es requerido"}],children:v.a.map(N,(e,a)=>{let{id:t,name:i}=e;return Object(M.jsx)(o.a.Option,{value:t,children:i},a)})}),Object(M.jsx)(o.a,{flex:1,name:"show_in_app",label:"Mostrar modal",size:"large",validations:[{required:!0,message:"Estado es requerido"}],children:v.a.map(["true","false"],(e,a)=>Object(M.jsx)(o.a.Option,{value:e,children:"true"===e?"si":"no"},a))}),Object(M.jsx)(l.a.TextArea,{flex:1,size:"large",name:"description",label:"Descripci\xf3n",autoSize:!0})]})}),i&&Object(M.jsx)($,{modalVisible:i,onCancel:()=>{n(!1),x()},selectedCampaign:j}),s&&Object(M.jsx)(V,{modalVisible:s,onCancel:()=>{u(!1),x()},selectedCampaign:j})]})},R=(t(368),t(369)),J=(t(386),t(387)),U=t(12),G=t(480);var H=e=>{let{modalVisible:a,onCancel:t,selectedCampaign:i}=e;const n=Object(z.b)("establishments-branchs"),s=Object(z.b)("pay-campaigns-establishments-branchs"),[c,d]=Object(r.useState)([]),[l,h]=Object(r.useState)(),[p,j]=Object(r.useState)(1),[O,_,g]=A({source:"pay-campaigns-establishments-branchs",campaign_id:null===i||void 0===i?void 0:i.id,page:p,filters:{pay_campaign_id:null===i||void 0===i?void 0:i.id}}),y=Object(x.debounce)(e=>{""!==e?n.find({query:{q:e,$client:{fullName:!0}}}).then(e=>{d(v.a.sortBy(e,[e=>{let{full_name:a}=e;return a}]))}).catch(e=>b.b.error(e)):d([])},500,{maxWait:800});return Object(M.jsxs)(f.c,{title:"Establecimientos en la campa\xf1a ".concat(null===i||void 0===i?void 0:i.name),onCancel:t,visible:a,children:[Object(M.jsxs)(u.a,{gutter:8,children:[Object(M.jsx)(D.a,{flex:"auto",children:Object(M.jsx)(o.a,{showSearch:!0,placeholder:"A\xf1adir sucursal",allowClear:!0,onSearch:y,value:l,onClear:()=>h(),onSelect:e=>{h(e)},optionFilterProp:"children",style:{width:"100%"},filterOption:(e,a)=>a.children.toLowerCase().includes(e.toLowerCase()),children:v.a.map(c,(e,a)=>{let{establishment_branch_id:t,establishment_id:i,full_name:n}=e;return Object(M.jsx)(o.a.Option,{value:JSON.stringify({establishment_branch_id:t,establishment_id:i}),children:n},a)})})}),Object(M.jsx)(D.a,{flex:"none",children:Object(M.jsx)(S.a,{type:"primary",onClick:()=>(e=>{let{establishmentBranchSelected:a,pay_campaign_id:t}=e;s.create(Object(m.a)(Object(m.a)({},JSON.parse(a)),{},{pay_campaign_id:t,status:"active"})).then(()=>{b.b.success("Establecimiento a\xf1adido correctamente!"),h(),_()}).catch(e=>{b.b.error(null===e||void 0===e?void 0:e.message)})})({establishmentBranchSelected:l,pay_campaign_id:i.id}),children:"A\xf1adir"})})]}),Object(M.jsx)(E.a,{style:{background:"transparent",borderTop:0,marginTop:0}}),Object(M.jsx)(F.a,{loading:g,dataSource:(null===O||void 0===O?void 0:O.data)||[],columns:[{title:"Establecimiento Id",dataIndex:"establishment_id",key:"establishment_id"},{title:"Sucursal Id",dataIndex:"establishment_branch_id",key:"establishment_branch_id"},{title:"Acciones",dataIndex:"id",key:"id",width:100,render:e=>Object(M.jsx)(S.a,{type:"link",onClick:()=>(e=>{let{id:a}=e;s.remove(a).then(()=>{b.b.success("Establecimiento eliminado correctamente!"),h(),_()}).catch(e=>{b.b.error(null===e||void 0===e?void 0:e.message)})})({id:e}),icon:Object(M.jsx)(w.h,{}),confirmText:"Desea eliminar?"})}],pagination:{current:p,showSizeChanger:!1,pageSize:9,onChange:e=>{j(e)},total:(null===O||void 0===O?void 0:O.total)||0,showTotal:e=>"Total ".concat(e," record").concat(e>1?"s":"")}})]})};const K=["choices"],Q=["id"],X=[{id:"active",name:"Active",color:"green"},{id:"inactive",name:"Inactive",color:"red"}],Z=[{id:"credit_card",name:"Tarjeta de cr\xe9dito"}],ee=[{id:"percentage",name:"Porcentaje"},{id:"amount_fixed",name:"Monto fijo"}],ae=[{id:"american-express",name:"American Express"},{id:"diners-club",name:"Diners Club"},{id:"mastercard",name:"MasterCard"},{id:"visa",name:"VISA"}],te=[{id:"specific",name:"Especifico"},{id:"general",name:"General"}],ie=[{id:"before_payment",name:"Antes del pago"},{id:"after_payment",name:"Despu\xe9s del pago"}],ne=e=>{let{banks:a,onEdit:t,onRemove:i,onWatch:n}=e;return[{title:"Id",dataIndex:"id",key:"id",sorter:!0},{title:"Nombre",dataIndex:"name",key:"name",sorter:!0},{title:"Tipo",dataIndex:"type",key:"type",sorter:!0,render:e=>{var a;return(null===(a=v.a.find(Z,a=>{let{id:t}=a;return t===e}))||void 0===a?void 0:a.name)||e}},{title:"Franquicia",dataIndex:"franchise",key:"franchise",sorter:!0,render:e=>{var a;return(null===(a=v.a.find(ae,a=>{let{id:t}=a;return t===e}))||void 0===a?void 0:a.name)||e}},{title:"Banco",dataIndex:"bank_id",key:"bank_id",sorter:!0,render:e=>{var t;return(null===(t=v.a.find(a,a=>{let{id:t}=a;return t===e}))||void 0===t?void 0:t.name)||e}},{title:"Fecha inicio",dataIndex:"date_start",key:"date_start",sorter:!0,render:e=>_()(e).format("YYYY-MM-DD h:mm:ss a")},{title:"Fecha fin",dataIndex:"date_end",key:"date_end",sorter:!0,render:e=>_()(e).format("YYYY-MM-DD h:mm:ss a")},{title:"Dias exp.",dataIndex:"days_to_expire_bonus",key:"days_to_expire_bonus",sorter:!0},{title:"Condici\xf3n",dataIndex:"condition_type",key:"condition_type",sorter:!0,render:e=>{var a;return(null===(a=v.a.find(te,a=>{let{id:t}=a;return t===e}))||void 0===a?void 0:a.name)||""}},{title:"Redenci\xf3n",dataIndex:"way_redeem",key:"way_redeem",sorter:!0,render:e=>{var a;return(null===(a=v.a.find(ie,a=>{let{id:t}=a;return t===e}))||void 0===a?void 0:a.name)||""}},{title:"Estado",dataIndex:"status",sorter:!0,render:e=>{const a=v.a.find(X,a=>{let{id:t}=a;return t===e})||e;return Object(M.jsx)(p.a,{color:(null===a||void 0===a?void 0:a.color)||"default",children:(null===a||void 0===a?void 0:a.name)||a})}},{title:"Acciones",dataIndex:"id",render:(e,a)=>Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(h.a,{type:"text",onClick:()=>t(a),icon:Object(M.jsx)(w.l,{})}),Object(M.jsx)(S.a,{type:"link",onClick:()=>i({id:e}),icon:Object(M.jsx)(w.h,{}),confirmText:"Desea eliminar?"}),(null===a||void 0===a?void 0:a.condition_type)===te[0].id&&Object(M.jsx)(h.a,{type:"text",onClick:()=>n({id:e,name:null===a||void 0===a?void 0:a.name}),icon:Object(M.jsx)(w.m,{})})]})}]},re=e=>{let{choices:a}=e,t=Object(U.a)(e,K);return Object(M.jsx)(o.a,Object(m.a)(Object(m.a)({},t),{},{children:v.a.map(a,(e,a)=>{let{id:t,name:i}=e;return Object(M.jsx)(o.a.Option,{value:t,children:i},a)})}))};var se=()=>{const[e]=J.a.useForm(),a=J.a.useWatch("id",e),t=J.a.useWatch("amount_calculator_type",e),i=Object(z.b)("pay-campaigns"),[n,s]=Object(r.useState)(!1),[o,u]=Object(r.useState)(!1),[h,p]=Object(r.useState)(),[j,x]=Object(r.useState)(!1),[O]=Object(G.a)();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(f.b,{source:"pay-campaigns",columns:ne({banks:O,onEdit:e=>{p(Object(m.a)(Object(m.a)({},v.a.mapValues(e,e=>{if(null!==e)return e})),{},{date_start:e.date_start&&_()(e.date_start),date_end:e.date_end&&_()(e.date_end)})),s(!0)},onRemove:async e=>{let{id:a}=e;await i.remove(a).then(()=>{b.b.success("Campa\xf1a eliminada!"),u(!o)}).catch(e=>b.b.error("No se pudo eliminar la campa\xf1a! "+(null===e||void 0===e?void 0:e.message)))},onWatch:e=>{p(e),x(!0)}}),updateSource:o,filterDefaultValues:{$sort:{id:-1}},extra:Object(M.jsx)("div",{children:Object(M.jsx)(k.a,{type:"primary",icon:Object(M.jsx)(w.u,{}),onClick:()=>{s(!0),p(),e.resetFields()},children:"Agregar"})}),actions:{}}),n&&Object(M.jsx)(c.a,{title:"".concat(a?"Editar":"Crear"," Campa\xf1a"),size:"large",placement:"right",visible:n,onClose:()=>{p(),e.resetFields(),s(!1)},children:Object(M.jsxs)(q.d,{form:e,textAcceptButton:"".concat(a?"Actualizar":"Crear"),onSubmit:async(t,n)=>{if(t)return b.b.error(t);n.date_start=n.date_start?_()(n.date_start).utc().format():void 0,n.date_end=n.date_end?_()(n.date_end).utc().format():void 0;const{id:r}=n,c=Object(U.a)(n,Q);a?await i.patch(a,Object(m.a)({},c)).then(()=>{b.b.success("Campa\xf1a actualizada!"),p(),e.resetFields(),s(!1),u(!o)}).catch(e=>b.b.error(e.message)):await i.create(Object(m.a)({},c)).then(()=>{b.b.success("Campa\xf1a creada!"),p(),e.resetFields(),s(!1),u(!o)}).catch(e=>b.b.error(e.message))},noAcceptButtonBlock:!0,initialValues:h,children:[Object(M.jsx)(l.a,{type:"hidden",name:"id"}),Object(M.jsx)(l.a,{flex:.5,size:"large",name:"name",label:"Nombre",validations:[{required:!0,message:"Nombre es requerido"}]}),Object(M.jsx)(re,{flex:.5,size:"large",name:"type",label:"Tipo",choices:Z,validations:[{required:!0,message:"Tipo es requerido"}]}),Object(M.jsx)(re,{flex:.5,size:"large",name:"franchise",label:"Franquicia",choices:ae,validations:[{required:!0,message:"Franquicia es requerido"}]}),Object(M.jsx)(re,{flex:.5,size:"large",name:"bank_id",label:"Banco",choices:O,validations:[{required:!0,message:"Banco es requerido"}]}),Object(M.jsx)(d.a,{flex:.5,name:"date_start",label:"Fecha Inicio",locale:g.a,showTime:!0,format:"YYYY-MM-DD h:mm:ss a",secondStep:60,validations:[{required:!0,message:"Fecha Inicio es requerida"}]}),Object(M.jsx)(d.a,{flex:.5,name:"date_end",label:"Fecha Fin",locale:g.a,showTime:!0,format:"YYYY-MM-DD h:mm:ss a",secondStep:60,validations:[{required:!0,message:"Fecha Fin es requerida"}]}),Object(M.jsx)(R.a,{flex:.5,size:"large",name:"days_to_expire_bonus",label:"Dias expiraci\xf3n",validations:[{required:!0,message:"Dias exp. es requerido"}]}),Object(M.jsx)(re,{flex:.5,size:"large",name:"amount_calculator_type",label:"Tipo de calculo",choices:ee,validations:[{required:!0,message:"Este campo es requerido"}]}),Object(M.jsx)(R.a,{flex:.5,size:"large",name:"amount",label:"Monto",validations:[{required:t===ee[1].id,message:"Monto. es requerido"}]}),Object(M.jsx)(R.a,{flex:.5,size:"large",name:"percentage",label:"Porcentaje",validations:[{required:t===ee[0].id,message:"Porcentaje es requerido"}]}),Object(M.jsx)(R.a,{flex:.5,size:"large",name:"bin_code",label:"C\xf3digo Bin"}),Object(M.jsx)(R.a,{flex:.5,size:"large",name:"max_amount",label:"Monto m\xe1ximo",validations:[{required:t===ee[0].id,message:"Monto m\xe1ximo es requerido"}]}),Object(M.jsx)(R.a,{flex:.5,size:"large",name:"min_amount",label:"Monto m\xednimo",validations:[{required:!0,message:"Monto m\xednimo es requerido"}]}),Object(M.jsx)(R.a,{flex:.5,size:"large",name:"quantity_available",label:"Cantidad Disponible",validations:[{required:!0,message:"Este campo es requerido"}]}),Object(M.jsx)(R.a,{flex:.5,size:"large",name:"quantity_available_per_person",label:"Cantidad por persona",validations:[{required:!0,message:"Este campo es requerido"}]}),Object(M.jsx)(re,{flex:.5,size:"large",name:"condition_type",label:"Condici\xf3n",choices:te,validations:[{required:!0,message:"Condici\xf3n es requerida"}]}),Object(M.jsx)(re,{flex:.5,size:"large",name:"way_redeem",label:"Redenci\xf3n",choices:ie,validations:[{required:!0,message:"Redenci\xf3n es requerida"}]}),Object(M.jsx)(re,{flex:.5,size:"large",name:"status",label:"Estado",choices:X,validations:[{required:!0,message:"Estado es requerido"}]}),Object(M.jsx)(l.a.TextArea,{flex:1,name:"description",label:"Descripci\xf3n",autoSize:!0}),Object(M.jsx)(l.a.TextArea,{flex:1,name:"path",label:"Path",autoSize:!0})]})}),j&&Object(M.jsx)(H,{modalVisible:j,onCancel:()=>{x(!1),p()},selectedCampaign:h})]})};a.default=()=>Object(M.jsx)(i.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:Object(M.jsxs)(s.b,{defaultActiveKey:"1",children:[Object(M.jsx)(n.a.TabPane,{tab:"Campa\xf1as",children:Object(M.jsx)(L,{})},"1"),Object(M.jsx)(n.a.TabPane,{tab:"Campa\xf1as de AppartaPay",children:Object(M.jsx)(se,{})},"2")]})})},364:function(e,a,t){"use strict";t.d(a,"a",function(){return b}),t.d(a,"b",function(){return u});t(377);var i,n,r,s,c,o=t(379),d=(t(351),t(352)),l=t(61),m=t(53);m.default.div(i||(i=Object(l.a)(["\n  display: flex;\n  justify-content: start;\n  align-items: baseline;\n  flex-wrap: wrap;\n\n  width:100%!important;\n\n  background-color:var(--gray-dark-1)!important;\n  color:#fff!important;\n\n  & .ant-checkbox-wrapper{\n    margin:0px 10px;\n  }\n  & h2{\n    color: #fff!important;\n    text-transform: uppercase!important;\n    padding: 4px 10px!important;\n    font-size: 16px!important;\n    vertical-align: middle!important;\n    margin-bottom: 0px!important;\n  }\n"]))),m.default.div(n||(n=Object(l.a)(["\n\n    position:relative;\n   \n    display: flex;\n    justify-content: start;\n    align-items: center;\n\n    & .container{\n      width: 34px;\n      position:relative;\n    }\n    & .container:hover .ant-btn{\n      display:inline-block;\n    }\n    & .ant-btn,.ant-btn:hover{\n      position: absolute;\n      left: 0;\n      top: 0;\n      z-index: 999;\n      height: 34px!important;\n      display: none;\n      width: 34px!important;\n      background: #0010214f!important;\n      color: #FFF!important;\n      font-weight: bold;\n      display:none;\n    }\n"]))),m.default.div(r||(r=Object(l.a)(["\n    display:flex;\n    justify-content: space-between;\n"])));const b=Object(m.default)(d.a)(s||(s=Object(l.a)(["\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;\n  border-radius:1rem;\n  background: #fff ;\n  padding: 2rem;\n"]))),u=Object(m.default)(o.a)(c||(c=Object(l.a)(["\n    & .ant-tabs-nav{\n        background-color:white;\n        border-radius:1rem;\n        box-shadow: rgb(0 0 0 / 10%) 0px 4px 12px;\n        padding:0 1rem;\n    }\n"])))},480:function(e,a,t){"use strict";t.d(a,"a",function(){return s});t(218);var i=t(69),n=t(0),r=t(68);const s=()=>{const e=Object(r.b)("banks"),[a,t]=Object(n.useState)([]),[s,c]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{c(!0),e.find({query:{$limit:1e3,$sort:{name:1}}}).then(e=>{let{data:a}=e;t(a),c(!1)}).catch(e=>{i.b.error(e.message),c(!1)})},[]),[a,s]}},513:function(e,a,t){"use strict";t(357);var i=t(358),n=t(0),r=t(42),s=t.n(r),c=t(14);a.a=e=>{let{value:a,options:t,onChange:r,style:o}=e;const[d,l]=Object(n.useState)(!1);return Object(c.jsx)(i.a,{bordered:!1,style:o||{minWidth:"12rem"},value:a,onChange:async e=>{r&&(l(!0),await Promise.all([r(e)]),l(!1))},loading:d,disabled:d,children:s.a.map(t,(e,a)=>{let{id:t,name:n}=e;return Object(c.jsx)(i.a.Option,{value:t,children:n},a)})})}}}]);
//# sourceMappingURL=42.1f85b3da.chunk.js.map