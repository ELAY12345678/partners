{"version":3,"sources":["views/menu-banners/GroupProfileDetails/hooks/useEstablishmentBranches.js","views/menu-banners/GroupProfileDetails/hooks/useCategories.js","views/menu-banners/GroupProfileDetails/hooks/useMenuItems.js","views/menu-banners/GroupProfileDetails/index.jsx","views/menu-banners/GroupProfileDetails/hooks/useEstablishment.js"],"names":["useCategories","_ref","establishment_id","establishmentsCategoriesServices","getService","categoryOptions","setCategoryOptions","useState","loadingCategories","setLoadingCategories","useEffect","find","query","status","$limit","$select","then","_ref2","data","catch","err","_message","error","useMenuItems","menuItemsServices","menuItemsOptions","setMenuItemsOptions","loadingMenuItems","setLoadingMenuItems","apparta_menu_status","STATUS","id","name","LINK_TYPE","address","LINK_GENERATOR","menu","slug","establishment_branch_id","category","menu_item_id","concat","_","replace","trim","toLower","index","columns","_ref3","onRemove","onEdit","onWatch","title","dataIndex","key","sorter","render","value","_jsx","_Image","size","alt","height","width","src","S3_PATH_IMAGE_HANDLER","window","imageShark","url","preview","URL_S3","fallback","_jsxs","_Tag","color","children","record","_Fragment","_Button","type","onClick","icon","AiOutlineEdit","AsyncButton","AiOutlineDelete","confirmText","SelectField","_ref4","choices","valueField","rest","_objectWithoutProperties","_excluded","_Select","_objectSpread","showSearch","optionFilterProp","filterOption","input","option","props","toLowerCase","indexOf","map","Option","GroupProfileDetails","_ref5","location","navigate","useNavigate","form","_Form","useForm","selectedId","useWatch","menu_link_tree_group_id","menu_link_tree_group_name","state","menuGroupLinksService","updateSource","setUpdateSource","drawerVisible","setDrawerVisible","selectedLink","setSelectedLink","linkConditionsHasData","setLinkConditionsHasData","linkConditions","setLinkConditions","handleChangeLinkConditions","field","link_type","establishments","loadingEstablishment","debounceGetEstablishmentsDatas","useEstablishment","establishmentService","setEstablishments","setLoadingEstablishment","debounce","q","$client","skipJoins","JSON","stringify","maxWait","establishmentBranches","loadingEstablishmentBranches","establishmentBranchesService","setEstablishmentBranches","setLoadingEstablishmentBranches","$sort","message","useEstablishmentBranches","some","link","setFieldsValue","undefined","_Layout","Content","style","overflow","padding","_Breadcrumb","Item","defaultSelectedTab","cursor","_Divider","background","borderTop","marginTop","Grid","custom","source","filterDefaultValues","searchField","searchText","search","permitFetch","actions","async","_ref6","remove","success","mapValues","extra","RoundedButton","AiOutlinePlus","resetFields","_Drawer","placement","visible","onClose","SimpleForm","textAcceptButton","onSubmit","path_image","link_generator","_excluded2","patch","create","initialValues","_Input","initial","GalleryUploader","refresh","e","response","defaultImage","withCropper","setterVisibleCropper","reference","_id","path","FileUploader","flex","borderRadius","onFinish","file","handleUploadFinish","String","label","validations","required","_InputNumber","_ref7","TextArea","autoSize","disabled","_Collapse","ghost","Panel","header","_Space","direction","placeholder","allowClear","onChange","onSearch","loading","parse"],"mappings":"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","file":"static/js/69.b2e2d258.chunk.js","sourcesContent":["import { message } from 'antd';\nimport { useState, useEffect } from 'react';\nimport { getService } from '../../../../services';\n\nexport const useEstablishmentBranches = ({ establishment_id }) => {\n\n    const establishmentBranchesService = getService('establishments-branchs');\n    const [establishmentBranches, setEstablishmentBranches] = useState([]);\n    const [loadingEstablishmentBranches, setLoadingEstablishmentBranches] = useState(false);\n\n    useEffect(() => {\n        if (establishment_id) {\n            setLoadingEstablishmentBranches(true);\n            establishmentBranchesService.find({\n                query: {\n                    establishment_id,\n                    apparta_menu_status: 'active',\n                    $limit: 1000,\n                    $sort: {\n                        address: 1\n                    },\n                    $select: ['address', 'id']\n                }\n            }).then(({ data }) => {\n                setEstablishmentBranches(data);\n                setLoadingEstablishmentBranches(false);\n            }).catch((error) => {\n                message.error(error.message);\n                setLoadingEstablishmentBranches(false);\n            })\n        }\n        else\n            setEstablishmentBranches([]);\n    }, [establishment_id])\n\n    return [\n        establishmentBranches,\n        loadingEstablishmentBranches\n    ];\n}","import { message } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { getService } from \"../../../../services\";\n\nexport const useCategories = ({ establishment_id }) => {\n    const establishmentsCategoriesServices = getService('establishments-menu-items-categories');\n\n    const [categoryOptions, setCategoryOptions] = useState([]);\n    const [loadingCategories, setLoadingCategories] = useState(false);\n\n    const getCategoriesDatas = () => {\n        setLoadingCategories(true);\n        establishmentsCategoriesServices.find({\n            query: {\n                establishment_id,\n                status: 'active',\n                $limit: 10000,\n                $select: ['id', 'name', 'status']\n            }\n        })\n            .then(({ data }) => {\n                setCategoryOptions(data);\n                setLoadingCategories(false);\n            })\n            .catch((err) => {\n                message.error(err);\n                setLoadingCategories(false);\n            });\n    };\n\n    useEffect(() => {\n        if (establishment_id)\n            getCategoriesDatas();\n        else\n            setCategoryOptions([]);\n    }, [establishment_id]);\n\n    return [\n        categoryOptions,\n        loadingCategories,\n    ];\n}","import { message } from \"antd\";\nimport _ from \"lodash\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { getService } from \"../../../../services\";\n\nexport const useMenuItems = ({ establishment_id }) => {\n\n    const menuItemsServices = getService('establishment-menu-items');\n\n    const [menuItemsOptions, setMenuItemsOptions] = useState([]);\n    const [loadingMenuItems, setLoadingMenuItems] = useState(false);\n\n    const getMenuItemsDatas = () => {\n        setLoadingMenuItems(true);\n        menuItemsServices.find({\n            query: {\n                establishment_id,\n                apparta_menu_status: 'active',\n                $limit: 10000,\n            }\n        })\n            .then(({ data }) => {\n                setMenuItemsOptions(data);\n                setLoadingMenuItems(false);\n            })\n            .catch((err) => {\n                message.error(err);\n                setLoadingMenuItems(false);\n            });\n    };\n\n    useEffect(() => {\n        if (establishment_id)\n            getMenuItemsDatas();\n        else\n            setMenuItemsOptions([]);\n    }, [establishment_id])\n\n\n    return [\n        menuItemsOptions,\n        loadingMenuItems\n    ];\n}","import { useNavigate } from \"react-router-dom\";\nimport { Breadcrumb, Button, Collapse, Divider, Drawer, Form, Image, Input, InputNumber, Layout, message, Select, Space, Tag } from \"antd\";\nimport { useState } from \"react\";\nimport { AiOutlineDelete, AiOutlineEdit, AiOutlinePlus } from \"react-icons/ai\";\nimport AsyncButton from \"../../../components/asyncButton\";\nimport { Grid } from \"../../../components/com\";\nimport { FileUploader } from \"../../../components/com/form/\";\nimport { SimpleForm } from \"../../../components/com/form/\";\nimport GalleryUploader from \"../../../components/com/gallery/GalleryUploader\";\nimport { RoundedButton } from \"../../../components/com/grid/Styles\";\nimport { getService } from \"../../../services\";\nimport _ from \"lodash\";\nimport { useEstablishment, useEstablishmentBranches, useCategories, useMenuItems } from \"./hooks\";\nimport { useEffect } from \"react\";\nimport { S3_PATH_IMAGE_HANDLER, URL_S3 } from \"../../../constants\";\n\nconst STATUS = [\n    {\n        id: \"active\",\n        name: \"Activo\",\n    },\n    {\n        id: \"inactive\",\n        name: \"Inactivo\",\n    },\n];\n\nconst LINK_TYPE = [\n    {\n        id: 'menu',\n        address: 'Ir a menu'\n    },\n    {\n        id: 'index',\n        address: 'Ir a index'\n    },\n];\n\nconst LINK_GENERATOR = {\n    menu: ({ slug, establishment_branch_id, category, menu_item_id }) => {\n        if (menu_item_id)\n            return `/${slug}/${establishment_branch_id}/menu/?pId=${menu_item_id}`\n        else if (category)\n            return `/${slug}/${establishment_branch_id}/menu/?scrollTop=${_.replace(\n                _.trim(_.toLower(category)),\n                / /g,\n                '-'\n            )\n                }`\n        else if (establishment_branch_id)\n            return `/${slug}/${establishment_branch_id}/menu/`\n        else\n            return `/${slug}/`\n\n    },\n    index: ({ slug, establishment_branch_id }) => `/${slug}/${establishment_branch_id ? establishment_branch_id + '/' : ''}`,\n};\n\nconst columns = ({ onRemove, onEdit, onWatch }) => [\n    {\n        title: \"Id\",\n        dataIndex: \"id\",\n        key: \"id\",\n        sorter: true,\n    },\n    {\n        dataIndex: \"path_image\",\n        key: \"path_image\",\n        title: \"Foto\",\n        render: (value) =>\n            value && <Image\n                size=\"large\"\n                alt=\"Banner\"\n                height={35}\n                width={90}\n                src={`${S3_PATH_IMAGE_HANDLER}/${window.imageShark({\n                    url: value,\n                    width: 90,\n                    height: 35,\n                })}`\n                }\n                preview={{\n                    src: `${URL_S3}${value}`\n                }}\n                fallback=\"data:image/png;base64,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\"\n            />\n    },\n    {\n        title: \"Nombre\",\n        dataIndex: \"name\",\n        key: \"name\",\n        sorter: true,\n    },\n    {\n        title: \"Link\",\n        dataIndex: \"link\",\n        key: \"link\",\n    },\n    {\n        title: \"Prioridad\",\n        dataIndex: \"priority\",\n        key: \"priority\",\n        sorter: true,\n    },\n    {\n        title: \"Estado\",\n        dataIndex: \"status\",\n        key: \"status\",\n        sorter: true,\n        render: (value) => <Tag color={value === \"active\" ? \"success\" : \"error\"}> {value}</Tag>\n    },\n    {\n        title: \"Acciones\",\n        dataIndex: 'id',\n        render: (id, record) => {\n            return (\n                <>\n                    {/* <Button\n                        type=\"text\"\n                        onClick={() => navigate(\n                            '/dashboard/management/menu-banners/details',\n                            {\n                                state: {\n                                    menu_link_tree_group_id: id,\n                                    menu_link_tree_group_name: record?.name\n                                }\n                            })}\n                        icon={<AiOutlineEye />}\n                    /> */}\n                    <Button\n                        type=\"text\"\n                        onClick={() => onEdit(record)}\n                        icon={<AiOutlineEdit />}\n                    />\n                    <AsyncButton\n                        type=\"link\"\n                        onClick={() => onRemove({ id })}\n                        icon={<AiOutlineDelete />}\n                        confirmText=\"Desea eliminar?\"\n                    >\n                    </AsyncButton>\n                </>\n            );\n        },\n    }\n];\n\nconst SelectField = ({ choices, valueField, ...rest }) => {\n    return (\n        <Select\n            {...rest}\n            showSearch\n            optionFilterProp=\"children\"\n            filterOption={(input, option) =>\n                option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n            }\n        >\n            {\n                _.map(choices, (record, index) =>\n                    <Select.Option\n                        key={index}\n                        value={valueField ? record[valueField] : record.id}\n                    >\n                        {record.address || record.name}\n                    </Select.Option>\n                )\n            }\n        </Select>\n    );\n};\n\nconst GroupProfileDetails = ({ location }) => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n    const selectedId = Form.useWatch('id', form);\n\n    const { menu_link_tree_group_id, menu_link_tree_group_name } = location.state;\n\n    const menuGroupLinksService = getService(\"menu-linktree-groups-links\");\n\n    const [updateSource, setUpdateSource] = useState(false);\n    const [drawerVisible, setDrawerVisible] = useState(false);\n    const [selectedLink, setSelectedLink] = useState();\n\n    const [linkConditionsHasData, setLinkConditionsHasData] = useState(false);\n    const [linkConditions, setLinkConditions] = useState({});\n\n\n    const onRemove = async ({ id }) => {\n        await menuGroupLinksService.remove(id)\n            .then(() => {\n                message.success(\"Link eliminado!\");\n                setUpdateSource(!updateSource);\n            })\n            .catch((error) =>\n                message.error('No se pudo eliminar el Grupo! ' + error?.message)\n            )\n    };\n\n    const onEdit = (record) => {\n        setSelectedLink({\n            ..._.mapValues(record, (value) => { if (value !== null) { return value; } })\n        });\n        \n        setDrawerVisible(true);\n    };\n\n    const handleUploadFinish = (field, url, file, _id) => {\n        menuGroupLinksService.patch(_id, {\n            [field]: String(url),\n        })\n            .then((response) => {\n                setSelectedLink({\n                    ...response\n                });\n                form.setFieldsValue(\n                    {\n                        ..._.mapValues(response, (value) => { if (value !== null) { return value; } })\n                    }\n                );\n                setUpdateSource(!updateSource);\n            })\n            .catch((err) => message.error(err.message));\n    };\n\n    const handleSubmit = async (err, data) => {\n        if (err) return message.error(err);\n\n        delete data.path_image;\n        delete data.link_generator;\n\n        const { id, ...rest } = data;\n\n        if (selectedId) {\n            await menuGroupLinksService.patch(selectedId, { ...rest })\n                .then(() => {\n                    message.success(\"Link actualizada!\");\n                    setDrawerVisible(false);\n                    setSelectedLink();\n                    form.resetFields();\n                    setLinkConditions({});\n                    setUpdateSource(!updateSource);\n                })\n                .catch(err => message.error(err.message));\n        } else {\n            await menuGroupLinksService.create({ ...rest })\n                .then(() => {\n                    message.success(\"Link creada!\");\n                    setDrawerVisible(false);\n                    setSelectedLink();\n                    form.resetFields();\n                    setUpdateSource(!updateSource);\n                })\n                .catch(err => message.error(err.message));\n        }\n    };\n\n    const handleChangeLinkConditions = (field) => {\n        if (field?.establishment_id)\n            setLinkConditions({ link_type: linkConditions?.link_type, ...field });\n        else\n            setLinkConditions({ ...linkConditions, ...field });\n    };\n\n    const [establishments, loadingEstablishment, debounceGetEstablishmentsDatas] = useEstablishment();\n    const [establishmentBranches, loadingEstablishmentBranches] = useEstablishmentBranches({ establishment_id: linkConditions.establishment_id });\n    const [categoryOptions, loadingCategories] = useCategories({ establishment_id: linkConditions.establishment_id });\n    const [menuItemsOptions, loadingMenuItems] = useMenuItems({ establishment_id: linkConditions.establishment_id });\n\n\n    useEffect(() => {\n        if (_.some(linkConditions) && linkConditions?.slug && linkConditions?.link_type) {\n            const link = LINK_GENERATOR[linkConditions.link_type]({ ...linkConditions, slug: linkConditions.slug });\n            form.setFieldsValue({\n                link,\n            });\n            setLinkConditionsHasData(true);\n        }\n        else {\n            form.setFieldsValue({\n                link: undefined,\n            });\n            setLinkConditionsHasData(false);\n        }\n    }, [linkConditions, form]);\n\n    return (\n        <Layout.Content style={{ height: '100%', overflow: 'auto', padding: '2rem' }}>\n            <Breadcrumb>\n                <Breadcrumb.Item\n                    onClick={() => navigate('/dashboard/management/menu-banners',\n                        {\n                            state: {\n                                defaultSelectedTab: '3'\n                            }\n                        }\n                    )}\n                    style={{ cursor: 'pointer' }}\n                >\n                    Perfil de grupos\n                </Breadcrumb.Item>\n                <Breadcrumb.Item>{menu_link_tree_group_name || \"\"}</Breadcrumb.Item>\n            </Breadcrumb>\n            <Divider style={{ background: 'transparent', borderTop: 0, marginTop: 0 }} />\n            <Grid\n                custom={true}\n                source=\"menu-linktree-groups-links\"\n                filterDefaultValues={{\n                    menu_link_tree_group_id,\n                    $sort: {\n                        id: -1\n                    }\n                }}\n                searchField=\"name\"\n                searchText=\"Grupo...\"\n                search={true}\n                permitFetch={true}\n                actions={{}}\n                updateSource={updateSource}\n                columns={columns({ onRemove, onEdit })}\n                extra={\n                    <div>\n                        <RoundedButton\n                            type=\"primary\"\n                            icon={<AiOutlinePlus />}\n                            onClick={() => {\n                                setDrawerVisible(true);\n                                setSelectedLink(undefined);\n                                form.resetFields();\n                            }}\n                        >\n                            Agregar\n                        </RoundedButton>\n                    </div>\n                }\n            />\n            {\n                drawerVisible\n                &&\n                <Drawer\n                    width={520}\n                    title={`${selectedLink ? 'Editar' : 'Crear'} Link`}\n                    placement=\"right\"\n                    visible={drawerVisible}\n                    onClose={() => {\n                        setDrawerVisible(false);\n                        setSelectedLink();\n                        form.resetFields();\n                        setLinkConditions({});\n                    }}\n                >\n                    <SimpleForm\n                        form={form}\n                        textAcceptButton={'Guardar'}\n                        onSubmit={handleSubmit}\n                        initialValues={selectedLink}\n                    >\n                        <Input\n                            type='hidden'\n                            name='id'\n                        />\n                        {\n                            !selectedId &&\n                            <Input\n                                type=\"hidden\"\n                                name='menu_link_tree_group_id'\n                                initial={menu_link_tree_group_id}\n                            />\n                        }\n                        {\n                            selectedId && selectedLink?.path_image &&\n                            <GalleryUploader\n                                refresh={(e, response) => {\n                                    setSelectedLink({ ...response });\n                                    form.setFieldsValue(\n                                        {\n                                            ..._.mapValues(response, (value) => { if (value !== null) { return value; } })\n                                        }\n                                    );\n                                    setUpdateSource(!updateSource);\n                                }}\n                                size=\"large\"\n                                record={selectedLink}\n                                defaultImage={selectedLink?.path_image}\n                                source=\"path_image\"\n                                withCropper={true}\n                                setterVisibleCropper={() => { }}\n                                reference=\"menu-linktree-groups-links\"\n                                _id={selectedId}\n                                path={`group_link_path_image/${selectedId}`}\n                            />\n                        }\n                        {\n                            selectedId &&\n                            <FileUploader\n                                flex={1}\n                                preview={false}\n                                title='Imagen'\n                                path={`group_link_path_image/${selectedId}/`}\n                                name='path_image'\n                                source='path_image'\n                                style={{ borderRadius: '0.5rem' }}\n                                onFinish={(url, file) =>\n                                    handleUploadFinish(\"path_image\", url, file, selectedId)\n                                }\n                            />\n                        }\n                        <Input\n                            flex={1}\n                            name='name'\n                            label='Nombre'\n                            size=\"large\"\n                            validations={[\n                                {\n                                    required: true,\n                                    message: `Nombre es requerido`\n                                }\n                            ]}\n                        />\n                        <InputNumber\n                            flex={1}\n                            name='priority'\n                            label='Prioridad'\n                            size=\"large\"\n                        />\n                        <Select\n                            flex={1}\n                            name='status'\n                            label=\"Estado\"\n                            size='large'\n                            validations={[\n                                {\n                                    required: true,\n                                    message: 'Estado es requerido',\n                                },\n                            ]}\n                        >\n                            {\n                                _.map(STATUS, ({ id, name }, index) =>\n                                    <Select.Option\n                                        key={index}\n                                        value={id}\n                                    >\n                                        {name}\n                                    </Select.Option>\n                                )\n                            }\n                        </Select>\n                        <Input.TextArea\n                            flex={1}\n                            size='large'\n                            name='link'\n                            label='Link'\n                            autoSize\n                            disabled={linkConditionsHasData}\n                            validations={[\n                                {\n                                    required: true,\n                                    message: `Link es requerido`\n                                }\n                            ]}\n                        />\n                        <div flex={1} name='link_generator'>\n                            <Collapse ghost  >\n                                <Collapse.Panel header=\"Generar link\" key=\"1\" >\n                                    <Space direction='vertical' style={{ width: '100%' }} size='middle' >\n                                        <SelectField\n                                            placeholder='Tipo de link'\n                                            label=\"Tipo de link\"\n                                            name='link_type'\n                                            size='large'\n                                            allowClear\n                                            choices={LINK_TYPE}\n                                            onChange={(value) => handleChangeLinkConditions({ link_type: value })}\n                                        />\n                                        <SelectField\n                                            placeholder='Establecimiento'\n                                            name='establishment_id'\n                                            label=\"Establecimiento\"\n                                            size='large'\n                                            allowClear\n                                            onSearch={debounceGetEstablishmentsDatas}\n                                            loading={loadingEstablishment}\n                                            choices={establishments}\n                                            onChange={(value) => {\n                                                if (value) {\n                                                    const { id, slug } = JSON.parse(value)\n                                                    handleChangeLinkConditions({ establishment_id: id, slug });\n                                                }\n                                                else\n                                                    handleChangeLinkConditions({ establishment_id: undefined, slug: undefined });\n                                            }}\n                                        />\n                                        {\n                                            linkConditions?.establishment_id &&\n                                            <SelectField\n                                                placeholder='Sucursal'\n                                                name='establishment_branch_id'\n                                                label=\"Sucursal\"\n                                                size='large'\n                                                allowClear\n                                                loading={loadingEstablishmentBranches}\n                                                choices={establishmentBranches}\n                                                onChange={(value) => handleChangeLinkConditions({ establishment_branch_id: value })}\n                                            />\n                                        }\n                                        {\n                                            (linkConditions?.link_type === LINK_TYPE[0].id && linkConditions?.establishment_id) && (\n                                                <>\n                                                    <SelectField\n                                                        placeholder='Menu Categoria'\n                                                        name='category'\n                                                        label=\"Sucursal\"\n                                                        size='large'\n                                                        allowClear\n                                                        choices={categoryOptions}\n                                                        loading={loadingCategories}\n                                                        value={linkConditions?.category}\n                                                        onChange={(value) => handleChangeLinkConditions({ category: value, menu_item_id: undefined })}\n                                                        valueField={'name'}\n                                                    />\n                                                    <SelectField\n                                                        placeholder='Menu Item'\n                                                        name='menu_item_id'\n                                                        label=\"Sucursal\"\n                                                        size='large'\n                                                        allowClear\n                                                        loading={loadingMenuItems}\n                                                        choices={menuItemsOptions}\n                                                        value={linkConditions?.menu_item_id}\n                                                        onChange={(value) => handleChangeLinkConditions({ menu_item_id: value, category: undefined })}\n                                                    />\n                                                </>\n                                            )\n                                        }\n                                    </Space>\n                                </Collapse.Panel>\n                            </Collapse>\n                        </div>\n                    </SimpleForm>\n                </Drawer>\n            }\n        </Layout.Content>\n    );\n}\n\nexport default GroupProfileDetails;","import { message } from 'antd';\nimport _ from 'lodash';\nimport { debounce } from 'lodash';\nimport { useState } from 'react';\nimport { getService } from '../../../../services';\n\nexport const useEstablishment = () => {\n\n    const establishmentService = getService('establishments');\n    const [establishments, setEstablishments] = useState([]);\n    const [loadingEstablishment, setLoadingEstablishment] = useState(false);\n\n    const getEstablishment = (value) => {\n        if (value === '') {\n            setEstablishments([])\n            return;\n        }\n        setLoadingEstablishment(true);\n        establishmentService.find({\n            query: {\n                q: value,\n                $client: {\n                    skipJoins: true\n                },\n                $limit: 50,\n                $select: ['id', 'name', 'slug']\n            }\n        })\n            .then(({ data }) => {\n                setEstablishments(_.map(data, ({ id, name, slug }) => ({ id: JSON.stringify({ id, slug }), name })));\n                setLoadingEstablishment(false);\n            })\n            .catch((err) => {\n                message.error(err);\n                setLoadingEstablishment(false);\n            });\n    }\n    const debounceGetEstablishmentsDatas = debounce(getEstablishment, 500, { maxWait: 800 });\n\n\n    return [\n        establishments,\n        loadingEstablishment,\n        debounceGetEstablishmentsDatas\n    ];\n}"],"sourceRoot":""}