(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[38,57],{1050:function(e,t,a){"use strict";a.r(t);a(362);var n=a(363),i=a(2),r=(a(375),a(376)),s=(a(351),a(352)),o=(a(221),a(145)),l=(a(354),a(355)),d=(a(219),a(69)),c=(a(371),a(374)),m=a(0),p=a(144),b=a.n(p),h=a(385),u=a.n(h),j=a(380),x=a(356),g=a(391),f=a(62),O=a(401),v=a(42),y=a.n(v),_=a(359),z=a(68),w=a(14);const{RangePicker:k}=c.a,C="admin",q={acquired:"Adquirido",inactive:"Inactivo",claimed:"Reclamado",notClaimed:"No reclamado",expired:"Expirado",canceled:"Cancelado",pendingApproval:"Pendiente de aprobaci\xf3n",pendingClaimedVerification:"Pendiente de verificaci\xf3n de cup\xf3n",notApproved:"No aprobado",canceledByEstablishment:"Cancelado por el establecimiento",canceledByUser:"Cancelado por el usuario"},E=[{title:"Nombre",dataIndex:"meta_user_first_name",sorter:!0,render:(e,t)=>{let{meta_user_first_name:a,meta_user_last_name:n}=t;return"".concat(a," ").concat(n)}},{title:"Direcci\xf3n",dataIndex:"meta_establishment_branch_address",sorter:!0},{title:"Fecha",dataIndex:"meta_day",sorter:!0},{title:"Hora Inicio",dataIndex:"meta_start_hour",sorter:!0,render:(e,t)=>"".concat(b()(e,"HH:mm:ss").format("h:mm a")||"")},{title:"Personas",dataIndex:"persons",sorter:!0,width:"100px"},{title:"Descuento",dataIndex:"meta_percentage",sorter:!0,render:e=>"".concat(e,"%")},{title:"Valor factura",dataIndex:"reported_invoice_amount",sorter:!0,render:e=>"".concat(u()(e).format("$0,0"))},{title:"Estado",dataIndex:"status",sorter:!0,render:e=>"".concat(q[e])}];t.default=()=>{const[e,t]=Object(m.useState)(E),[a,c]=Object(m.useState)([]),[p,b]=Object(m.useState)([]),h=Object(f.d)(e=>{let{dashboardReducer:t}=e;return t.establishmentFilters}),u=Object(f.d)(e=>{var t;let{appReducer:a}=e;return null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.role});return Object(m.useEffect)(()=>{h.establishment_branch_id||c([])},[h]),Object(m.useEffect)(()=>{null!==h&&void 0!==h&&h.establishment_id&&(async()=>{const e=Object(z.b)("establishments");await e.find({query:{id:null===h||void 0===h?void 0:h.establishment_id,$client:{skipJoins:!0},$select:["show_booking_id"]}}).then(e=>{var a;const n=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a[0];"active"===(null===n||void 0===n?void 0:n.show_booking_id)?t([{title:"Id",dataIndex:"id",sorter:!0},...E]):t(E)}).catch(e=>{d.b.error(e.message)})})()},[null===h||void 0===h?void 0:h.establishment_id]),Object(w.jsxs)(n.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:[Object(w.jsxs)(s.a,{children:[Object(w.jsxs)(s.a,{align:"middle",style:{color:"var(--purple)"},gutter:[16,16],children:[Object(w.jsx)(l.a,{children:Object(w.jsx)(O.b,{size:30})}),Object(w.jsx)(l.a,{children:Object(w.jsx)(o.a.Title,{level:3,style:{margin:0},children:"Historial de reservas"})})]}),Object(w.jsx)(r.a,{style:{background:"transparent",borderTop:0,marginTop:0}})]}),Object(w.jsx)(s.a,{style:{height:"100%",marginBottom:"1rem"},gutter:16,children:Object(w.jsx)(l.a,{span:24,children:h.establishment_id?Object(w.jsx)(x.b,{searchField:"q",searchText:"Usuario...",search:!0,custom:!0,filterDefaultValues:Object(i.a)({$and:[{meta_day:{$lte:a[1]}},{meta_day:{$gte:a[0]}}],$sort:{meta_day:-1}},h),columns:u===C?[{title:"Id usuario",dataIndex:"user_id",sorter:!0},...e]:e,source:"reservations",permitFetch:!!h.establishment_id,title:Object(w.jsxs)(s.a,{gutter:16,align:"middle",children:[Object(w.jsx)(l.a,{children:Object(w.jsx)(k,{locale:j.a,onChange:e=>(e=>{try{c(y.a.map(e,e=>e.format("YYYY-MM-DD")))}catch(t){d.b.error(t.message)}})(e)})}),Object(w.jsx)(l.a,{children:Object(w.jsx)(_.a,{type:"primary",style:{borderRadius:"0.5rem"},onClick:async()=>{if(y.a.isEmpty(a))return void d.b.info("\xa1Selecciona un rango de fechas para exportar el documento!");const e=Object(z.b)("reservations-history");await e.find({query:{$client:{exportExcelReservationHistory:!0},establishment_id:h.establishment_id,establishment_branch_id:h.establishment_branch_id,end_date:a[1],start_date:a[0]}}).then(e=>window.open(e.path,"_blank")).catch(e=>d.b.error(e.message||"\xa1No se pudo exportar los registros!"))},children:"Exportar Historial"})})]}),actions:{}}):Object(w.jsx)(g.a,{children:"*Seleccione un restaurante para ver los registros*"})})})]})}},364:function(e,t,a){"use strict";a.d(t,"a",function(){return p}),a.d(t,"b",function(){return b});a(377);var n,i,r,s,o,l=a(379),d=(a(351),a(352)),c=a(61),m=a(53);m.default.div(n||(n=Object(c.a)(["\n  display: flex;\n  justify-content: start;\n  align-items: baseline;\n  flex-wrap: wrap;\n\n  width:100%!important;\n\n  background-color:var(--gray-dark-1)!important;\n  color:#fff!important;\n\n  & .ant-checkbox-wrapper{\n    margin:0px 10px;\n  }\n  & h2{\n    color: #fff!important;\n    text-transform: uppercase!important;\n    padding: 4px 10px!important;\n    font-size: 16px!important;\n    vertical-align: middle!important;\n    margin-bottom: 0px!important;\n  }\n"]))),m.default.div(i||(i=Object(c.a)(["\n\n    position:relative;\n   \n    display: flex;\n    justify-content: start;\n    align-items: center;\n\n    & .container{\n      width: 34px;\n      position:relative;\n    }\n    & .container:hover .ant-btn{\n      display:inline-block;\n    }\n    & .ant-btn,.ant-btn:hover{\n      position: absolute;\n      left: 0;\n      top: 0;\n      z-index: 999;\n      height: 34px!important;\n      display: none;\n      width: 34px!important;\n      background: #0010214f!important;\n      color: #FFF!important;\n      font-weight: bold;\n      display:none;\n    }\n"]))),m.default.div(r||(r=Object(c.a)(["\n    display:flex;\n    justify-content: space-between;\n"])));const p=Object(m.default)(d.a)(s||(s=Object(c.a)(["\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;\n  border-radius:1rem;\n  background: #fff ;\n  padding: 2rem;\n"]))),b=Object(m.default)(l.a)(o||(o=Object(c.a)(["\n    & .ant-tabs-nav{\n        background-color:white;\n        border-radius:1rem;\n        box-shadow: rgb(0 0 0 / 10%) 0px 4px 12px;\n        padding:0 1rem;\n    }\n"])))},381:function(e,t,a){"use strict";a(143);var n=a(142),i=(a(354),a(355)),r=(a(351),a(352)),s=(a(221),a(145)),o=a(2),l=a(0),d=a.n(l),c=a(26),m=a.n(c),p=a(424),b=(a(420),a(14));class h extends d.a.Component{constructor(){super(),this.onMinimizeClicked=this.onMinimizeClicked.bind(this),this.onMaximizeClicked=this.onMaximizeClicked.bind(this),this.state={size:-1}}onMinimizeClicked(){const e=this.getSize();this.animate(e,50,-50,(e,t)=>e<t,e=>new Promise(t=>{this.setState({size:e<50?50:e},()=>t())})),this.setState(Object(o.a)({},this.state))}onMaximizeClicked(){const e=this.getSize();this.animate(e,300,50,(e,t)=>e>t,e=>new Promise(t=>{this.setState({size:e},()=>t())}))}getSize(){const e=m.a.findDOMNode(this);switch(this.props.orientation){case"horizontal":return e.offsetHeight;case"vertical":return e.offsetWidth;default:return 0}}animate(e,t,a,n,i){const r=()=>{n(e,t)||i(e+=a).then(()=>{requestAnimationFrame(r)})};r()}render(){return Object(b.jsxs)(p.b,Object(o.a)(Object(o.a)({size:this.state.size},this.props),{},{children:[Object(b.jsx)(r.a,{style:{position:"fixed",zIndex:1,width:"100%"},children:Object(b.jsx)(i.a,{xs:24,sm:24,md:12,lg:9,xl:7,children:Object(b.jsxs)(r.a,{type:"flex",align:"middle",justify:"space-between",style:{height:50,width:"100%",fontSize:"1.2em",background:" #fafafa",borderBottom:"1px solid #d9d9d9",borderRight:"1px solid #d9d9d9",borderTop:"1px solid #d9d9d9",padding:"0px 10px"},children:[Object(b.jsx)(i.a,{flex:"auto",style:{overflow:"hidden"},children:Object(b.jsx)(r.a,{align:"middle",children:Object(b.jsx)(s.a.Title,{level:5,style:{margin:0},children:this.props.title})})}),Object(b.jsx)(i.a,{flex:"none",children:Object(b.jsxs)(r.a,{type:"flex",align:"middle",gutter:16,children:[Object(b.jsx)(i.a,{children:this.props.counter}),Object(b.jsxs)(i.a,{children:[Object(b.jsx)(n.a,{type:"text",shape:"circle",onClick:this.onMinimizeClicked,children:Object(b.jsx)(s.a.Title,{level:5,children:"-"})}),Object(b.jsx)(n.a,{type:"text",shape:"circle",onClick:this.onMaximizeClicked,children:Object(b.jsx)(s.a.Title,{level:5,children:"+"})})]})]})})]})})}),Object(b.jsx)("div",{style:{paddingTop:50},children:this.props.children})]}))}}t.a=h},382:function(e,t,a){"use strict";a.r(t),a.d(t,"codepush_environment_options",function(){return _}),a.d(t,"true_false",function(){return z});a(362);var n=a(363),i=(a(351),a(352)),r=(a(371),a(374)),s=(a(220),a(361)),o=(a(219),a(69)),l=a(12),d=(a(357),a(358)),c=a(0),m=a(360),p=a(380),b=(a(356),a(6)),h=a(346),u=a.n(h),j=a(68),x=a(14);const g=["source","id"],{Option:f}=d.a,O=[{id:"user",name:"Usuario"},{id:"admin",name:"Administrador"}],v=[{id:"active",name:"Activo"},{id:"disabled",name:"Desactivado"},{id:"pending validation",name:"Pendiente de validaci\xf3n"},{id:"pending_information",name:"Pendiente por informaci\xf3n"}],y=[{id:"male",name:"Masculino"},{id:"female",name:"Femenino"}],_=[{id:"production",name:"production"},{id:"staging",name:"staging"}],z=[{id:"false",name:"False"},{id:"true",name:"True"}];t.default=e=>{let{source:t,id:a}=e,h=Object(l.a)(e,g);const w=Object(b.q)(),[k,C]=Object(c.useState)();return Object(c.useEffect)(()=>{if(h.location){let{search:e}=h.location,t=u.a.parse(e.replace(/\?/,""));if(t){let{role:e}=t;C(e)}}},[h.location]),Object(x.jsx)(n.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:Object(x.jsx)(i.a,{style:{padding:"2rem",background:"white",borderRadius:"0.5rem"},children:Object(x.jsxs)(m.d,{id:a,source:t||"users",onSubmit:()=>{w("/dashboard/management/users")},textAcceptButton:a?"ACTUALIZAR":"CREAR",children:[a&&Object(x.jsx)(m.b,{flex:1,path:"users/".concat(a,"/avatar/"),name:"avatar_gallery",source:"avatar_gallery",onFinish:(e,t)=>((e,t,a,n)=>{const i=Object(j.b)("users"),r=Object(j.b)("gallery");let s={meta_file_name:a.name,meta_size:String(a.size),name:a.name,meta_media_type:a.type,path:t,description:""};r.create(s).then(t=>{let{id:a}=t;"create"!==n&&i.patch(n,{[e]:a}).then(e=>{}).catch(e=>o.b.error(e.message))}).catch(e=>o.b.error(e.message))})("avatar_gallery_id",e,t,a)}),Object(x.jsx)(s.a,{size:"large",flex:.5,placeholder:"Nombre",label:"Nombre",name:"first_name",validations:[{required:!0,message:"El nombre es requerido"}]}),Object(x.jsx)(s.a,{size:"large",flex:.5,placeholder:"Apellido",label:"Apellido",name:"last_name",validations:[{required:!0,message:"El apellido es requerido"}]}),Object(x.jsx)(s.a,{size:"large",flex:.5,placeholder:"Email",label:"Correo",type:"email",name:"email",validations:[{required:!0,message:"El email es requerido"}]}),Object(x.jsx)(s.a.Password,{size:"large",flex:.5,type:"password",placeholder:"\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf\u25cf",label:"Contrase\xf1a",name:"password",validations:[!a&&{required:!0,message:"La contrase\xf1a es requerida"}]}),Object(x.jsx)(d.a,{size:"large",name:"gender",label:"Genero",placeholder:"Seleccionar",children:y.map(e=>Object(x.jsx)(f,{children:e.name},e.id))}),!a&&Object(x.jsx)(r.a,{xtype:"date",size:"large",label:"Fecha de nacimiento",name:"birthday",format:"MM/DD/YYYY",locale:p.a}),Object(x.jsx)(s.a,{xtype:"phone",input:!0,size:"large",flex:.1,placeholder:"Ej: 57",label:"C\xf3digo del Pa\xeds",name:"phone_country_code",validations:[{required:!0,message:"El c\xf3digo del pa\xeds es requerido"}]}),Object(x.jsx)(s.a,{xtype:"phone",input:!0,size:"large",flex:.2,placeholder:"Celular",label:"Celular",type:"tel",name:"phone",validations:[{required:!0,message:"El tel\xe9fono celular es requerido"}]}),"(",Object(x.jsx)(d.a,{size:"large",label:"Elige un rol para el usuario",name:"role",placeholder:"Elige un rol para el usuario",validations:[{required:!0,message:"El estado es requerido"}],children:O.map(e=>Object(x.jsx)(f,{children:e.name},e.id))}),Object(x.jsx)(d.a,{size:"large",name:"status",label:"Estado",placeholder:"Seleccionar",validations:[{required:!0,message:"El estado es requerido"}],children:v.map(e=>Object(x.jsx)(f,{children:e.name},e.id))}),Object(x.jsx)(d.a,{size:"large",name:"account_manager",label:"Account manager",placeholder:"Seleccionar",children:z.map(e=>Object(x.jsx)(f,{children:e.name},e.id))}),Object(x.jsx)(d.a,{size:"large",name:"test_user",label:"Test User",placeholder:"Seleccionar",children:z.map(e=>Object(x.jsx)(f,{children:e.name},e.id))}),Object(x.jsx)(d.a,{size:"large",name:"codepush_enviorment",label:"Code Push Environment",placeholder:"Seleccionar",children:_.map(e=>Object(x.jsx)(f,{children:e.name},e.id))}),Object(x.jsx)(s.a.TextArea,{flex:1,name:"disabled_reason",label:"Disabled Reason",size:"large",autoSize:!0})]})})})}},391:function(e,t,a){"use strict";a.d(t,"a",function(){return l.a});a(382),a(2),a(12),a(0),a(389);var n,i=a(390),r=a(61),s=a(53);Object(s.default)(i.a)(n||(n=Object(r.a)(["\n    ","\n"])),e=>{let{transparent:t}=e;if(t)return"\n                & .ant-modal-content, .ant-modal-header {\n                    background-color: transparent!important;\n                    box-shadow: none!important;\n                }\n                & .ant-modal-header {\n                    border-bottom: 0px!important;\n                }\n                & .ant-modal-body {\n                    height: 85vh!important;\n                    padding-top: 50px!important;\n                }\n                & .ant-modal-footer {\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    color: #FFF!important;\n                    border-top: 0px!important;\n                }\n                & .ant-list-item-meta-title{\n                    color: rgb(255 255 255);\n                    text-align:left;\n                }\n                & .ant-btn-link, .ant-btn-link:hover, .ant-btn-link:focus{\n                    color: rgb(255 255 255)!important;\n                }\n                & .ant-list-item-meta-description {\n                    color: rgb(255 255 255 / 90%);\n                }\n                & .ant-modal-close-x {\n                    font-size: 24px;\n                    color: #bbb;\n                }\n            "});a(14);var o;s.default.div(o||(o=Object(r.a)(["\n    display: flex;\n    justify-content: start;\n    align-items: baseline;\n    flex-wrap: wrap;\n    /* background-color:var(--gray-dark-1)!important; */\n    color: var(--gray-dark-1)!important;\n    & .ant-checkbox-wrapper{\n        margin:0px 10px;\n    }\n    & h2{\n        color: var(--antd-wave-shadow-color);\n        padding: 4px 10px!important;\n        font-size: 18px!important;\n        font-weight: bold;\n        vertical-align: middle!important;\n        margin-bottom: 0px!important;\n    }\n"])));a(381);var l=a(364)}}]);
//# sourceMappingURL=38.6f14a148.chunk.js.map