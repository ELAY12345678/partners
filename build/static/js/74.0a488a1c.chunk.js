(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[74],{1055:function(e,t,a){"use strict";a.r(t),a.d(t,"WrapperStatusField",function(){return k});a(362);var r=a(363),c=(a(417),a(425)),n=a(2),s=(a(372),a(373)),i=a(12),o=(a(143),a(142)),d=a(61),l=a(0),u=a(6),j=a(53),b=a(62),p=a(21),f=a(356),O=a(346),m=a.n(O),h=a(439),x=a(353),g=a(54),v=a(14);const _=["source","choices","optionText","optionValue"],y=["columns","filters"],E=["updated","onUpdate"];var I,w;const S=Object(j.default)(o.a)(I||(I=Object(d.a)(["\n  border-radius: 20px !important;\n"]))),k=j.default.div(w||(w=Object(d.a)(["\n  &.status-field.inactive span {\n    color: red;\n  }\n"]))),F=[{id:"admin",name:"Administrador"},{id:"user",name:"Usuario"}],A=[{id:"active",name:"Activo"},{id:"disabled",name:"Desactivado"},{id:"pending validation",name:"Pendiente de validaci\xf3n"},{id:"pending_information",name:"Pendiente por informaci\xf3n"}],N=[{id:"male",name:"Masculino"},{id:"female",name:"Femenino"},{id:"not_defined",name:"No definido"}],U=e=>{let{source:t,choices:a,optionText:r="name",optionValue:c="id"}=e,n=Object(i.a)(e,_);const[s,o]=Object(l.useState)(),[d,u]=Object(l.useState)();return Object(l.useEffect)(()=>{n.record&&o(n.record)},[n.record]),Object(l.useEffect)(()=>{if(s){let e=a.find(e=>e[c]===s[t]);e&&u(e[r])}},[a,r,c,s,t]),s?Object(v.jsx)(k,{className:"status-field ".concat(s&&s[t]),children:Object(v.jsx)("span",{children:d})}):Object(v.jsx)("span",{})},C=[{title:"C\xf3digo Pa\xeds",dataIndex:"phone_country_code",sorter:!0},{title:"Tel\xe9fono",dataIndex:"phone",sorter:!0},{title:"Email",dataIndex:"email",sorter:!0},{title:"Disabled Reason",dataIndex:"disabled_reason",sorter:!0},{title:"Estado",sorter:!0,dataIndex:"status",render:e=>"active"===e?Object(v.jsx)(s.a,{color:"green",children:"Active"}):Object(v.jsx)(s.a,{color:"disabled"===e?"red":"orange",children:e})}],D=e=>{let{columns:t,filters:a}=e,r=Object(i.a)(e,y);const c=Object(u.q)(),s=e=>{c("/dashboard/management/users/".concat(e||"create"))};return r.loading?null:Object(v.jsx)(f.b,Object(n.a)({custom:!0,filterDefaultValues:{$skip:50},permitFetch:!0,create:!1,searchField:"q",searchText:"Usuario...",search:!0,searchById:!0,columns:t,filters:a,extra:Object(v.jsx)("div",{children:Object(v.jsx)(S,{icon:Object(v.jsx)(x.u,{}),type:"primary",onClick:()=>s(),children:"Agregar"})}),actions:{edit:!1,create:!1,extra:Object(v.jsx)("div",{children:Object(v.jsx)(o.a,{icon:Object(v.jsx)(x.l,{}),type:"link",onClick:e=>s(e.id)})})},source:"users"},r))};t.default=Object(b.b)(e=>({updated:e.updated}),e=>({onUpdate:t=>{e({type:p.p,updated:t})}}))(e=>{let{updated:t,onUpdate:a}=e,s=Object(i.a)(e,E);const o=Object(b.c)(),[d,u]=Object(l.useState)(),[j,f]=Object(l.useState)(),[O,x]=Object(l.useState)(),[_,y]=Object(l.useState)(s.loading),[I,w]=Object(l.useState)();return Object(l.useEffect)(()=>{let e;if(s.location){let{search:t}=s.location;e=m.a.parse(t.replace(/\?/,"")),e&&I!=e.role&&(y(!0),w(e.role))}},[s.location]),Object(l.useEffect)(()=>{O&&(u(O.brand_id),f(O.restaurant_id))},[O]),Object(l.useEffect)(()=>{I&&(y(!1),o({type:p.e,defaultFilters:{restaurant_id:"user"===I,brand_id:"user"===I}}))},[I]),Object(l.useEffect)(()=>{if(s.location){let e=m.a.parse(s.location.search.replace(/\?/,""));if(e){for(let t in e)"undefined"!==typeof e[t]&&""!==e[t]&&null!==e[t]||delete e[t];x(e)}}},[s.location]),Object(l.useEffect)(()=>{if(O){let{brand_id:e,restaurant_id:t}=O;u(e),f(t)}},[O]),Object(v.jsx)(r.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:Object(v.jsx)(D,Object(n.a)(Object(n.a)({},s),{},{columns:[{title:"ID",dataIndex:"id",sorter:!0},{title:"Foto",dataIndex:"avatar_path",sorter:!1,render:e=>Object(v.jsx)(c.a,{size:"large",alt:"Avatar",src:"".concat(g.f,"/").concat(window.imageShark({url:e||g.b,width:64,height:64}))})},{title:"Nombre",dataIndex:"first_name",sorter:!0,render:(e,t)=>{let{last_name:a}=t;return"".concat(e||""," ").concat(a||"")}},{title:"Genero",dataIndex:"gender",sorter:!0,render:(e,t)=>Object(v.jsx)(U,{initial:e,className:"status-field ".concat(t&&t[e]),record:t,source:"gender",choices:N})},{title:"Role",dataIndex:"role",sorter:!0,render:(e,t)=>Object(v.jsx)(U,{initial:e,className:"status-field ".concat(t&&t[e]),record:t,source:"role",choices:F})},...C],loading:_,filters:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(h.a,{alwaysOn:!0,source:"status",name:"status",label:"Estado",placeholder:"Estado",allowEmpty:!0,choices:A,size:"medium"}),Object(v.jsx)(h.a,{alwaysOn:!0,source:"role",name:"role",label:"Role",placeholder:"Role",allowEmpty:!0,choices:F,size:"medium"})]})}))})})}}]);
//# sourceMappingURL=74.0a488a1c.chunk.js.map