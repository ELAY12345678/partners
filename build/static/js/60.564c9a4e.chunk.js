(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[60],{1058:function(e,a,t){"use strict";t.r(a);t(362);var i=t(363),r=(t(366),t(367)),n=(t(357),t(358)),s=(t(371),t(374)),d=(t(368),t(369)),o=(t(220),t(361)),c=(t(219),t(69)),l=t(2),u=t(12),p=(t(351),t(352)),m=(t(143),t(142)),x=(t(372),t(373)),b=t(42),j=t.n(b),y=t(385),O=t.n(y),h=t(0),v=t(353),_=t(359),g=t(356),f=t(360),q=t(370),k=t(68),C=t(380),I=t(144),M=t.n(I),Y=t(14);const E=["type"],w=[{id:"active",name:"Active"},{id:"inactive",name:"Inactive"}],D=[{id:null,name:"Ninguno"},{id:"pay_benefit",name:"Pay Benefit"}],z=e=>{let{onEdit:a,onRemove:t}=e;return[{dataIndex:"id",key:"id",title:"Id",sorter:!0},{dataIndex:"name",key:"name",title:"Nombre",sorter:!0},{dataIndex:"nanoid",key:"nanoid",title:"C\xf3digo"},{dataIndex:"amount",key:"amount",title:"Monto",sorter:!0,render:e=>"$ ".concat(O()(e||"").format("0,0"))},{dataIndex:"max_quantity_uses",key:"max_quantity_uses",title:"Maxima cantidad de usos",sorter:!0},{dataIndex:"max_quantity_uses_per_user",key:"max_quantity_uses_per_user",title:"Maxima cantidad de usos por persona",sorter:!0},{dataIndex:"expire_date",key:"expire_date",title:"Fecha y hora de expiraci\xf3n",sorter:!0,render:e=>e?M()(e).format("YYYY-MM-DD h:mm a"):""},{dataIndex:"type",key:"type",title:"Tipo"},{dataIndex:"status",key:"status",title:"Estado",sorter:!0,render:e=>"active"===e?Object(Y.jsx)(x.a,{color:"green",children:"Active"}):Object(Y.jsx)(x.a,{color:"red",children:"Inactive"})},{title:"Acciones",dataIndex:"id",render:(e,i)=>Object(Y.jsxs)(p.a,{children:[Object(Y.jsx)(m.a,{type:"text",onClick:()=>a(i),icon:Object(Y.jsx)(v.l,{})}),Object(Y.jsx)(_.a,{type:"link",onClick:()=>t({id:e}),icon:Object(Y.jsx)(v.h,{}),confirmText:"Desea eliminar?"})]})}]};a.default=()=>{const e=Object(k.b)("pay-cupons-code"),[a,t]=Object(h.useState)(!1),[p,m]=Object(h.useState)(),[x,b]=Object(h.useState)(!1),[y,O]=Object(h.useState)();return Object(Y.jsxs)(i.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:[Object(Y.jsx)(g.b,{source:"pay-cupons-code",filterDefaultValues:{$sort:{id:-1}},updateSource:x,columns:z({onEdit:e=>{const{type:a}=e,i=Object(u.a)(e,E);O({type:a}),m(Object(l.a)(Object(l.a)({},i),{},{expire_date:null!==e&&void 0!==e&&e.expire_date?M()(e.expire_date):void 0})),t(!0)},onRemove:async a=>{let{id:t}=a;await e.remove(t).then(()=>{c.b.success("Cup\xf3n eliminado!"),b(!x)}).catch(e=>c.b.error("No se pudo eliminar el Cup\xf3n! "+(null===e||void 0===e?void 0:e.message)))}}),actions:{},extra:Object(Y.jsx)("div",{children:Object(Y.jsx)(q.a,{type:"primary",icon:Object(Y.jsx)(v.u,{}),onClick:()=>t(!0),children:"Agregar"})})}),a&&Object(Y.jsx)(r.a,{title:"".concat(p?"Editar":"Crear"," Cup\xf3n"),placement:"right",visible:a,onClose:()=>{t(!1),m()},children:Object(Y.jsxs)(f.d,{textAcceptButton:"Guardar",initialValues:p,onSubmit:async(a,i,r)=>{if(a)return c.b.error(a);i.expire_date=null!==i&&void 0!==i&&i.expire_date?M()(i.expire_date).utc().format("YYYY-MM-DD hh:mm:00"):void 0,p&&p.id?await e.patch(p.id,i).then(()=>{c.b.success("Cup\xf3n actualizado!"),m(),O(),t(!1),b(!x)}).catch(e=>c.b.error(e.message)):await e.create(i).then(()=>{c.b.success("Cup\xf3n Creado!"),t(!1),b(!x)}).catch(e=>c.b.error(e.message))},allowNull:!0,children:[Object(Y.jsx)(o.a,{flex:1,name:"name",label:"Nombre",validations:[{required:!0,message:"Nombre es requerido"}]}),Object(Y.jsx)(d.a,{flex:.4,size:"large",name:"amount",label:"Monto",validations:[{required:!0,message:"Monto es requerido"}],formatter:e=>"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,"")}),Object(Y.jsx)(s.a,{flex:.6,locale:C.a,showTime:!0,name:"expire_date",label:"Fecha y hora expiraci\xf3n",format:"YYYY-MM-DD h:mm a"}),Object(Y.jsx)(o.a,{flex:1,name:"nanoid",label:"C\xf3digo",validations:[{required:!0,message:"C\xf3digo es requerido"}]}),Object(Y.jsx)(d.a,{flex:.5,size:"large",name:"max_quantity_uses",label:"Maxima cantidad de usos",validations:[{required:!0,message:"Este campo es requerido"}]}),Object(Y.jsx)(d.a,{flex:.5,size:"large",name:"max_quantity_uses_per_user",label:"Maxima cantidad de usos por persona",validations:[{required:!0,message:"Este camp es requerido"}]}),Object(Y.jsx)(n.a,{flex:1,name:"type",label:"Tipo de codigo",size:"large",initial:null===y||void 0===y?void 0:y.type,onSelect:e=>O(Object(l.a)(Object(l.a)({},y),{},{type:e})),children:j.a.map(D,(e,a)=>{let{id:t,name:i}=e;return Object(Y.jsx)(n.a.Option,{value:t,children:i},a)})}),"pay_benefit"===(null===y||void 0===y?void 0:y.type)&&Object(Y.jsx)(d.a,{flex:1,size:"large",name:"pay_benefit_id",label:"Id beneficio",validations:[{required:"pay_benefit"===(null===y||void 0===y?void 0:y.type),message:"Este camp es requerido"}]}),Object(Y.jsx)(n.a,{flex:1,name:"status",label:"Estado",size:"large",validations:[{required:!0,message:"Estado es requerido"}],children:j.a.map(w,(e,a)=>{let{id:t,name:i}=e;return Object(Y.jsx)(n.a.Option,{value:t,children:i},a)})})]})})]})}}}]);
//# sourceMappingURL=60.564c9a4e.chunk.js.map