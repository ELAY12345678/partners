{"version":3,"sources":["views/categories/index.jsx","hooks/useCities.js"],"names":["HIDDEN","id","name","STATUS","columns","_ref","onEdit","onRemove","cities","dataIndex","key","title","sorter","render","value","_jsx","_Image","width","height","alt","src","concat","S3_PATH_IMAGE_HANDLER","window","imageShark","url","preview","URL_S3","style","borderRadius","fallback","_$find","_","find","_ref2","_Tag","color","children","record","_jsxs","_Fragment","_Button","type","onClick","icon","AiOutlineEdit","AsyncButton","AiOutlineDelete","confirmText","Categories","categoriesService","getService","drawerVisible","setDrawerVisible","useState","selectedCategory","setSelectedCategory","updateSource","setUpdateSource","loadingCities","useCities","_Layout","Content","overflow","padding","Grid","source","filterDefaultValues","$sort","parent_id","async","_ref3","remove","then","_message","success","catch","error","message","actions","extra","RoundedButton","AiOutlinePlus","_Drawer","placement","visible","onClose","cover_path","GalleryUploader","refresh","e","response","_objectSpread","size","defaultImage","withCropper","setterVisibleCropper","reference","_id","path","FileUploader","flex","onFinish","file","field","patch","String","err","handleUploadFinish","SimpleForm","textAcceptButton","initialValues","onSubmit","data","form","create","allowNull","_Input","label","validations","required","_InputNumber","_Select","map","_ref4","index","Option","allowClear","_ref5","_ref6","_ref7","citiesService","setCities","setLoadingCities","useEffect","query","$limit"],"mappings":"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","file":"static/js/49.a01ea048.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport _ from 'lodash';\nimport { Layout, message, Button, Tag, Image, Drawer, Select, Input, InputNumber } from 'antd';\nimport { Grid } from '../../components/com';\nimport { getService } from '../../services';\nimport { RoundedButton } from '../../components/com/grid/Styles';\nimport { AiOutlineDelete, AiOutlineEdit, AiOutlinePlus } from 'react-icons/ai';\nimport AsyncButton from '../../components/asyncButton';\nimport { S3_PATH_IMAGE_HANDLER, URL_S3 } from '../../constants';\nimport { FileUploader, SimpleForm } from '../../components/com/form/';\nimport GalleryUploader from '../../components/com/gallery/GalleryUploader';\nimport { useCities } from '../../hooks/useCities';\n\nconst HIDDEN = [\n    {\n        id: \"true\",\n        name: \"true\",\n    },\n    {\n        id: \"false\",\n        name: \"false\",\n    },\n];\n\nconst STATUS = [\n    {\n        id: \"active\",\n        name: \"Active\",\n    },\n    {\n        id: \"inactive\",\n        name: \"Inactive\",\n    },\n];\n\nconst columns = ({ onEdit, onRemove, cities }) => [\n    {\n        dataIndex: \"id\",\n        key: \"id\",\n        title: \"Id\",\n        sorter: true,\n    },\n    {\n        dataIndex: \"cover_path\",\n        key: \"cover_path\",\n        title: \"Foto\",\n        render: (value) =>\n            value && <Image\n                width={50}\n                height={50}\n                alt=\"cover_path\"\n                src={`${S3_PATH_IMAGE_HANDLER}/${window.imageShark({\n                    url: value,\n                    width: 64,\n                    height: 64,\n                })}`\n                }\n                preview={{\n                    src: `${URL_S3}${value}`\n                }}\n                style={{\n                    borderRadius: '50%',\n                }}\n                fallback=\"data:image/png;base64,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\"\n            />\n    },\n    {\n        dataIndex: \"name\",\n        key: \"name\",\n        title: \"Nombre\",\n        sorter: true,\n    },\n    {\n        dataIndex: \"position\",\n        key: \"position\",\n        title: \"Posición\",\n        sorter: true,\n    },\n    {\n        dataIndex: \"campaign_id\",\n        key: \"campaign_id\",\n        title: \"Id campaña\",\n        sorter: true,\n    },\n    {\n        dataIndex: \"city_id\",\n        key: \"city_id\",\n        title: \"Ciudad\",\n        sorter: true,\n        render: (value) => _.find(cities, ({id})=> id === value)?.name\n    },\n    {\n        dataIndex: \"hide\",\n        key: \"hide\",\n        title: \"¿Oculta?\",\n        sorter: true,\n        render: (value) => value === 'true' ? <Tag color=\"green\">True</Tag> : <Tag color=\"red\">False</Tag>\n    },\n    {\n        dataIndex: \"apparta_web_status\",\n        key: \"apparta_web_status\",\n        title: \"Web status\",\n        sorter: true,\n        render: (value) => value === 'active' ? <Tag color=\"green\">Active</Tag> : <Tag color=\"red\">Inactive</Tag>\n    },\n    {\n        dataIndex: \"status_app\",\n        key: \"status_app\",\n        title: \"App status\",\n        sorter: true,\n        render: (value) => value === 'active' ? <Tag color=\"green\">True</Tag> : <Tag color=\"red\">Inactive</Tag>\n    },\n    {\n        title: \"Acciones\",\n        dataIndex: 'id',\n        key: 'actions',\n        render: (id, record) =>\n            <>\n                <Button\n                    type=\"text\"\n                    onClick={() => onEdit(record)}\n                    icon={<AiOutlineEdit />}\n                />\n                <AsyncButton\n                    type=\"link\"\n                    onClick={() => onRemove({ id })}\n                    icon={<AiOutlineDelete />}\n                    confirmText=\"Desea eliminar?\"\n                >\n                </AsyncButton>\n            </>\n    }\n];\n\nconst Categories = () => {\n\n    const categoriesService = getService('categories');\n\n    const [drawerVisible, setDrawerVisible] = useState(false);\n    const [selectedCategory, setSelectedCategory] = useState();\n    const [updateSource, setUpdateSource] = useState(false);\n    const [cities, loadingCities] = useCities();\n\n\n    const onEdit = (record) => {\n        setSelectedCategory(record);\n        setDrawerVisible(true);\n    };\n\n    const onRemove = async ({ id }) => {\n        await categoriesService.remove(id)\n            .then(() => {\n                message.success(\"Categoria eliminada!\");\n                setUpdateSource(!updateSource);\n            })\n            .catch((error) =>\n                message.error('No se pudo eliminar la Categoria! ' + error?.message)\n            )\n    };\n\n    const handleSubmit = async (err, data, form) => {\n        if (err) return message.error(err);\n\n        if (selectedCategory && selectedCategory.id) {\n            await categoriesService.patch(selectedCategory.id, data)\n                .then(() => {\n                    message.success(\"Categoria actualizada!\");\n                    setSelectedCategory();\n                    setDrawerVisible(false);\n                    setUpdateSource(!updateSource);\n                })\n                .catch(err => message.error(err.message));\n        } else {\n            await categoriesService.create(data)\n                .then(() => {\n                    message.success(\"Categoria creada correctamente!\");\n                    setDrawerVisible(false);\n                    setUpdateSource(!updateSource);\n                })\n                .catch(err => message.error(err.message));\n        }\n    };\n\n    const handleUploadFinish = async (field, url, file, _id) => {\n        categoriesService.patch(_id, {\n            [field]: String(url),\n        })\n            .then((response) => {\n                setSelectedCategory({\n                    ...response\n                });\n                setUpdateSource(!updateSource);\n            })\n            .catch((err) => message.error(err.message));\n    };\n\n    return (\n        <Layout.Content style={{ height: '100%', overflow: 'auto', padding: '2rem' }}>\n            <Grid\n                source='categories'\n                filterDefaultValues={{\n                    $sort: {\n                        id: 1\n                    },\n                    parent_id: 1,\n                }}\n                updateSource={updateSource}\n                columns={columns({ onEdit, onRemove, cities })}\n                actions={{}}\n                extra={\n                    <div>\n                        <RoundedButton\n                            type=\"primary\"\n                            icon={<AiOutlinePlus />}\n                            onClick={() => setDrawerVisible(true)}\n                        >\n                            Agregar\n                        </RoundedButton>\n                    </div>\n                }\n            />\n            {\n                drawerVisible\n                &&\n                <Drawer\n                    title={`${selectedCategory ? 'Editar' : 'Crear'} Categoria`}\n                    placement=\"right\"\n                    visible={drawerVisible}\n                    onClose={() => {\n                        setDrawerVisible(false);\n                        setSelectedCategory();\n                    }}\n                >\n                    {\n                        selectedCategory?.id && selectedCategory?.cover_path &&\n                        <GalleryUploader\n                            refresh={(e, response) => {\n                                setSelectedCategory({ ...response });\n                                setUpdateSource(!updateSource);\n                            }}\n                            size=\"large\"\n                            record={selectedCategory}\n                            defaultImage={selectedCategory.cover_path}\n                            source=\"cover_path\"\n                            withCropper={true}\n                            setterVisibleCropper={() => { }}\n                            reference=\"categories\"\n                            _id={selectedCategory.id}\n                            path={`categories_cover_path/${+selectedCategory.id}/`}\n                        />\n                    }\n                    {\n                        selectedCategory?.id &&\n                        <FileUploader\n                            flex={1}\n                            preview={false}\n                            path={`categories_cover_path/${selectedCategory.id}/`}\n                            name='cover_path'\n                            source='cover_path'\n                            style={{ borderRadius: '0.5rem' }}\n                            onFinish={(url, file) =>\n                                handleUploadFinish(\"cover_path\", url, file, selectedCategory.id)\n                            }\n                        />\n                    }\n                    <SimpleForm\n                        textAcceptButton={`${selectedCategory ? 'Actualizar' : 'Crear'}`}\n                        initialValues={selectedCategory}\n                        onSubmit={handleSubmit}\n                        allowNull={true}\n                    >\n\n                        <Input\n                            flex={1}\n                            size='large'\n                            name='name'\n                            label='Nombre'\n                            validations={[\n                                {\n                                    required: true,\n                                    message: `Nombre es requerido`\n                                }\n                            ]}\n                        />\n                        <InputNumber\n                            flex={0.5}\n                            name='position'\n                            label='Posicion'\n                            size='large'\n                            validations={[{ required: true, message: 'Posicion es requerida' }]}\n                        />\n                        <Select\n                            flex={0.5}\n                            name='hide'\n                            label=\"Oculta\"\n                            size='large'\n                            validations={[{ required: true, message: 'Estado es requerido' }]}\n                        >\n                            {\n                                _.map(HIDDEN, ({ id, name }, index) =>\n                                    <Select.Option\n                                        key={index}\n                                        value={id}\n                                    >\n                                        {name}\n                                    </Select.Option>\n                                )\n                            }\n                        </Select>\n                        <InputNumber\n                            flex={0.5}\n                            name='campaign_id'\n                            label='Id campaña'\n                            size='large'\n                        />\n                         <Select\n                            flex={0.5}\n                            name='city_id'\n                            label=\"Ciudad\"\n                            size='large'\n                            allowClear\n                        >\n                            {\n                                _.map(cities, ({ id, name }, index) =>\n                                    <Select.Option\n                                        key={index}\n                                        value={id}\n                                    >\n                                        {name}\n                                    </Select.Option>\n                                )\n                            }\n                        </Select>\n                        <Select\n                            flex={0.5}\n                            name='status_app'\n                            label=\"App status\"\n                            size='large'\n                        >\n                            {\n                                _.map(STATUS, ({ id, name }, index) =>\n                                    <Select.Option\n                                        key={index}\n                                        value={id}\n                                    >\n                                        {name}\n                                    </Select.Option>\n                                )\n                            }\n                        </Select>\n                        <Select\n                            flex={0.5}\n                            name='apparta_web_status'\n                            label=\"Web status\"\n                            size='large'\n                        >\n                            {\n                                _.map(STATUS, ({ id, name }, index) =>\n                                    <Select.Option\n                                        key={index}\n                                        value={id}\n                                    >\n                                        {name}\n                                    </Select.Option>\n                                )\n                            }\n                        </Select>\n                    </SimpleForm>\n                </Drawer>\n            }\n        </Layout.Content>\n    );\n}\n\nexport default Categories;","import { useEffect, useState } from 'react';\nimport { message } from 'antd';\nimport { getService } from '../services';\n\nexport const useCities = () => {\n    const citiesService = getService(\"cities\");\n\n    const [cities, setCities] = useState([]);\n    const [loadingCities, setLoadingCities] = useState(false);\n\n    useEffect(() => {\n        setLoadingCities(true);\n        citiesService\n            .find({\n                query: {\n                    $limit: 100000,\n                    $sort: {\n                        name: 1,\n                    },\n                }\n            })\n            .then(({ data }) => {\n                setCities(data);\n                setLoadingCities(false);\n            })\n            .catch((err) => {\n                message.error(err.message);\n                setCities([]);\n                setLoadingCities(false);\n            });\n    }, []);\n\n\n    return [\n        cities,\n        loadingCities\n    ];\n}"],"sourceRoot":""}