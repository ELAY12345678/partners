(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[50],{1062:function(e,t,a){"use strict";a.r(t);a(362);var s=a(363),i=(a(366),a(367)),r=(a(357),a(358)),n=(a(219),a(361)),c=(a(218),a(69)),o=(a(143),a(142)),l=(a(372),a(373)),d=(a(417),a(425)),b=a(0),u=a(54),j=a(356),h=a(383),m=a(439),x=a(353),O=a(360),p=a(42),g=a.n(p),_=a(370),y=a(120),v=a(359),f=a(68),k=a(14);const q=[{id:"active",name:"Active"},{id:"inactive",name:"Inactive"}],w=e=>{let{onRemove:t}=e;return[{title:"Id",dataIndex:"id",key:"id",sorter:!0},{title:"Foto",dataIndex:"logo_path",key:"logo_path",render:e=>Object(k.jsx)(d.a,{size:"large",alt:"Avatar",src:"".concat(u.f,"/").concat(window.imageShark({url:e,width:64,height:64}))})},{title:"Nombre",dataIndex:"name",key:"name",sorter:!0},{title:"Puntuaci\xf3n",dataIndex:"total_rating_score",key:"total_rating_score",sorter:!0,render:e=>parseFloat(e).toFixed(1)},{title:"Rating",dataIndex:"total_rating_quantity",key:"total_rating_quantity",sorter:!0},{title:"Estado",dataIndex:"status",key:"status",sorter:!0,render:e=>"active"===e?Object(k.jsx)(l.a,{color:"green",children:"Active"}):Object(k.jsx)(l.a,{color:"inactive"===e?"red":"orange",children:e})},{title:"Acciones",dataIndex:"id",key:"_id",render:e=>Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(y.b,{to:"/dashboard/management/establishments/".concat(e),children:Object(k.jsx)(o.a,{type:"text",shape:"circle",icon:Object(k.jsx)(x.m,{})})}),Object(k.jsx)(v.a,{type:"link",onClick:()=>t({id:e}),icon:Object(k.jsx)(x.h,{}),confirmText:"Desea eliminar?"})]})}]};t.default=()=>{const[e,t]=Object(h.a)(),[a,o]=Object(b.useState)(!1),[l,d]=Object(b.useState)(!1);return Object(k.jsxs)(s.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:[Object(k.jsx)(j.b,{source:"establishments",searchField:"q",searchText:"Restaurante...",search:!0,updateSource:l,filterDefaultValues:{$sort:{id:1},$select:["id","name","logo_path","total_rating_score","total_rating_quantity","status"],$client:{skipJoins:!0}},columns:w({onRemove:async e=>{let{id:t}=e;const a=Object(f.b)("establishments");await a.remove(t).then(()=>{c.b.success("Restaurante eliminado!"),d(!l)}).catch(e=>c.b.error(e.message))}}),permitFetch:!0,actions:{},filters:Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(m.a,{alwaysOn:!0,loading:t,source:"q_establishmnet_branch_city_id",name:"q_establishmnet_branch_city_id",label:"q_establishmnet_branch_city_id",placeholder:"Ciudad",allowEmpty:!0,choices:e,size:"medium",style:{width:"15em"}})}),extra:Object(k.jsx)("div",{children:Object(k.jsx)(_.a,{type:"primary",icon:Object(k.jsx)(x.u,{}),onClick:()=>o(!0),children:"Agregar"})})}),a&&Object(k.jsx)(i.a,{title:"Crear Restaurante",placement:"right",visible:a,onClose:()=>{o(!1)},children:Object(k.jsxs)(O.d,{source:"establishments",textAcceptButton:"Crear",onSubmit:()=>{o(!1),d(!l)},children:[Object(k.jsx)(n.a,{flex:1,name:"name",label:"Nombre",validations:[{required:!0,message:"Nombre es requerido"}]}),Object(k.jsx)(r.a,{flex:1,name:"status",label:"Estado",size:"large",validations:[{required:!0,message:"Estado es requerido"}],children:g.a.map(q,(e,t)=>{let{id:a,name:s}=e;return Object(k.jsx)(r.a.Option,{value:a,children:s},t)})})]})})]})}},383:function(e,t,a){"use strict";a.d(t,"a",function(){return n});a(218);var s=a(69),i=a(0),r=a(68);const n=()=>{const e=Object(r.b)("cities"),[t,a]=Object(i.useState)([]),[n,c]=Object(i.useState)(!1);return Object(i.useEffect)(()=>{c(!0),e.find({query:{$limit:1e5,$sort:{name:1}}}).then(e=>{let{data:t}=e;a(t),c(!1)}).catch(e=>{s.b.error(e.message),a([]),c(!1)})},[]),[t,n]}}}]);
//# sourceMappingURL=50.61e35049.chunk.js.map