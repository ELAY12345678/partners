(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[47],{1134:function(e,a,t){"use strict";t.r(a);t(362);var r=t(363),s=(t(377),t(379)),n=t(0),i=t(364),o=(t(366),t(367)),d=(t(357),t(358)),l=(t(436),t(438)),c=(t(368),t(369)),u=(t(219),t(361)),b=t(12),m=t(2),x=(t(218),t(69)),j=(t(386),t(387)),p=(t(143),t(142)),h=(t(372),t(373)),v=(t(371),t(374)),_=t(380),O=t(356),f=t(42),g=t.n(f),y=t(144),k=t.n(y),w=t(360),q=t(353),z=t(370),I=t(439),C=t(68),F=t(14);const E=["id"],{RangePicker:R}=v.a,S=[{id:"approved",name:"Aprobada",color:"green"},{id:"canceled_by_user",name:"Cancelada por el usuario",color:"red"},{id:"in_progress",name:"En progreso",color:"blue"},{id:"rejected",name:"Rechazada",color:"red"},{id:"requested",name:"Solicitada",color:"purple"}],A=e=>{let{onEdit:a}=e;return[{key:"id",dataIndex:"id",title:"Id",sorter:!0,width:"70px"},{key:"user_id",dataIndex:"user_id",title:"User Id",sorter:!0,width:"90px"},{key:"meta_user_first_name",dataIndex:"meta_user_first_name",title:"Usuario",sorter:!0,width:"150px",render:(e,a)=>e+" "+a.meta_user_last_name},{key:"meta_user_phone",dataIndex:"meta_user_phone",title:"Tel\xe9fono",sorter:!0,width:"100px"},{key:"meta_user_email",dataIndex:"meta_user_email",title:"Correo",sorter:!0,width:"150px"},{key:"restaurant_name",dataIndex:"restaurant_name",title:"Restaurante",sorter:!0,width:"150px"},{key:"restaurant_address",dataIndex:"restaurant_address",title:"Direcci\xf3n y ciudad",sorter:!0,width:"200px"},{key:"reservation_date",dataIndex:"reservation_date",title:"Fecha",sorter:!0,render:e=>k()(e).utc().format("DD-MM-YYYY"),width:"100px"},{key:"reservation_start_hour",dataIndex:"reservation_start_hour",title:"Hora",sorter:!0,width:"100px",render:e=>k()(e,"HH:mm:ss").format("h:mm a")},{key:"reservation_persons",dataIndex:"reservation_persons",title:"Personas",width:"90px",sorter:!0},{key:"special_occasion",dataIndex:"special_occasion",title:"Ocasi\xf3n",width:"150px"},{key:"status",dataIndex:"status",title:"Estado",sorter:!0,width:"180px",render:e=>{const a=g.a.find(S,a=>{let{id:t}=a;return t===e})||e;return Object(F.jsx)(h.a,{color:(null===a||void 0===a?void 0:a.color)||"default",children:(null===a||void 0===a?void 0:a.name)||a})}},{title:"Acciones",dataIndex:"id",key:"actions",width:"100px",render:(e,t)=>Object(F.jsx)(p.a,{type:"text",onClick:()=>a(t),icon:Object(F.jsx)(q.l,{})})}]};var D=()=>{const[e]=j.a.useForm(),a=j.a.useWatch("status",e),t=j.a.useWatch("id",e),[r,s]=Object(n.useState)(!1),[i,p]=Object(n.useState)(!1),[h,f]=Object(n.useState)([]),[y,D]=Object(n.useState)();return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(O.b,{source:"reservation-on-demand",updateSource:i,searchField:"q",searchText:"Usuario, direcci\xf3n... ",search:!0,searchById:!0,filters:Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(I.a,{alwaysOn:!0,source:"status",name:"status",label:"Estado",placeholder:"Estado",allowEmpty:!0,choices:S,size:"medium",style:{width:"15rem"}})}),columns:A({onEdit:e=>{D(Object(m.a)(Object(m.a)({},e),{},{reservation_start_hour:e.reservation_start_hour&&k()(e.reservation_start_hour,"HH:mm:ss"),reservation_date:e.reservation_date&&k()(e.reservation_date).utc()})),s(!0)}}),filterDefaultValues:{$sort:{id:-1},$and:[{reservation_date:{$lte:h[1]}},{reservation_date:{$gte:h[0]}}]},extra:Object(F.jsx)("div",{children:Object(F.jsx)(z.a,{type:"primary",icon:Object(F.jsx)(q.u,{}),onClick:()=>{s(!0),D(),e.resetFields()},children:"Agregar"})}),actions:{},title:Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(R,{locale:_.a,onChange:e=>(e=>{try{f(g.a.map(e,e=>e.format("YYYY-MM-DD")))}catch(a){x.b.error(a.message)}})(e)})})}),r&&Object(F.jsx)(o.a,{size:"large",title:"".concat(t?"Editar":"Crear"," Reserva"),placement:"right",visible:r,onClose:()=>{D(),e.resetFields(),s(!1)},children:Object(F.jsxs)(w.d,{form:e,textAcceptButton:"".concat(t?"Actualizar":"Crear"),onSubmit:async(r,n)=>{if(r)return x.b.error(r);n.reservation_start_hour&&(n.reservation_start_hour=k()(n.reservation_start_hour).format("HH:mm:ss")),n.reservation_date&&(n.reservation_date=k()(n.reservation_date).format()),n.status||(n.status=a.status);const o=Object(C.b)("reservation-on-demand");if(t){const{status:a,reservation_date:r,reservation_start_hour:d}=n;await o.patch(t,{status:a,reservation_date:r,reservation_start_hour:d}).then(()=>{x.b.success("Reserva actualizada!"),D(),e.resetFields(),s(!1),p(!i)}).catch(e=>x.b.error(e.message))}else{const{id:a}=n,t=Object(b.a)(n,E);await o.create(Object(m.a)({},t)).then(()=>{x.b.success("Reserva creada correctamente!"),D(),e.resetFields(),s(!1),p(!i)}).catch(e=>x.b.error(e.message))}},initialValues:y,children:[Object(F.jsx)(u.a,{type:"hidden",name:"id"}),Object(F.jsx)(c.a,{flex:.5,size:"large",label:"User Id",name:"user_id",validations:[{required:!0,message:"User Id es requerido"}],disabled:!!t}),Object(F.jsx)(c.a,{flex:.5,size:"large",label:"Tel\xe9fono",name:"meta_user_phone",validations:[{required:!0,message:"Tel\xe9fono es requerido"}],disabled:!!t}),Object(F.jsx)(u.a,{flex:1,size:"large",label:"Correo",name:"meta_user_email",validations:[{required:!0,message:"Correo es requerido"}],disabled:!!t}),Object(F.jsx)(u.a,{flex:1,size:"large",label:"Restaurante",name:"restaurant_name",validations:[{required:!0,message:"Restaurante es requerido"}],disabled:!!t}),Object(F.jsx)(u.a,{flex:1,size:"large",label:"Direcci\xf3n",name:"restaurant_address",validations:[{required:!0,message:"Direcci\xf3n es requerida"}],disabled:!!t}),Object(F.jsx)(u.a,{flex:.5,size:"large",label:"Ciudad",name:"restaurant_city_name",validations:[{required:!0,message:"Ciudad es requerida"}],disabled:!!t}),Object(F.jsx)(c.a,{flex:.5,size:"large",label:"Tel\xe9fono",name:"meta_user_phone",validations:[{required:!0,message:"Tel\xe9fono es requerido"}],disabled:!!t}),Object(F.jsx)(c.a,{flex:.5,size:"large",label:"Personas",name:"reservation_persons",validations:[{required:!0,message:"Personas es requerida"}],disabled:!!t}),Object(F.jsx)(u.a,{flex:.5,label:"Ocasi\xf3n",size:"large",name:"special_occasion",disabled:!!t}),Object(F.jsx)(v.a,{flex:.5,size:"large",label:"Fecha",name:"reservation_date",format:"DD-MM-YYYY",locale:_.a,validations:[{required:!0,message:"Fecha es requerida"}]}),Object(F.jsx)(l.a,{flex:.5,size:"large",label:"Hora",name:"reservation_start_hour",format:"h:mm a",validations:[{required:!0,message:"Hora es requerida"}]}),Object(F.jsx)(d.a,{flex:1,name:"status",label:"Estado",size:"large",validations:[{required:!0,message:"Estado es requerido"}],children:g.a.map(S,(e,a)=>{let{id:t,name:r}=e;return Object(F.jsx)(d.a.Option,{value:t,children:r},a)})}),a===S[3].id&&Object(F.jsx)(u.a.TextArea,{flex:1,name:"rejected_reason",label:"Raz\xf3n de rechazo",autoSize:!0,validations:[{required:!0,message:"Raz\xf3n es requerida"}]})]})})]})},Y=t(359);const T=e=>{let{onEdit:a,onRemove:t}=e;return[{key:"id",dataIndex:"id",title:"Id",sorter:!0},{key:"name",dataIndex:"name",title:"Nombre",sorter:!0},{title:"Acciones",dataIndex:"id",key:"actions",render:(e,r)=>Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(p.a,{type:"text",onClick:()=>a(r),icon:Object(F.jsx)(q.l,{})}),Object(F.jsx)(Y.a,{type:"link",onClick:()=>t({id:e}),icon:Object(F.jsx)(q.h,{}),confirmText:"Desea eliminar?"})]})}]};var H=()=>{const[e,a]=Object(n.useState)(!1),[t,r]=Object(n.useState)(!1),[s,i]=Object(n.useState)(!1);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(O.b,{source:"reservation-on-demand-block-list-establishments",updateSource:s,columns:T({onEdit:e=>{r(Object(m.a)({},e)),a(!0)},onRemove:async e=>{let{id:a}=e;const t=Object(C.b)("reservation-on-demand-block-list-establishments");await t.remove(a).then(()=>{x.b.success("Establecimiento eliminado de la lista!"),i(!s)}).catch(e=>x.b.error("No se pudo eliminar el establecimiento! "+(null===e||void 0===e?void 0:e.message)))}}),filterDefaultValues:{$sort:{id:-1}},extra:Object(F.jsx)("div",{children:Object(F.jsx)(z.a,{type:"primary",icon:Object(F.jsx)(q.u,{}),onClick:()=>a(!0),children:"Agregar"})}),actions:{}}),e&&Object(F.jsx)(o.a,{title:"".concat(t?"Editar":"Crear"," Reserva"),placement:"right",visible:e,onClose:()=>{a(!1),r()},children:Object(F.jsx)(w.d,{source:"reservation-on-demand-block-list-establishments",textAcceptButton:"".concat(t?"Actualizar":"Crear"),initialValues:t,id:null===t||void 0===t?void 0:t.id,onSubmit:()=>{a(!1),r(),i(!s)},children:Object(F.jsx)(u.a,{flex:1,label:"Nombre establecimiento",size:"large",name:"name",validations:[{required:!0,message:"Nombre es requerido"}]})})})]})};a.default=()=>Object(F.jsx)(r.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:Object(F.jsxs)(i.b,{defaultActiveKey:"1",children:[Object(F.jsx)(s.a.TabPane,{tab:"Apparta donde quieras",children:Object(F.jsx)(D,{})},"1"),Object(F.jsx)(s.a.TabPane,{tab:"Establecimientos bloqueados",children:Object(F.jsx)(H,{})},"2")]})})},364:function(e,a,t){"use strict";t.d(a,"a",function(){return b}),t.d(a,"b",function(){return m});t(377);var r,s,n,i,o,d=t(379),l=(t(351),t(352)),c=t(61),u=t(53);u.default.div(r||(r=Object(c.a)(["\n  display: flex;\n  justify-content: start;\n  align-items: baseline;\n  flex-wrap: wrap;\n\n  width:100%!important;\n\n  background-color:var(--gray-dark-1)!important;\n  color:#fff!important;\n\n  & .ant-checkbox-wrapper{\n    margin:0px 10px;\n  }\n  & h2{\n    color: #fff!important;\n    text-transform: uppercase!important;\n    padding: 4px 10px!important;\n    font-size: 16px!important;\n    vertical-align: middle!important;\n    margin-bottom: 0px!important;\n  }\n"]))),u.default.div(s||(s=Object(c.a)(["\n\n    position:relative;\n   \n    display: flex;\n    justify-content: start;\n    align-items: center;\n\n    & .container{\n      width: 34px;\n      position:relative;\n    }\n    & .container:hover .ant-btn{\n      display:inline-block;\n    }\n    & .ant-btn,.ant-btn:hover{\n      position: absolute;\n      left: 0;\n      top: 0;\n      z-index: 999;\n      height: 34px!important;\n      display: none;\n      width: 34px!important;\n      background: #0010214f!important;\n      color: #FFF!important;\n      font-weight: bold;\n      display:none;\n    }\n"]))),u.default.div(n||(n=Object(c.a)(["\n    display:flex;\n    justify-content: space-between;\n"])));const b=Object(u.default)(l.a)(i||(i=Object(c.a)(["\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;\n  border-radius:1rem;\n  background: #fff ;\n  padding: 2rem;\n"]))),m=Object(u.default)(d.a)(o||(o=Object(c.a)(["\n    & .ant-tabs-nav{\n        background-color:white;\n        border-radius:1rem;\n        box-shadow: rgb(0 0 0 / 10%) 0px 4px 12px;\n        padding:0 1rem;\n    }\n"])))}}]);
//# sourceMappingURL=47.c7a188e6.chunk.js.map