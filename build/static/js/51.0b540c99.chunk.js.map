{"version":3,"sources":["views/places/index.jsx","hooks/useCities.js"],"names":["STATUS","id","name","columns","_ref","onEdit","onRemove","cities","dataIndex","key","title","sorter","render","value","_jsx","_Image","width","height","alt","src","concat","S3_PATH_IMAGE_HANDLER","window","imageShark","url","preview","URL_S3","style","borderRadius","fallback","_$find","_","find","_ref2","_Tag","color","children","record","_jsxs","_Fragment","_Button","type","onClick","icon","AiOutlineEdit","AsyncButton","AiOutlineDelete","confirmText","Places","placesService","getService","drawerVisible","setDrawerVisible","useState","selectedPlace","setSelectedPlace","updateSource","setUpdateSource","useCities","_Layout","Content","overflow","padding","Grid","source","filterDefaultValues","$sort","async","_ref3","remove","then","_message","success","catch","error","message","actions","extra","RoundedButton","AiOutlinePlus","_Drawer","placement","visible","onClose","cover_path","GalleryUploader","refresh","e","response","_objectSpread","size","defaultImage","withCropper","setterVisibleCropper","reference","_id","path","FileUploader","flex","onFinish","file","field","patch","String","err","handleUploadFinish","SimpleForm","textAcceptButton","initialValues","onSubmit","data","form","create","_Input","label","validations","required","_Select","map","_ref4","index","Option","_InputNumber","_ref5","citiesService","setCities","loadingCities","setLoadingCities","useEffect","query","$limit"],"mappings":"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","file":"static/js/51.0b540c99.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport _ from 'lodash';\nimport { Layout, message, Button, Tag, Image, Drawer, Select, Input, InputNumber } from 'antd';\nimport { Grid } from '../../components/com';\nimport { useCities } from '../../hooks/useCities';\nimport { getService } from '../../services';\nimport { RoundedButton } from '../../components/com/grid/Styles';\nimport { AiOutlineDelete, AiOutlineEdit, AiOutlinePlus } from 'react-icons/ai';\nimport AsyncButton from '../../components/asyncButton';\nimport { S3_PATH_IMAGE_HANDLER, URL_S3 } from '../../constants';\nimport { FileUploader, SimpleForm } from '../../components/com/form/';\nimport GalleryUploader from '../../components/com/gallery/GalleryUploader';\n\nconst STATUS = [\n    {\n        id: \"active\",\n        name: \"Active\",\n    },\n    {\n        id: \"inactive\",\n        name: \"Inactive\",\n    },\n];\n\nconst columns = ({ onEdit, onRemove, cities }) => [\n    {\n        dataIndex: \"id\",\n        key: \"id\",\n        title: \"Id\",\n        sorter: true,\n    },\n    {\n        dataIndex: \"cover_path\",\n        key: \"cover_path\",\n        title: \"Foto\",\n        render: (value) =>\n            value && <Image\n                width={50}\n                height={50}\n                alt=\"cover_path\"\n                src={`${S3_PATH_IMAGE_HANDLER}/${window.imageShark({\n                    url: value,\n                    width: 64,\n                    height: 64,\n                })}`\n                }\n                preview={{\n                    src: `${URL_S3}${value}`\n                }}\n                style={{\n                    borderRadius: '50%',\n                }}\n                fallback=\"data:image/png;base64,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\"\n            />\n    },\n    {\n        dataIndex: \"name\",\n        key: \"name\",\n        title: \"Nombre\",\n        sorter: true,\n    },\n    {\n        dataIndex: \"city_id\",\n        key: \"city_id\",\n        title: \"Ciudad\",\n        render: (value) => _.find(cities, ({ id }) => value === id)?.name || ''\n    },\n    {\n        dataIndex: \"position\",\n        key: \"position\",\n        title: \"Posición\",\n        sorter: true,\n    },\n    {\n        dataIndex: \"status\",\n        key: \"status\",\n        title: \"Estado\",\n        sorter: true,\n        render: (value) => value === 'active' ? <Tag color=\"green\">Active</Tag> : <Tag color=\"red\">Inactive</Tag>\n    },\n    {\n        title: \"Acciones\",\n        dataIndex: 'id',\n        key: 'actions',\n        render: (id, record) =>\n            <>\n                <Button\n                    type=\"text\"\n                    onClick={() => onEdit(record)}\n                    icon={<AiOutlineEdit />}\n                />\n                <AsyncButton\n                    type=\"link\"\n                    onClick={() => onRemove({ id })}\n                    icon={<AiOutlineDelete />}\n                    confirmText=\"Desea eliminar?\"\n                >\n                </AsyncButton>\n            </>\n    }\n];\n\nconst Places = () => {\n\n    const placesService = getService('places');\n\n    const [drawerVisible, setDrawerVisible] = useState(false);\n    const [selectedPlace, setSelectedPlace] = useState();\n    const [updateSource, setUpdateSource] = useState(false);\n\n    const [cities] = useCities();\n\n    const onEdit = (record) => {\n        setSelectedPlace(record);\n        setDrawerVisible(true);\n    };\n\n    const onRemove = async ({ id }) => {\n        await placesService.remove(id)\n            .then(() => {\n                message.success(\"Zona eliminada!\");\n                setUpdateSource(!updateSource);\n            })\n            .catch((error) =>\n                message.error('No se pudo eliminar el lugar! ' + error?.message)\n            )\n    };\n\n    const handleSubmit = async (err, data, form) => {\n        if (err) return message.error(err);\n\n        if (selectedPlace && selectedPlace.id) {\n            await placesService.patch(selectedPlace.id, data)\n                .then(() => {\n                    message.success(\"Lugar actualizado!\");\n                    setSelectedPlace();\n                    setDrawerVisible(false);\n                    setUpdateSource(!updateSource);\n                })\n                .catch(err => message.error(err.message));\n        } else {\n            await placesService.create(data)\n                .then(() => {\n                    message.success(\"Lugar creado correctamente!\");\n                    setDrawerVisible(false);\n                    setUpdateSource(!updateSource);\n                })\n                .catch(err => message.error(err.message));\n        }\n    };\n\n    const handleUploadFinish = async (field, url, file, _id) => {\n        placesService.patch(_id, {\n            [field]: String(url),\n        })\n            .then((response) => {\n                setSelectedPlace({\n                    ...response\n                });\n                setUpdateSource(!updateSource);\n            })\n            .catch((err) => message.error(err.message));\n    };\n\n    return (\n        <Layout.Content style={{ height: '100%', overflow: 'auto', padding: '2rem' }}>\n            <Grid\n                source='places'\n                filterDefaultValues={{\n                    $sort: {\n                        id: 1\n                    }\n                }}\n                updateSource={updateSource}\n                columns={columns({ onEdit, onRemove, cities })}\n                actions={{}}\n                extra={\n                    <div>\n                        <RoundedButton\n                            type=\"primary\"\n                            icon={<AiOutlinePlus />}\n                            onClick={() => setDrawerVisible(true)}\n                        >\n                            Agregar\n                        </RoundedButton>\n                    </div>\n                }\n            />\n            {\n                drawerVisible\n                &&\n                <Drawer\n                    title={`${selectedPlace ? 'Editar' : 'Crear'} Lugar`}\n                    placement=\"right\"\n                    visible={drawerVisible}\n                    onClose={() => {\n                        setDrawerVisible(false);\n                        setSelectedPlace();\n                    }}\n                >\n                    {\n                        selectedPlace?.id && selectedPlace?.cover_path &&\n                        <GalleryUploader\n                            refresh={(e, response) => {\n                                setSelectedPlace({ ...response });\n                                setUpdateSource(!updateSource);\n                            }}\n                            size=\"large\"\n                            record={selectedPlace}\n                            defaultImage={selectedPlace.cover_path}\n                            source=\"cover_path\"\n                            withCropper={true}\n                            setterVisibleCropper={() => { }}\n                            reference=\"places\"\n                            _id={selectedPlace.id}\n                            path={`places_cover_path/${+selectedPlace.id}/`}\n                        />\n                    }\n                    {\n                        selectedPlace?.id &&\n                        <FileUploader\n                            flex={1}\n                            preview={false}\n                            path={`places_cover_path/${selectedPlace.id}/`}\n                            name='cover_path'\n                            source='cover_path'\n                            style={{ borderRadius: '0.5rem' }}\n                            onFinish={(url, file) =>\n                                handleUploadFinish(\"cover_path\", url, file, selectedPlace.id)\n                            }\n                        />\n                    }\n                    <SimpleForm\n                        textAcceptButton={`${selectedPlace ? 'Actualizar' : 'Crear'}`}\n                        initialValues={selectedPlace}\n                        onSubmit={handleSubmit}\n                    // source=\"banners\"\n                    // id={selectedBanner.id}\n                    >\n\n                        <Input\n                            flex={1}\n                            size='large'\n                            name='name'\n                            label='Nombre'\n                            validations={[\n                                {\n                                    required: true,\n                                    message: `Nombre es requerido`\n                                }\n                            ]}\n                        />\n                        <Select\n                            flex={1}\n                            size='large'\n                            name='city_id'\n                            label=\"Ciudad\"\n                            validations={[{ required: true, message: 'Ciudad es requerida' }]}\n                        >\n                            {\n                                _.map(cities, ({ id, name }, index) =>\n                                    <Select.Option\n                                        key={index}\n                                        value={id}\n                                    >\n                                        {name}\n                                    </Select.Option>\n                                )\n                            }\n                        </Select>\n                        <InputNumber\n                            flex={0.5}\n                            name='lat'\n                            label='Latitud'\n                            size='large'\n                        // validations={[{ required: true, message: 'Latitud es requerida' }]}\n                        />\n                        <InputNumber\n                            flex={0.5}\n                            name='lng'\n                            label='Longitud'\n                            size='large'\n                        // validations={[{ required: true, message: 'Longitud es requerida' }]}\n                        />\n                        <InputNumber\n                            flex={0.5}\n                            name='position'\n                            label='Posicion'\n                            size='large'\n                        />\n                        <Select\n                            flex={0.5}\n                            name='status'\n                            label=\"Estado\"\n                            size='large'\n                            validations={[{ required: true, message: 'Estado es requerido' }]}\n                        >\n                            {\n                                _.map(STATUS, ({ id, name }, index) =>\n                                    <Select.Option\n                                        key={index}\n                                        value={id}\n                                    >\n                                        {name}\n                                    </Select.Option>\n                                )\n                            }\n                        </Select>\n                    </SimpleForm>\n                </Drawer>\n            }\n        </Layout.Content>\n    );\n}\n\nexport default Places;","import { useEffect, useState } from 'react';\nimport { message } from 'antd';\nimport { getService } from '../services';\n\nexport const useCities = () => {\n    const citiesService = getService(\"cities\");\n\n    const [cities, setCities] = useState([]);\n    const [loadingCities, setLoadingCities] = useState(false);\n\n    useEffect(() => {\n        setLoadingCities(true);\n        citiesService\n            .find({\n                query: {\n                    $limit: 100000,\n                    $sort: {\n                        name: 1,\n                    },\n                }\n            })\n            .then(({ data }) => {\n                setCities(data);\n                setLoadingCities(false);\n            })\n            .catch((err) => {\n                message.error(err.message);\n                setCities([]);\n                setLoadingCities(false);\n            });\n    }, []);\n\n\n    return [\n        cities,\n        loadingCities\n    ];\n}"],"sourceRoot":""}