(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[53],{1065:function(e,t,a){"use strict";a.r(t);a(362);var r=a(363),s=(a(366),a(367)),i=(a(357),a(358)),n=(a(436),a(438)),d=(a(368),a(369)),c=(a(218),a(69)),o=(a(143),a(142)),l=a(0),m=a(42),u=a.n(m),p=a(144),h=a.n(p),b=a(356),x=a(383),_=a(68),j=a(353),y=a(359),O=a(439),f=a(360),v=a(54),w=a(14);const g=[{name:"Adquirido",id:"acquired"},{name:"Inactivo",id:"inactive"},{name:"Reclamado",id:"claimed"},{name:"Not Claimed",id:"notClaimed"},{name:"Expirado",id:"expired"},{name:"Cancelado",id:"canceled"},{name:"Pending Approval",id:"pendingApproval"},{name:"Pending Verificaci\xf3n por cup\xf3n",id:"pendingClaimedVerification"},{name:"Not Approval",id:"notApproved"},{name:"Canceled by Establishment",id:"canceledByEstablishment"}],I=e=>{let{onEdit:t,onRemove:a,cities:r}=e;return[{dataIndex:"id",key:"id",title:"Id",sorter:!0,width:"70px"},{dataIndex:"user_id",key:"user_id",title:"User Id",sorter:!0,width:"70px"},{dataIndex:"meta_user_first_name",key:"meta_user_first_name",title:"Usuario",sorter:!0,width:"130px",render:(e,t)=>{let{meta_user_last_name:a}=t;return e+" "+a}},{dataIndex:"meta_user_phone",key:"meta_user_phone",title:"Tel\xe9fono",width:"100px",sorter:!0},{dataIndex:"meta_establishment_name",key:"meta_establishment_name",title:"Establecimiento",sorter:!0,width:"150px"},{dataIndex:"meta_establishment_branch_address",key:"meta_establishment_branch_address",title:"Sucursal",sorter:!0,width:"150px"},{dataIndex:"city_id",key:"city_id",title:"Ciudad",sorter:!0,render:e=>{var t;return(null===(t=u.a.find(r,t=>{let{id:a}=t;return e===a}))||void 0===t?void 0:t.name)||""},width:"110px"},{dataIndex:"status",key:"status",title:"Estado",sorter:!0,width:"80px"},{dataIndex:"meta_day",key:"meta_day",title:"Fecha",sorter:!0,width:"100px",render:e=>e?h()(e).format("YYYY-MM-DD"):""},{dataIndex:"meta_start_hour",key:"meta_start_hour",title:"Hora",sorter:!0,width:"70px",render:(e,t)=>"".concat(h()(e,"HH:mm:ss").format("h:mm a")||"")},{dataIndex:"createdAt",key:"createdAt",title:"Creaci\xf3n",sorter:!0,width:"100px",render:e=>e?h()(e).format("YYYY-MM-DD h:mm a"):""},{dataIndex:"meta_percentage",key:"meta_percentage",title:"%",sorter:!0,width:"50px",render:e=>"".concat(parseInt(e),"%")},{dataIndex:"persons",key:"persons",title:"Personas",sorter:!0,width:"100px",render:e=>"".concat(e||"")},{title:"Acciones",dataIndex:"id",width:"90px",key:"actions",render:(e,r)=>Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(o.a,{type:"text",onClick:()=>t(r),icon:Object(w.jsx)(j.l,{})}),Object(w.jsx)(y.a,{type:"link",onClick:()=>a({id:e}),icon:Object(w.jsx)(j.h,{}),confirmText:"Desea eliminar?"})]})}]};t.default=()=>{const e=Object(_.b)("reservations"),[t,a]=Object(l.useState)(!1),[o,m]=Object(l.useState)(),[p,j]=Object(l.useState)(!1),[y,k]=Object(l.useState)(),[E,C]=Object(x.a)();return Object(w.jsxs)(r.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:[Object(w.jsx)(b.b,{source:"reservations",filterDefaultValues:{meta_start_hour:y,$sort:{meta_day:-1}},searchField:"q",searchText:"Esta... o usuario...",search:!0,searchById:!0,updateSource:p,columns:I({onEdit:e=>{m(e),a(!0)},onRemove:async t=>{let{id:a}=t;await e.remove(a).then(()=>{c.b.success("Reservaci\xf3n eliminada!"),j(!p)}).catch(e=>c.b.error("No se pudo eliminar la reservaci\xf3n! "+(null===e||void 0===e?void 0:e.message)))},cities:E}),actions:{},filters:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(d.a,{alwaysOn:!0,source:"establishment_branch_id",name:"establishment_branch_id",label:"Id sucursal",placeholder:"Id sucursal",allowEmpty:!0,style:{width:"110px"}}),Object(w.jsx)(O.a,{alwaysOn:!0,source:"city_id",name:"city_id",label:"Ciudad",placeholder:"Ciudad",allowEmpty:!0,choices:E,size:"medium",loading:C}),Object(w.jsx)(O.a,{alwaysOn:!0,source:"status",name:"status",label:"Estado",placeholder:"Estado",allowEmpty:!0,choices:g,size:"medium",style:{width:"12rem"}})]}),title:Object(w.jsx)(n.a,{style:{width:"8rem"},minuteStep:v.e,secondStep:60,format:"HH:mm:ss",placeholder:"Hora inicio",onChange:e=>e?k(h()(e).format("HH:mm:00")):k()})}),t&&Object(w.jsx)(s.a,{title:"Editar Reserva",placement:"right",visible:t,onClose:()=>{a(!1),m()},children:Object(w.jsxs)(f.d,{source:"reservations",textAcceptButton:"Guardar",id:o.id,initialValues:o,onSubmit:()=>{a(!1),j(!p),m()},children:[Object(w.jsx)(i.a,{flex:1,name:"status",label:"Estado",size:"large",children:u.a.map(g,(e,t)=>{let{id:a,name:r}=e;return Object(w.jsx)(i.a.Option,{value:a,children:r},t)})}),Object(w.jsx)(d.a,{flex:1,name:"persons",label:"Comensales",size:"large"}),Object(w.jsx)(d.a,{flex:1,name:"previous_persons_change_by_establishment",label:"Cambio de Numero de Personas x el Establecimiento",size:"large"}),Object(w.jsx)(d.a,{flex:1,name:"reported_invoice_amount",label:"Valor total factura",size:"large",formatter:e=>"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,"")})]})})]})}},383:function(e,t,a){"use strict";a.d(t,"a",function(){return n});a(218);var r=a(69),s=a(0),i=a(68);const n=()=>{const e=Object(i.b)("cities"),[t,a]=Object(s.useState)([]),[n,d]=Object(s.useState)(!1);return Object(s.useEffect)(()=>{d(!0),e.find({query:{$limit:1e5,$sort:{name:1}}}).then(e=>{let{data:t}=e;a(t),d(!1)}).catch(e=>{r.b.error(e.message),a([]),d(!1)})},[]),[t,n]}}}]);
//# sourceMappingURL=53.cd4338ac.chunk.js.map