(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[51],{1063:function(e,A,t){"use strict";t.r(A);t(362);var a=t(363),i=(t(366),t(367)),c=(t(368),t(369)),r=(t(357),t(358)),n=(t(220),t(361)),o=t(2),s=(t(219),t(69)),E=(t(143),t(142)),d=(t(372),t(373)),Q=(t(408),t(412)),g=t(0),l=t(42),h=t.n(l),j=t(356),b=t(383),B=t(68),u=t(370),I=t(353),m=t(359),C=t(54),v=t(360),N=t(398),x=t(14);const J=[{id:"active",name:"Active"},{id:"inactive",name:"Inactive"}],p=e=>{let{onEdit:A,onRemove:t,cities:a}=e;return[{dataIndex:"id",key:"id",title:"Id",sorter:!0},{dataIndex:"cover_path",key:"cover_path",title:"Foto",render:e=>e&&Object(x.jsx)(Q.a,{width:50,height:50,alt:"cover_path",src:"".concat(C.f,"/").concat(window.imageShark({url:e,width:64,height:64})),preview:{src:"".concat(C.j).concat(e)},style:{borderRadius:"50%"},fallback:"data:image/png;base64,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"})},{dataIndex:"name",key:"name",title:"Nombre",sorter:!0},{dataIndex:"city_id",key:"city_id",title:"Ciudad",render:e=>{var A;return(null===(A=h.a.find(a,A=>{let{id:t}=A;return e===t}))||void 0===A?void 0:A.name)||""}},{dataIndex:"position",key:"position",title:"Posici\xf3n",sorter:!0},{dataIndex:"status",key:"status",title:"Estado",sorter:!0,render:e=>"active"===e?Object(x.jsx)(d.a,{color:"green",children:"Active"}):Object(x.jsx)(d.a,{color:"red",children:"Inactive"})},{title:"Acciones",dataIndex:"id",key:"actions",render:(e,a)=>Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(E.a,{type:"text",onClick:()=>A(a),icon:Object(x.jsx)(I.l,{})}),Object(x.jsx)(m.a,{type:"link",onClick:()=>t({id:e}),icon:Object(x.jsx)(I.h,{}),confirmText:"Desea eliminar?"})]})}]};A.default=()=>{const e=Object(B.b)("places"),[A,t]=Object(g.useState)(!1),[E,d]=Object(g.useState)(),[Q,l]=Object(g.useState)(!1),[m]=Object(b.a)();return Object(x.jsxs)(a.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:[Object(x.jsx)(j.b,{source:"places",filterDefaultValues:{$sort:{id:1}},updateSource:Q,columns:p({onEdit:e=>{d(e),t(!0)},onRemove:async A=>{let{id:t}=A;await e.remove(t).then(()=>{s.b.success("Zona eliminada!"),l(!Q)}).catch(e=>s.b.error("No se pudo eliminar el lugar! "+(null===e||void 0===e?void 0:e.message)))},cities:m}),actions:{},extra:Object(x.jsx)("div",{children:Object(x.jsx)(u.a,{type:"primary",icon:Object(x.jsx)(I.u,{}),onClick:()=>t(!0),children:"Agregar"})})}),A&&Object(x.jsxs)(i.a,{title:"".concat(E?"Editar":"Crear"," Lugar"),placement:"right",visible:A,onClose:()=>{t(!1),d()},children:[(null===E||void 0===E?void 0:E.id)&&(null===E||void 0===E?void 0:E.cover_path)&&Object(x.jsx)(N.a,{refresh:(e,A)=>{d(Object(o.a)({},A)),l(!Q)},size:"large",record:E,defaultImage:E.cover_path,source:"cover_path",withCropper:!0,setterVisibleCropper:()=>{},reference:"places",_id:E.id,path:"places_cover_path/".concat(+E.id,"/")}),(null===E||void 0===E?void 0:E.id)&&Object(x.jsx)(v.b,{flex:1,preview:!1,path:"places_cover_path/".concat(E.id,"/"),name:"cover_path",source:"cover_path",style:{borderRadius:"0.5rem"},onFinish:(A,t)=>(async(A,t,a,i)=>{e.patch(i,{[A]:String(t)}).then(e=>{d(Object(o.a)({},e)),l(!Q)}).catch(e=>s.b.error(e.message))})("cover_path",A,0,E.id)}),Object(x.jsxs)(v.d,{textAcceptButton:"".concat(E?"Actualizar":"Crear"),initialValues:E,onSubmit:async(A,a,i)=>{if(A)return s.b.error(A);E&&E.id?await e.patch(E.id,a).then(()=>{s.b.success("Lugar actualizado!"),d(),t(!1),l(!Q)}).catch(e=>s.b.error(e.message)):await e.create(a).then(()=>{s.b.success("Lugar creado correctamente!"),t(!1),l(!Q)}).catch(e=>s.b.error(e.message))},children:[Object(x.jsx)(n.a,{flex:1,size:"large",name:"name",label:"Nombre",validations:[{required:!0,message:"Nombre es requerido"}]}),Object(x.jsx)(r.a,{flex:1,size:"large",name:"city_id",label:"Ciudad",validations:[{required:!0,message:"Ciudad es requerida"}],children:h.a.map(m,(e,A)=>{let{id:t,name:a}=e;return Object(x.jsx)(r.a.Option,{value:t,children:a},A)})}),Object(x.jsx)(c.a,{flex:.5,name:"lat",label:"Latitud",size:"large"}),Object(x.jsx)(c.a,{flex:.5,name:"lng",label:"Longitud",size:"large"}),Object(x.jsx)(c.a,{flex:.5,name:"position",label:"Posicion",size:"large"}),Object(x.jsx)(r.a,{flex:.5,name:"status",label:"Estado",size:"large",validations:[{required:!0,message:"Estado es requerido"}],children:h.a.map(J,(e,A)=>{let{id:t,name:a}=e;return Object(x.jsx)(r.a.Option,{value:t,children:a},A)})})]})]})]})}},383:function(e,A,t){"use strict";t.d(A,"a",function(){return r});t(219);var a=t(69),i=t(0),c=t(68);const r=()=>{const e=Object(c.b)("cities"),[A,t]=Object(i.useState)([]),[r,n]=Object(i.useState)(!1);return Object(i.useEffect)(()=>{n(!0),e.find({query:{$limit:1e5,$sort:{name:1}}}).then(e=>{let{data:A}=e;t(A),n(!1)}).catch(e=>{a.b.error(e.message),t([]),n(!1)})},[]),[A,r]}}}]);
//# sourceMappingURL=51.0b540c99.chunk.js.map