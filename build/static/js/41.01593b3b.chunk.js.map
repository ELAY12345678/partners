{"version":3,"sources":["views/blogs/BlogsForm.jsx","views/blogs/lib/useBlog.js","../node_modules/antd/es/breadcrumb/style/index.js","../node_modules/antd/es/breadcrumb/BreadcrumbItem.js","../node_modules/antd/es/breadcrumb/BreadcrumbSeparator.js","../node_modules/antd/es/breadcrumb/Breadcrumb.js","../node_modules/antd/es/breadcrumb/index.js"],"names":["STATUS","id","name","revatidateStaticBlogInWebSite","_ref","slug","fetch","concat","method","redirect","then","response","text","result","console","log","catch","error","_message","message","BlogEditor","props","value","onChange","editor","useRef","_jsx","SunEditor","flex","label","defaultValue","getSunEditorInstance","sunEditor","current","onImageUploadBefore","files","_info","uploadHandler","onUploadFileVersionHurgot","_","merge","fileName","filePath","path","fileMatch","validate","match","fileMaxSize","maxSize","onProgress","subscribe","next","async","_files$","res","url","window","imageSharkOriginSize","fileKey","height","setOptions","plugins","codeMirror","CodeMirror","mode","buttonList","content","ImageInput","_jsxs","_Col","children","GalleryUploader","refresh","e","size","record","image","defaultImage","source","withCropper","setterVisibleCropper","reference","FileUploader","preview","style","borderRadius","onFinish","file","BlogsForm","navigate","useNavigate","blogsService","getService","isLoading","blogData","blogId","setBlogData","useState","setLoading","getBlogData","get","Number","finally","useEffect","useBlog","form","_Form","useForm","status","useWatch","_blogData$keywords","setFieldsValue","_objectSpread","keywords","trim","length","split","_Layout","Content","overflow","padding","_Breadcrumb","Item","Link","to","title","_Row","background","marginTop","SimpleForm","allowNull","onSubmit","errors","data","_data$keywords","_data$keywords2","formatData","join","undefined","updatedBlog","patch","success","newBlog","create","textAcceptButton","_Input","placeholder","validations","required","_Select","map","_ref2","index","Option","TextArea","autoSize","__rest","s","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","BreadcrumbItem","customizePrefixCls","prefixCls","_props$separator","separator","menu","overlay","dropdownProps","restProps","getPrefixCls","React","ConfigContext","link","breadcrumbItem","mergeDropDownProps","_extends","Dropdown","placement","className","DownOutlined","renderBreadcrumbNode","__ANT_BREADCRUMB_ITEM","BreadcrumbSeparator","__ANT_BREADCRUMB_SEPARATOR","defaultItemRender","route","params","routes","paths","isLastItem","breadcrumbName","paramsKeys","keys","replace","RegExp","replacement","key","getBreadcrumbName","href","getPath","forEach","addChildPath","childPath","originalPaths","_toConsumableArray","push","Breadcrumb","_a","crumbs","_a$separator","_a$itemRender","itemRender","_a$params","_React$useContext","direction","Menu","items","child","itemProps","toArray","element","cloneElement","breadcrumbClassName","classNames","_defineProperty","Separator"],"mappings":"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","file":"static/js/41.01593b3b.chunk.js","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { SimpleForm } from '../../components/com/form/SimpleForm';\nimport { useNavigate } from \"react-router-dom\";\nimport { Input, Layout, message, Row, Select, Form, Col, Breadcrumb } from 'antd';\nimport { Link } from 'react-router-dom';\n\nimport SunEditor from 'suneditor-react'\nimport plugins from 'suneditor/src/plugins'\nimport CodeMirror from 'codemirror'\nimport 'codemirror/mode/htmlmixed/htmlmixed'\nimport 'codemirror/lib/codemirror.css'\nimport 'suneditor/dist/css/suneditor.min.css'\nimport _ from 'lodash';\n\nimport { onUploadFileVersionHurgot } from '../../utils/FileUploader'\nimport { useBlog } from './lib/useBlog';\nimport { FileUploader } from '../../components/com/form/';\nimport { getService } from '../../services';\nimport GalleryUploader from '../../components/com/gallery/GalleryUploader';\n\n\nconst STATUS = [\n    {\n        id: \"published\",\n        name: \"Publicado\",\n    },\n    {\n        id: \"draft\",\n        name: \"Borrador\",\n    },\n    {\n        id: \"deleted\",\n        name: \"Inactivo\",\n    },\n];\n\n\nconst revatidateStaticBlogInWebSite = ({ slug }) => {\n\n    const requestOptions = {\n        method: 'GET',\n        redirect: 'follow'\n    };\n\n    fetch(`https://www.apparta.co/api/revalidate-static-blog?blogSlug=${slug}`, requestOptions)\n        .then(response => response.text())\n        .then(result => console.log(result))\n        .catch(error => message.error('error', error?.message));\n\n}\n\nconst BlogEditor = (props) => {\n\n    const { value, onChange } = props;\n    const editor = useRef();\n\n    const getSunEditorInstance = (sunEditor) => {\n        editor.current = sunEditor\n    }\n\n    function onImageUploadBefore() {\n        return (files, _info, uploadHandler) => {\n            (async () => {\n                await onUploadFileVersionHurgot(\n                    files,\n                    _.merge(\n                        {},\n                        props?.fileName ? { name: props?.fileName } : {},\n                        props?.filePath ? { path: props?.filePath } : {},\n                        props?.fileMatch ? { validate: { match: props?.fileMatch } } : {},\n                        props?.fileMaxSize\n                            ? { validate: { maxSize: props?.fileMaxSize } }\n                            : {},\n                        { onProgress: () => { } }\n                    )\n                ).subscribe({\n                    next: async (files) => {\n                        const res = {\n                            result: [\n                                {\n                                    url: `https://d110hltguvwo1i.cloudfront.net/${window.imageSharkOriginSize({ url: files?.[0]?.fileKey })}`,\n                                    name: \"thumbnail\",\n                                },\n                            ],\n                        };\n\n                        uploadHandler(res);\n                    },\n                    error: (error) => {\n                        // setProgress(0);\n                        uploadHandler();\n                        message.error(error?.message || 'Upps! intenta nuevamente');\n                    },\n                })\n\n            })();\n\n            // called here for stop double image\n            uploadHandler();\n        };\n    }\n\n    return (\n\n        <SunEditor\n            flex={1}\n            name=\"content\"\n            label=\"Cuerpo del blog\"\n            defaultValue={value}\n            getSunEditorInstance={getSunEditorInstance}\n            onImageUploadBefore={onImageUploadBefore()}\n            height=\"500px\"\n            setOptions={{\n                // plugins: [font] set plugins, all plugins are set by default\n                // Other option\n                plugins: plugins,\n                codeMirror: CodeMirror,\n                mode: 'classic',\n                //katex: katex,\n                buttonList: [\n                    ['undo', 'redo'],\n                    [\n                        ':p-More Paragraph-default.more_paragraph',\n                        'fontSize',\n                        'font',\n                        'formatBlock',\n                        'paragraphStyle',\n                        'blockquote',\n                    ],\n                    ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'],\n                    ['fontColor', 'hiliteColor', 'textStyle'],\n                    ['removeFormat'],\n                    ['outdent', 'indent'],\n                    ['align', 'horizontalRule', 'list', 'lineHeight'],\n                    ['fullScreen', 'showBlocks', 'codeView', 'preview'],\n                    //['-right', ':r-More Rich-default.more_plus', 'table', 'math', 'imageGallery'],\n                    ['-right', 'image', 'video', 'audio', 'link'],\n                ],\n            }}\n            onChange={(content) => {\n                onChange(content)\n            }}\n        />\n    )\n}\n\nconst ImageInput = (props) => {\n\n    const { value, onChange, } = props;\n\n    return (\n        <Col flex={1}>\n            {\n                value && (\n                    <GalleryUploader\n                        height={200}\n                        refresh={(e, response) => {\n                            onChange(null);\n                        }}\n                        size=\"large\"\n                        record={{ image: value }}\n                        defaultImage={value}\n                        source=\"image\"\n                        withCropper={true}\n                        setterVisibleCropper={() => { }}\n                        reference=\"establishments\"\n                        path={`ppartaWeb/static/blogs/`}\n                    />\n                )\n            }\n            <FileUploader\n                preview={false}\n                path={`AppartaWeb/static/blogs/`}\n                name='banner_path'\n                source='banner_path'\n                style={{ borderRadius: '0.5rem' }}\n                onFinish={(url, file) =>\n                    onChange(url)\n                }\n            />\n        </Col>\n    )\n}\n\nconst BlogsForm = (props) => {\n    const navigate = useNavigate();\n    const { id } = props;\n    const blogsService = getService(\"blog-posts\");\n\n    const { isLoading, blogData } = useBlog(id);\n\n    const [form] = Form.useForm();\n    const status = Form.useWatch('status', form);\n\n    const handleSubmit = async (errors, data, form) => {\n        try {\n            const formatData = {\n                ...data,\n                keywords: data?.keywords?.length ? data?.keywords?.join(', ') : undefined,\n            };\n            if (id) {\n                const updatedBlog = await blogsService.patch(id, { ...formatData });\n                message.success(\"Blog actualizado exitosamente!\");\n                revatidateStaticBlogInWebSite({  slug: updatedBlog?.slug });\n            } else {\n                const newBlog = await blogsService.create({ ...formatData });\n                message.success(\"Blog creado exitosamente!\")\n                revatidateStaticBlogInWebSite({ slug: newBlog?.slug });\n                navigate(`/dashboard/management/blogs/${newBlog?.id}`);\n            }\n\n        } catch (error) {\n            message.error(error?.message)\n        }\n\n    };\n\n    useEffect(() => {\n        if (blogData) {\n            form.setFieldsValue({\n                ...blogData,\n                keywords: blogData?.keywords?.trim().length ? _.split(blogData?.keywords, ', ') : []\n            })\n        }\n    }, [blogData])\n\n\n    return (\n        <Layout.Content style={{ height: '100%', overflow: 'auto', padding: '2rem' }}>\n            <Breadcrumb>\n                <Breadcrumb.Item>\n                    <Link to='/dashboard/management/blogs'>Blogs Apparta</Link>\n                </Breadcrumb.Item>\n                <Breadcrumb.Item>{blogData?.title}</Breadcrumb.Item>\n            </Breadcrumb>\n            <Row style={{ padding: '2rem', background: 'white', borderRadius: '0.5rem', marginTop: '20px' }}>\n                <SimpleForm\n                    allowNull\n                    form={form}\n                    onSubmit={handleSubmit}\n                    textAcceptButton={id ? \"ACTUALIZAR\" : \"CREAR\"}\n                >\n                    {/* <Input\n                        size=\"large\"\n                        flex={0.5}\n                        placeholder=\"Nuevo blog\"\n                        label=\"Slug\"\n                        name=\"slug\"\n                    /> */}\n\n                    <Input\n                        size=\"large\"\n                        flex={0.5}\n                        placeholder=\"Nuevo blog\"\n                        label=\"Titulo\"\n                        name=\"title\"\n                        validations={[\n                            {\n                                required: true,\n                                message: `Nombre es requerido`\n                            }\n                        ]}\n                    />\n\n                    <Select\n                        flex={0.5}\n                        name='status'\n                        label=\"Estado\"\n                        size='large'\n                        validations={[\n                            {\n                                required: true,\n                                message: `Estado es requerido`\n                            }\n                        ]}\n                    >\n                        {\n                            _.map(STATUS, ({ id, name }, index) =>\n                                <Select.Option\n                                    key={index}\n                                    value={id}\n                                >\n                                    {name}\n                                </Select.Option>\n                            )\n                        }\n                    </Select>\n\n                    <Select\n                        flex={1}\n                        mode=\"tags\"\n                        size='large'\n                        label=\"Palabras claves\"\n                        name='keywords'\n                        validations={[\n                            {\n                                required: status === 'published',\n                                message: `Palabras claves son requerido`\n                            }\n                        ]}\n                    />\n\n                    <ImageInput\n                        size=\"large\"\n                        flex={1}\n                        placeholder=\"Nuevo blog\"\n                        label=\"Portada\"\n                        name=\"image\"\n                        validations={[\n                            {\n                                required: status === 'published',\n                                message: `Portada es requerido`\n                            }\n                        ]}\n                    />\n                    <Input.TextArea\n                        autoSize\n                        flex={1}\n                        size=\"large\"\n                        placeholder=\"Descripción\"\n                        label=\"Descripción\"\n                        name=\"description\"\n                        validations={[\n                            {\n                                required: status === 'published',\n                                message: `Descripción es requerido`\n                            }\n                        ]}\n                    />\n\n                    {\n                        !isLoading && (\n                            <BlogEditor\n                                flex={1}\n                                name=\"content\"\n                                validations={[\n                                    {\n                                        required: status === 'published',\n                                        message: `El contenido es requerido`\n                                    }\n                                ]}\n                            />\n                        )\n                    }\n                </SimpleForm>\n            </Row>\n        </Layout.Content>\n    )\n}\n\nexport default BlogsForm;","import { message } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { getService } from \"../../../services/services\";\n\nexport const useBlog = (blogId) => {\n  const blogsService = getService(\"blog-posts\");\n  const [blogData, setBlogData] = useState(null);\n  const [isLoading, setLoading] = useState(true);\n\n  const getBlogData = (blogId) => {\n    setLoading(true);\n    blogsService\n      .get(Number(blogId))\n      .then((response) => {\n        setBlogData(response);\n      })\n      .catch((error) => {\n        message.error(error?.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  useEffect(() => {\n    if (blogId) {\n      getBlogData(blogId);\n    } else {\n      setLoading(false)\n    }\n  }, [blogId]);\n\n  return {\n    isLoading,\n    blogData,\n    getBlogData,\n  };\n};\n","import '../../style/default.less';\nimport './index.less';\n// style dependencies\nimport '../../dropdown/style';\nimport '../../menu/style';","import _extends from \"@babel/runtime/helpers/esm/extends\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport DownOutlined from \"@ant-design/icons/es/icons/DownOutlined\";\nimport * as React from 'react';\nimport warning from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport Dropdown from '../dropdown/dropdown';\nvar BreadcrumbItem = function BreadcrumbItem(props) {\n  var customizePrefixCls = props.prefixCls,\n    _props$separator = props.separator,\n    separator = _props$separator === void 0 ? '/' : _props$separator,\n    children = props.children,\n    menu = props.menu,\n    overlay = props.overlay,\n    dropdownProps = props.dropdownProps,\n    restProps = __rest(props, [\"prefixCls\", \"separator\", \"children\", \"menu\", \"overlay\", \"dropdownProps\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls;\n  var prefixCls = getPrefixCls('breadcrumb', customizePrefixCls);\n  // Warning for deprecated usage\n  if (process.env.NODE_ENV !== 'production') {\n    process.env.NODE_ENV !== \"production\" ? warning(!('overlay' in props), 'Breadcrumb.Item', '`overlay` is deprecated. Please use `menu` instead.') : void 0;\n  }\n  /** If overlay is have Wrap a Dropdown */\n  var renderBreadcrumbNode = function renderBreadcrumbNode(breadcrumbItem) {\n    if (menu || overlay) {\n      var mergeDropDownProps = _extends({}, dropdownProps);\n      if ('overlay' in props) {\n        mergeDropDownProps.overlay = overlay;\n      }\n      return /*#__PURE__*/React.createElement(Dropdown, _extends({\n        menu: menu,\n        placement: \"bottom\"\n      }, mergeDropDownProps), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-overlay-link\")\n      }, breadcrumbItem, /*#__PURE__*/React.createElement(DownOutlined, null)));\n    }\n    return breadcrumbItem;\n  };\n  var link;\n  if ('href' in restProps) {\n    link = /*#__PURE__*/React.createElement(\"a\", _extends({\n      className: \"\".concat(prefixCls, \"-link\")\n    }, restProps), children);\n  } else {\n    link = /*#__PURE__*/React.createElement(\"span\", _extends({\n      className: \"\".concat(prefixCls, \"-link\")\n    }, restProps), children);\n  }\n  // wrap to dropDown\n  link = renderBreadcrumbNode(link);\n  if (children !== undefined && children !== null) {\n    return /*#__PURE__*/React.createElement(\"li\", null, link, separator && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-separator\")\n    }, separator));\n  }\n  return null;\n};\nBreadcrumbItem.__ANT_BREADCRUMB_ITEM = true;\nexport default BreadcrumbItem;","import * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nvar BreadcrumbSeparator = function BreadcrumbSeparator(_ref) {\n  var children = _ref.children;\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls;\n  var prefixCls = getPrefixCls('breadcrumb');\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-separator\")\n  }, children || '/');\n};\nBreadcrumbSeparator.__ANT_BREADCRUMB_SEPARATOR = true;\nexport default BreadcrumbSeparator;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport classNames from 'classnames';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport Menu from '../menu';\nimport { cloneElement } from '../_util/reactNode';\nimport warning from '../_util/warning';\nimport BreadcrumbItem from './BreadcrumbItem';\nimport BreadcrumbSeparator from './BreadcrumbSeparator';\nfunction getBreadcrumbName(route, params) {\n  if (!route.breadcrumbName) {\n    return null;\n  }\n  var paramsKeys = Object.keys(params).join('|');\n  var name = route.breadcrumbName.replace(new RegExp(\":(\".concat(paramsKeys, \")\"), 'g'), function (replacement, key) {\n    return params[key] || replacement;\n  });\n  return name;\n}\nfunction defaultItemRender(route, params, routes, paths) {\n  var isLastItem = routes.indexOf(route) === routes.length - 1;\n  var name = getBreadcrumbName(route, params);\n  return isLastItem ? /*#__PURE__*/React.createElement(\"span\", null, name) : /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#/\".concat(paths.join('/'))\n  }, name);\n}\nvar getPath = function getPath(path, params) {\n  path = (path || '').replace(/^\\//, '');\n  Object.keys(params).forEach(function (key) {\n    path = path.replace(\":\".concat(key), params[key]);\n  });\n  return path;\n};\nvar addChildPath = function addChildPath(paths, childPath, params) {\n  var originalPaths = _toConsumableArray(paths);\n  var path = getPath(childPath || '', params);\n  if (path) {\n    originalPaths.push(path);\n  }\n  return originalPaths;\n};\nvar Breadcrumb = function Breadcrumb(_a) {\n  var customizePrefixCls = _a.prefixCls,\n    _a$separator = _a.separator,\n    separator = _a$separator === void 0 ? '/' : _a$separator,\n    style = _a.style,\n    className = _a.className,\n    routes = _a.routes,\n    children = _a.children,\n    _a$itemRender = _a.itemRender,\n    itemRender = _a$itemRender === void 0 ? defaultItemRender : _a$itemRender,\n    _a$params = _a.params,\n    params = _a$params === void 0 ? {} : _a$params,\n    restProps = __rest(_a, [\"prefixCls\", \"separator\", \"style\", \"className\", \"routes\", \"children\", \"itemRender\", \"params\"]);\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var crumbs;\n  var prefixCls = getPrefixCls('breadcrumb', customizePrefixCls);\n  if (routes && routes.length > 0) {\n    // generated by route\n    var paths = [];\n    crumbs = routes.map(function (route) {\n      var path = getPath(route.path, params);\n      if (path) {\n        paths.push(path);\n      }\n      // generated overlay by route.children\n      var overlay;\n      if (route.children && route.children.length) {\n        overlay = /*#__PURE__*/React.createElement(Menu, {\n          items: route.children.map(function (child) {\n            return {\n              key: child.path || child.breadcrumbName,\n              label: itemRender(child, params, routes, addChildPath(paths, child.path, params))\n            };\n          })\n        });\n      }\n      var itemProps = {\n        separator: separator\n      };\n      if (overlay) {\n        itemProps.overlay = overlay;\n      }\n      return /*#__PURE__*/React.createElement(BreadcrumbItem, _extends({}, itemProps, {\n        key: path || route.breadcrumbName\n      }), itemRender(route, params, routes, paths));\n    });\n  } else if (children) {\n    crumbs = toArray(children).map(function (element, index) {\n      if (!element) {\n        return element;\n      }\n      process.env.NODE_ENV !== \"production\" ? warning(element.type && (element.type.__ANT_BREADCRUMB_ITEM === true || element.type.__ANT_BREADCRUMB_SEPARATOR === true), 'Breadcrumb', \"Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children\") : void 0;\n      return cloneElement(element, {\n        separator: separator,\n        key: index\n      });\n    });\n  }\n  var breadcrumbClassName = classNames(prefixCls, _defineProperty({}, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), className);\n  return /*#__PURE__*/React.createElement(\"nav\", _extends({\n    className: breadcrumbClassName,\n    style: style\n  }, restProps), /*#__PURE__*/React.createElement(\"ol\", null, crumbs));\n};\nBreadcrumb.Item = BreadcrumbItem;\nBreadcrumb.Separator = BreadcrumbSeparator;\nexport default Breadcrumb;","import Breadcrumb from './Breadcrumb';\nexport default Breadcrumb;"],"sourceRoot":""}