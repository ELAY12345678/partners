(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[70],{1116:function(e,t,a){"use strict";a.r(t);a(362);var n=a(363),r=(a(377),a(379)),i=(a(512),a(518)),s=(a(375),a(376)),c=(a(351),a(352)),d=(a(220),a(145)),o=(a(354),a(355)),l=(a(218),a(69)),u=a(2),b=a(364),j=a(0),p=a(68);a(372);var m=a(373),h=(a(357),a(358),a(12),a(42)),v=a.n(h),y=a(144),x=a.n(y),O=a(385),_=a.n(O),f=a(356),g=(a(360),a(370),a(14));const w=[{id:"completed",name:"Completado",color:"success"},{id:"pending",name:"Pendiente",color:"processing"},{id:"rejected",name:"Rechazado",color:"error"}];var k=e=>{let{source:t,filterDefaultValues:a,permitFetch:n,updateStatistic:r,pay_account_id:i,expandable:s}=e;const[c,d]=Object(j.useState)(!1),[o,l]=Object(j.useState)(!1),b=[{title:"ID",dataIndex:"id",key:"id",sorter:!0},"pay-payments"===t&&{title:"Usuario",dataIndex:"user",key:"user",render:e=>e?"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name):"Usuario no asociado"},(null===a||void 0===a?void 0:a.user_id)&&{title:"Establecimiento",key:"establishment",render:e=>{var t,a;return e?"".concat(null===e||void 0===e||null===(t=e.establishment)||void 0===t?void 0:t.name,"-").concat(null===e||void 0===e||null===(a=e.establishment_branch)||void 0===a?void 0:a.address):"Establecimiento no asociado"}},{title:"Tipo",dataIndex:"type",key:"type",sorter:!0,render:e=>"".concat(null!==e?e:"Tipo no definido")},!("pay-withdrawal"===t||null!==a&&void 0!==a&&a.user_id)&&{title:"Cup\xf3n",dataIndex:"meta_pay_coupon_name",keys:"meta_pay_coupon_name",sorter:!0},!("pay-withdrawal"===t||null!==a&&void 0!==a&&a.user_id)&&{title:"Beneficio",dataIndex:"meta_pay_benefit_name",keys:"meta_pay_benefit_name",sorter:!1},!("pay-withdrawal"===t||null!==a&&void 0!==a&&a.user_id)&&{title:"Fecha de expiraci\xf3n",dataIndex:"bonus_expiration_date",keys:"bonus_expiration_date",sorter:!0,render:e=>e&&"".concat(x()(e).subtract(1,"second").format("YYYY/MM/DD"))},{title:"Fecha de la transacci\xf3n",dataIndex:"createdAt",keys:"createdAt",sorter:!0,render:e=>"".concat(x()(e).format("YYYY/MM/DD"))},{title:"Estado",dataIndex:"status",key:"status",sorter:!0,render:e=>{const t=v.a.find(w,t=>{let{id:a}=t;return a===e})||e;return Object(g.jsx)(m.a,{color:null===t||void 0===t?void 0:t.color,children:(null===t||void 0===t?void 0:t.name)||t})}},{title:"Monto",key:"amount",dataIndex:"amount",render:e=>Object(g.jsxs)("span",{style:{color:"pay-withdrawal"===t||null!==a&&void 0!==a&&a.user_id?"#ff4d4f":"#52c41a",fontSize:"1rem"},children:["$"," "," ","pay-withdrawal"===t||null!==a&&void 0!==a&&a.user_id?"-":"+",_()(e).format("0,0")]})},"pay-payments"===t&&{title:"Monto disponible",key:"amount_available",dataIndex:"amount_available",render:e=>Object(g.jsxs)("span",{children:[" $ ",_()(e).format("0,0")]}),align:"center"}];return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(f.b,{source:t,filterDefaultValues:Object(u.a)({$sort:{createdAt:-1}},a),permitFetch:n,actions:{},updateSource:c,columns:v.a.filter(b,e=>"object"===typeof e),expandable:s})})};var I=e=>{let{pay_account_id:t,updateStatistic:a}=e;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(k,{source:"pay-payments",updateStatistic:a,filterDefaultValues:{pay_account_id:t},pay_account_id:t})})},S=a(767);const T=[{id:"completed",name:"Completado",color:"success"},{id:"pending",name:"Pendiente",color:"processing"},{id:"rejected",name:"Rechazado",color:"error"}];var D=e=>{let{pay_account_id:t}=e;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(S.a,{source:"pay-withdrawal",filterDefaultValues:{pay_account_id:t,$sort:{createdAt:-1}},permitFetch:!0,actions:{},columns:[{title:"ID",dataIndex:"id",key:"id",sorter:!0},{title:"Tipo",dataIndex:"type",key:"type",sorter:!0,render:e=>"".concat(null!==e?e:"Tipo no definido")},{title:"Fecha de la transacci\xf3n",dataIndex:"createdAt",keys:"createdAt",sorter:!0,render:e=>"".concat(x()(e).format("YYYY/MM/DD"))},{title:"Estado",dataIndex:"status",key:"status",sorter:!0,render:e=>{const t=v.a.find(T,t=>{let{id:a}=t;return a===e})||e;return Object(g.jsx)(m.a,{color:null===t||void 0===t?void 0:t.color,children:(null===t||void 0===t?void 0:t.name)||t})}},{title:"Monto",key:"amount",dataIndex:"amount",render:e=>Object(g.jsxs)("span",{style:{color:"#ff4d4f",fontSize:"1rem"},children:["$"," "," ","-",_()(e).format("0,0")]})}]})})},Y=(a(143),a(142),a(353)),F=a(359);a(480);var A=a(62),E=a(486);t.default=()=>{const e=Object(A.d)(e=>{let{dashboardReducer:t}=e;return t.establishmentFilters}),t=Object(A.d)(e=>{let{appReducer:t}=e;return null===t||void 0===t?void 0:t.user}),[a,m]=Object(j.useState)(),[h,y]=Object(j.useState)(),[x,O,_]=(e=>{let{pay_account_id:t}=e;const a=Object(p.b)("raw-queries"),[n,r]=Object(j.useState)(),[i,s]=Object(j.useState)(!1),c=()=>{t&&s(!0),a.find({query:{$client:{totalPaymentsUserIdByPayAccountId:t}}}).then(e=>{r(e),s(!1)}).catch(e=>{l.b.error(e.message),s(!1)})};return Object(j.useEffect)(()=>{c()},[t]),[n,i,c]})({pay_account_id:a}),f=Object(p.b)("report-income-expenses"),w=(Object(p.b)("establishments-commissions"),Object(p.b)("pay-accounts")),k=()=>{};return Object(j.useEffect)(()=>{null!==e&&void 0!==e&&e.establishment_branch_id&&h&&(async e=>{await w.find({query:Object(u.a)({$limit:1},e)}).then(e=>{var t,a;(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)>0&&m(null===e||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.id)}).catch(()=>{})})(e)},[null===e||void 0===e?void 0:e.establishment_branch_id,h]),Object(j.useEffect)(()=>{if(null!==e&&void 0!==e&&e.establishment_id&&"user"===(null===t||void 0===t?void 0:t.role)){const a=v.a.find(null===t||void 0===t?void 0:t.permissionsv2,t=>{let{role:a,establishment_id:n}=t;return["superAdmin","kam"].includes(a)&&n===Number(null===e||void 0===e?void 0:e.establishment_id)});y(a)}else null!==e&&void 0!==e&&e.establishment_id&&"admin"===(null===t||void 0===t?void 0:t.role)&&y(!0)},[null===e||void 0===e?void 0:e.establishment_id]),Object(g.jsxs)(n.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:[Object(g.jsxs)(c.a,{children:[Object(g.jsxs)(c.a,{align:"middle",style:{color:"var(--purple)"},gutter:[16,16],children:[Object(g.jsx)(o.a,{children:Object(g.jsx)(Y.i,{size:30})}),Object(g.jsx)(o.a,{children:Object(g.jsx)(d.a.Title,{level:3,style:{margin:0},children:"Hist\xf3rico AppartaPay"})})]}),Object(g.jsx)(s.a,{style:{background:"transparent",borderTop:0,marginTop:0}})]}),Object(g.jsx)(c.a,{style:{marginBottom:"1rem"},gutter:16,children:Object(g.jsx)(o.a,{span:24,children:e.establishment_branch_id?h?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(s.a,{style:{background:"transparent",borderTop:0,marginTop:0}}),Object(g.jsxs)(c.a,{gutter:[16,16],children:[Object(g.jsx)(o.a,{span:8,children:Object(g.jsx)(b.a,{children:Object(g.jsx)(o.a,{span:24,children:Object(g.jsx)(i.a,{title:"Ingreso wallet (COP)",value:null===x||void 0===x?void 0:x.wallet_in,precision:2,loading:O})})})}),Object(g.jsx)(o.a,{span:8,children:Object(g.jsx)(b.a,{children:Object(g.jsx)(o.a,{span:24,children:Object(g.jsx)(i.a,{title:"Egreso wallet (COP)",value:null===x||void 0===x?void 0:x.wallet_out,precision:2,loading:O})})})}),Object(g.jsx)(o.a,{span:8,children:Object(g.jsx)(b.a,{children:Object(g.jsx)(o.a,{span:24,children:Object(g.jsx)(i.a,{title:"Balance total wallet (COP)",value:null===x||void 0===x?void 0:x.balance,precision:2,loading:O})})})})]}),Object(g.jsx)(s.a,{style:{background:"transparent",borderTop:0,marginTop:0}}),Object(g.jsx)(c.a,{gutter:8,justify:"end",children:(null===e||void 0===e?void 0:e.establishment_branch_id)&&Object(g.jsx)(o.a,{children:Object(g.jsxs)(F.a,{type:"primary",style:{borderRadius:"0.5rem"},onClick:async()=>{await f.find({query:Object(u.a)({},e)}).then(e=>{window.open(e.path,"_blank")}).catch(e=>{l.b.error(e.message)})},children:[Object(g.jsx)(E.c,{size:20}),"Ingresos/Egresos"]})})}),Object(g.jsx)(s.a,{style:{background:"transparent",borderTop:0,marginTop:0}}),Object(g.jsxs)(b.b,{defaultActiveKey:"1",children:[Object(g.jsx)(r.a.TabPane,{tab:"Ingreso wallet",children:Object(g.jsx)(I,{pay_account_id:a,updateStatistic:k})},"2"),Object(g.jsx)(r.a.TabPane,{tab:"Egreso wallet",children:Object(g.jsx)(D,{pay_account_id:a,updateStatistic:k})},"3")]})]}):Object(g.jsx)(b.a,{children:"*No tiene permisos para ver estos registros*"}):Object(g.jsx)(b.a,{children:"*Seleccione una direcci\xf3n para ver los registros*"})})})]})}}}]);
//# sourceMappingURL=70.b7786ac3.chunk.js.map