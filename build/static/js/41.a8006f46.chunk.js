(this["webpackJsonppartners-apparta"]=this["webpackJsonppartners-apparta"]||[]).push([[41],{1139:function(e,t,a){"use strict";a.r(t);a(362);var r=a(363),n=(a(351),a(352)),l=(a(357),a(358)),o=(a(220),a(361)),i=(a(422),a(426)),s=a(2),c=(a(386),a(387)),u=(a(354),a(355)),d=(a(219),a(69)),b=a(0),p=a(414),m=a(6),v=a(120),h=a(747),g=a.n(h),f=a(770),j=a(479),O=a.n(j),x=(a(750),a(231),a(749),a(42)),y=a.n(x),w=a(700),E=a(24);var k=a(360),C=a(68),N=a(398),P=a(14);const S=[{id:"published",name:"Publicado"},{id:"draft",name:"Borrador"},{id:"deleted",name:"Inactivo"}],R=e=>{let{slug:t}=e;fetch("https://www.apparta.co/api/revalidate-static-blog?blogSlug=".concat(t),{method:"GET",redirect:"follow"}).then(e=>e.text()).then(e=>console.log(e)).catch(e=>d.b.error("error",null===e||void 0===e?void 0:e.message))},q=e=>{const{value:t,onChange:a}=e,r=Object(b.useRef)();return Object(P.jsx)(g.a,{flex:1,name:"content",label:"Cuerpo del blog",defaultValue:t,getSunEditorInstance:e=>{r.current=e},onImageUploadBefore:(t,a,r)=>{(async()=>{await Object(w.a)(t,y.a.merge({},null!==e&&void 0!==e&&e.fileName?{name:null===e||void 0===e?void 0:e.fileName}:{},null!==e&&void 0!==e&&e.filePath?{path:null===e||void 0===e?void 0:e.filePath}:{},null!==e&&void 0!==e&&e.fileMatch?{validate:{match:null===e||void 0===e?void 0:e.fileMatch}}:{},null!==e&&void 0!==e&&e.fileMaxSize?{validate:{maxSize:null===e||void 0===e?void 0:e.fileMaxSize}}:{},{onProgress:()=>{}})).subscribe({next:async e=>{var t;const a={result:[{url:"https://d110hltguvwo1i.cloudfront.net/".concat(window.imageSharkOriginSize({url:null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.fileKey})),name:"thumbnail"}]};r(a)},error:e=>{r(),d.b.error((null===e||void 0===e?void 0:e.message)||"Upps! intenta nuevamente")}})})(),r()},height:"500px",setOptions:{plugins:f.default,codeMirror:O.a,mode:"classic",buttonList:[["undo","redo"],[":p-More Paragraph-default.more_paragraph","fontSize","font","formatBlock","paragraphStyle","blockquote"],["bold","underline","italic","strike","subscript","superscript"],["fontColor","hiliteColor","textStyle"],["removeFormat"],["outdent","indent"],["align","horizontalRule","list","lineHeight"],["fullScreen","showBlocks","codeView","preview"],["-right","image","video","audio","link"]]},onChange:e=>{a(e)}})},z=e=>{const{value:t,onChange:a}=e;return Object(P.jsxs)(u.a,{flex:1,children:[t&&Object(P.jsx)(N.a,{height:200,refresh:(e,t)=>{a(null)},size:"large",record:{image:t},defaultImage:t,source:"image",withCropper:!0,setterVisibleCropper:()=>{},reference:"establishments",path:"ppartaWeb/static/blogs/"}),Object(P.jsx)(k.b,{preview:!1,path:"AppartaWeb/static/blogs/",name:"banner_path",source:"banner_path",style:{borderRadius:"0.5rem"},onFinish:(e,t)=>a(e)})]})};t.default=e=>{const t=Object(m.q)(),{id:a}=e,u=Object(C.b)("blog-posts"),{isLoading:h,blogData:g}=(e=>{const t=Object(E.g)("blog-posts"),[a,r]=Object(b.useState)(null),[n,l]=Object(b.useState)(!0),o=e=>{l(!0),t.get(Number(e)).then(e=>{r(e)}).catch(e=>{d.b.error(null===e||void 0===e?void 0:e.message)}).finally(()=>{l(!1)})};return Object(b.useEffect)(()=>{e?o(e):l(!1)},[e]),{isLoading:n,blogData:a,getBlogData:o}})(a),[f]=c.a.useForm(),j=c.a.useWatch("status",f);return Object(b.useEffect)(()=>{var e;g&&f.setFieldsValue(Object(s.a)(Object(s.a)({},g),{},{keywords:null!==g&&void 0!==g&&null!==(e=g.keywords)&&void 0!==e&&e.trim().length?y.a.split(null===g||void 0===g?void 0:g.keywords,", "):[]}))},[g]),Object(P.jsxs)(r.a.Content,{style:{height:"100%",overflow:"auto",padding:"2rem"},children:[Object(P.jsxs)(i.a,{children:[Object(P.jsx)(i.a.Item,{children:Object(P.jsx)(v.b,{to:"/dashboard/management/blogs",children:"Blogs Apparta"})}),Object(P.jsx)(i.a.Item,{children:null===g||void 0===g?void 0:g.title})]}),Object(P.jsx)(n.a,{style:{padding:"2rem",background:"white",borderRadius:"0.5rem",marginTop:"20px"},children:Object(P.jsxs)(p.a,{allowNull:!0,form:f,onSubmit:async(e,r,n)=>{try{var l,o;const e=Object(s.a)(Object(s.a)({},r),{},{keywords:null!==r&&void 0!==r&&null!==(l=r.keywords)&&void 0!==l&&l.length?null===r||void 0===r||null===(o=r.keywords)||void 0===o?void 0:o.join(", "):void 0});if(a){const t=await u.patch(a,Object(s.a)({},e));d.b.success("Blog actualizado exitosamente!"),R({slug:null===t||void 0===t?void 0:t.slug})}else{const a=await u.create(Object(s.a)({},e));d.b.success("Blog creado exitosamente!"),R({slug:null===a||void 0===a?void 0:a.slug}),t("/dashboard/management/blogs/".concat(null===a||void 0===a?void 0:a.id))}}catch(i){d.b.error(null===i||void 0===i?void 0:i.message)}},textAcceptButton:a?"ACTUALIZAR":"CREAR",children:[Object(P.jsx)(o.a,{size:"large",flex:.5,placeholder:"Nuevo blog",label:"Titulo",name:"title",validations:[{required:!0,message:"Nombre es requerido"}]}),Object(P.jsx)(l.a,{flex:.5,name:"status",label:"Estado",size:"large",validations:[{required:!0,message:"Estado es requerido"}],children:y.a.map(S,(e,t)=>{let{id:a,name:r}=e;return Object(P.jsx)(l.a.Option,{value:a,children:r},t)})}),Object(P.jsx)(l.a,{flex:1,mode:"tags",size:"large",label:"Palabras claves",name:"keywords",validations:[{required:"published"===j,message:"Palabras claves son requerido"}]}),Object(P.jsx)(z,{size:"large",flex:1,placeholder:"Nuevo blog",label:"Portada",name:"image",validations:[{required:"published"===j,message:"Portada es requerido"}]}),Object(P.jsx)(o.a.TextArea,{autoSize:!0,flex:1,size:"large",placeholder:"Descripci\xf3n",label:"Descripci\xf3n",name:"description",validations:[{required:"published"===j,message:"Descripci\xf3n es requerido"}]}),!h&&Object(P.jsx)(q,{flex:1,name:"content",validations:[{required:"published"===j,message:"El contenido es requerido"}]})]})})]})}},422:function(e,t,a){"use strict";a(84),a(423),a(403),a(399)},423:function(e,t,a){},426:function(e,t,a){"use strict";var r=a(1),n=a(3),l=a(10),o=a(9),i=a.n(o),s=a(43),c=a(0),u=a(64),d=a(397),b=a(32),p=a(431),m=a(465),v=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},h=function(e){var t=e.prefixCls,a=e.separator,r=void 0===a?"/":a,l=e.children,o=e.menu,i=e.overlay,s=e.dropdownProps,d=v(e,["prefixCls","separator","children","menu","overlay","dropdownProps"]),b=(0,c.useContext(u.b).getPrefixCls)("breadcrumb",t);var h;return h=function(t){if(o||i){var a=Object(n.a)({},s);return"overlay"in e&&(a.overlay=i),c.createElement(m.a,Object(n.a)({menu:o,placement:"bottom"},a),c.createElement("span",{className:"".concat(b,"-overlay-link")},t,c.createElement(p.a,null)))}return t}(h="href"in d?c.createElement("a",Object(n.a)({className:"".concat(b,"-link")},d),l):c.createElement("span",Object(n.a)({className:"".concat(b,"-link")},d),l)),void 0!==l&&null!==l?c.createElement("li",null,h,r&&c.createElement("span",{className:"".concat(b,"-separator")},r)):null};h.__ANT_BREADCRUMB_ITEM=!0;var g=h,f=function(e){var t=e.children,a=(0,c.useContext(u.b).getPrefixCls)("breadcrumb");return c.createElement("span",{className:"".concat(a,"-separator")},t||"/")};f.__ANT_BREADCRUMB_SEPARATOR=!0;var j=f,O=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a};function x(e,t,a,r){var n=a.indexOf(e)===a.length-1,l=function(e,t){if(!e.breadcrumbName)return null;var a=Object.keys(t).join("|");return e.breadcrumbName.replace(new RegExp(":(".concat(a,")"),"g"),function(e,a){return t[a]||e})}(e,t);return n?c.createElement("span",null,l):c.createElement("a",{href:"#/".concat(r.join("/"))},l)}var y=function(e,t){return e=(e||"").replace(/^\//,""),Object.keys(t).forEach(function(a){e=e.replace(":".concat(a),t[a])}),e},w=function(e,t,a){var r=Object(l.a)(e),n=y(t||"",a);return n&&r.push(n),r},E=function(e){var t,a=e.prefixCls,l=e.separator,o=void 0===l?"/":l,p=e.style,m=e.className,v=e.routes,h=e.children,f=e.itemRender,j=void 0===f?x:f,E=e.params,k=void 0===E?{}:E,C=O(e,["prefixCls","separator","style","className","routes","children","itemRender","params"]),N=c.useContext(u.b),P=N.getPrefixCls,S=N.direction,R=P("breadcrumb",a);if(v&&v.length>0){var q=[];t=v.map(function(e){var t,a=y(e.path,k);a&&q.push(a),e.children&&e.children.length&&(t=c.createElement(d.a,{items:e.children.map(function(e){return{key:e.path||e.breadcrumbName,label:j(e,k,v,w(q,e.path,k))}})}));var r={separator:o};return t&&(r.overlay=t),c.createElement(g,Object(n.a)({},r,{key:a||e.breadcrumbName}),j(e,k,v,q))})}else h&&(t=Object(s.a)(h).map(function(e,t){return e?Object(b.a)(e,{separator:o,key:t}):e}));var z=i()(R,Object(r.a)({},"".concat(R,"-rtl"),"rtl"===S),m);return c.createElement("nav",Object(n.a)({className:z,style:p},C),c.createElement("ol",null,t))};E.Item=g,E.Separator=j;var k=E;t.a=k}}]);
//# sourceMappingURL=41.a8006f46.chunk.js.map